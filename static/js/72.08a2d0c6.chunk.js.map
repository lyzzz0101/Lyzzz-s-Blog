{"version":3,"sources":["components/Articles/HypeCycle/data.csv","components/Articles/HypeCycle/HypeCycle.jsx","components/Articles/HypeCycle/OrbitControls.js"],"names":["module","exports","__webpack_require__","p","ordinalColors","categories","fromPairs","slug","label","color","map","d","categoryColors","category","i","length","curveDepth","years","range","HypeCycle","_useState","useState","_useState2","Object","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__","data","setData","_useState3","_useState4","isPlaying","setIsPlaying","_useState5","_useState6","yearIndex","setYearIndex","_useState7","_useState8","hoveredDot","setHoveredDot","_useState9","_useState10","showingCategories","setShowingCategories","useInterval","newYearIndex","year","loadData","_ref","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_callee","res","zScale","wrap","_context","prev","next","csv","dataUrl","sent","scaleLinear","domain","hasHadIndex","pointIndex","percent","concat","Number","isFinite","index","Math","round","name","filter","z","names","time","stop","apply","this","arguments","useEffect","filteredDots","useMemo","includes","find","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","className","Timeline","List","assign","Categories","Wrapper","href","target","rel","camera","fov","near","far","position.z","Controls","_useThree2","useThree","gl","invalidate","ref","useRef","useFrame","current","update","addEventListener","args","domElement","_ref5","vertices","props","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","_useState11","_useState12","react_three_fiber__WEBPACK_IMPORTED_MODULE_7__","position","intensity","Point","key","isHovered","onHover","e","onHoverDot","Curve","extend","OrbitControls","extrudeSettings","steps","depth","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","curveSegments","curve","THREE","moveTo","bezierCurveTo","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","lineTo","curvePoints","point","getPointAt","x","y","attach","transparent","opacity","side","pointGeometry","_ref6","_ref6$pointIndex","pointIndexTweened","useSpring","config","mass","tension","friction","colorTweened","react_spring_three__WEBPACK_IMPORTED_MODULE_6__","group","position-x","interpolate","position-y","position-z","onPointerOver","geometry","meshLambertMaterial","memo","_ref7","_useState13","_useState14","isHovering","setIsHovering","wrapperElement","elem","getElementsByClassName","kebabCase","scrollIntoView","sortedItems","value","sort","b","onMouseEnter","onMouseLeave","react_flip_move__WEBPACK_IMPORTED_MODULE_9__","_ref8","ListItem","forwardRef","_ref9","style","--color","_ref10","onClick","components_ui_Icon_Icon__WEBPACK_IMPORTED_MODULE_15__","_ref11","counts","countBy","sortedCategories","three__WEBPACK_IMPORTED_MODULE_0__","object","undefined","document","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MIDDLE","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownPan","event","clientX","clientY","preventDefault","focus","button","ctrlKey","metaKey","shiftKey","handleMouseDownRotate","handleMouseDownDolly","subVectors","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","prototype","create","constructor","defineProperties","center","get","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor"],"mappings":"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","file":"static/js/72.08a2d0c6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"25fd7aa1a88466c6560f386ec0a6a49c.csv\";","import { forwardRef, useState, useMemo, useEffect, useRef, memo } from 'react';\nimport React from \"react\"\n// import { Extrude } from '@react-three/drei/Extrude'\nimport { useSpring, a } from 'react-spring/three'\nimport { extend, Canvas, useThree, useFrame } from 'react-three-fiber'\nimport { useInterval } from \"utils/utils\"\nimport FlipMove from 'react-flip-move';\n\nimport * as THREE from 'three'\nimport OrbitControls from \"./OrbitControls\"\nimport {range, csv, scaleLinear } from \"d3\"\nimport {countBy, fromPairs, kebabCase} from \"lodash\"\nimport dataUrl from \"./data.csv\"\nimport Icon from \"components/_ui/Icon/Icon\"\n\nimport './HypeCycle.scss';\n\nconst ordinalColors = [\n  \"#1289A7\", \"#778beb\", \"#22a6b3\", \"#5758BB\", \"#cf6a87\", \"#e77f67\", \"#786fa6\", \"#FDA7DF\", \"#4b7bec\", \"#778ca3\",\"#12CBC4\",\n];\nconst yearsToMainstreamInfo = [\n  {slug: \"LT2\", label: \"Less than 2 years\", color: \"#e77f67\",},\n  {slug: \"2T5\", label: \"Two to five years\", color: \"#cf6a87\",},\n  {slug: \"5T10\", label: \"Five to ten years\", color: \"#778beb\",},\n  {slug: \"GT10\", label: \"Greater than 10 years\", color: \"#786fa6\",},\n  {slug: \"UNDF\", label: \"No time scale specified (1995-1998)\", color: \"#778ca3\",},\n  {slug: \"INTP\", label: \"Interpolated values\", color: \"#778ca3\",},\n]\nconst yearsToMainstreamColorMap = fromPairs(yearsToMainstreamInfo.map(d => [\n  d.slug, d.color\n]))\n\n// LT2 - Less than 2 years\n// 2T5 - Two to five years\n// 5T10 - Five to ten years\n// GT10 - Greater than 10 years\n// UNDF - No time scale specified (1995-1998)\n// INTP - Interpolated values\n// const colorScale = d3.scaleLinear().range([\"#c7ecee\", \"#686de0\"]).domain([0, 1])\n\nconst categories = [ \"Artificial Intelligence\", \"Human-Computer Interface\", \"Methodology\", \"Software Architecture\", \"Communications\", \"Networking Technology\", \"Mobile Technology\", \"Computer Architecture\", \"Information Technology\", \"Platforms\", \"Web Technology\", \"Cyber Security\", \"Financial Technology\", \"Display Technology\", \"Wireless Technology\", \"Analytics\", \"Energy Technology\", \"Sensing/Tracking\", \"Physical Actuation\", \"Manufacturing\", \"Vehicle Technology\" ]\nconst categoryColors = fromPairs(categories.map((category, i) => [\n  category, ordinalColors[i % ordinalColors.length]\n]))\n\nconst curveDepth = 9\nconst curveWidth = 1\n\nconst years = range(1995, 2020)\n\nconst HypeCycle = () => {\n  const [data, setData] = useState([])\n  const [isPlaying, setIsPlaying] = useState(true)\n  const [yearIndex, setYearIndex] = useState(0)\n  const [hoveredDot, setHoveredDot] = useState(null)\n  const [showingCategories, setShowingCategories] = useState(categories)\n\n  const incrementYear = () => {\n    let newYearIndex = yearIndex + 1\n    if (!years[newYearIndex]) {\n      setIsPlaying(false)\n    } else {\n      setYearIndex(newYearIndex)\n    }\n  }\n  useInterval(incrementYear, isPlaying ? 1500 : null)\n  const year = years[yearIndex]\n\n  const loadData = async () => {\n    const res = await csv(dataUrl)\n    const zScale = scaleLinear()\n      .domain([-2, res.length + 2])\n      .range([0, curveDepth])\n    // const categories = [...new Set(res.map(d => d[\"Technology Category\"]))]\n    const data = res.map((d, i) => {\n      let hasHadIndex = false\n      const pointIndex = years.map(year => {\n        const percent = d[`dist${year}`]\n        if (!percent || !Number.isFinite(+percent)) return hasHadIndex ? 100 : 0\n        const index = Math.round(+percent * 100)\n        hasHadIndex = true\n        return index\n      })\n      return {\n        name: years.map(year => d[`name${year}`]).filter(d => d)[0] || \"\",\n        pointIndex,\n        z: zScale(i),\n        names: years.map(year => d[`name${year}`]),\n        time: years.map(year => d[`time${year}`]),\n        category: d[\"Technology Category\"],\n        color: categoryColors[d[\"Technology Category\"]],\n        i,\n      }\n    })\n    setData(data)\n  }\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  const filteredDots = useMemo(() => (\n    data.filter(d => showingCategories.includes(d[\"category\"]))\n  ), [data, showingCategories])\n\n  useEffect(() => {\n    if (!hoveredDot) return\n    if (!filteredDots.filter(d => (\n      d[\"pointIndex\"][yearIndex] > 0 && d[\"pointIndex\"][yearIndex] < 100\n    )).find(d => d[\"name\"] == hoveredDot)) {\n      setHoveredDot(false)\n    }\n  }, [filteredDots, yearIndex])\n\n  return (\n    <div className={`HypeCycle`}>\n      <Timeline {...{yearIndex, setYearIndex, isPlaying, setIsPlaying}} />\n      <List data={filteredDots} {...{yearIndex, hoveredDot, setHoveredDot}} />\n      <Categories data={filteredDots} {...{yearIndex, showingCategories, setShowingCategories}} />\n\n      {!!hoveredDot && (\n        <div className=\"HypeCycle__tooltip\">\n          {hoveredDot}\n        </div>\n      )}\n\n      <div className=\"HypeCycle__contents\">\n        <Wrapper data={filteredDots} {...{year, yearIndex, showingCategories, hoveredDot, setHoveredDot}} />\n      </div>\n      <div className=\"HypeCycle__attr\">\n        This is a visualization of how new technologies traverse <a href=\"https://www.gartner.com/en/documents/3887767\" target=\"_blank\" rel=\"noopener\">the Gartner Hype Cycle</a>.\n        <br />\n        Data and original idea from <a href=\"https://vimeo.com/464835556\" target=\"_blank\" rel=\"noopener\">Mark Mine</a>.\n      </div>\n    </div>\n  )\n}\n\nexport default HypeCycle\n\nconst camera = {\n  fov: 75, near: 0.1, far: 1000,\n  \"position.z\": 2,\n}\nconst HoveredDot = ({ hoveredDot, data, yearIndex, setHoveredDotPosition }) => {\n  const { camera, size } = useThree()\n\n  useFrame(() => {\n    if (!hoveredDot) return\n    const point = data.find(d => d[\"name\"] == hoveredDot)\n    if (!point) return\n    const [x, y] = curvePoints[Math.round(point[\"pointIndex\"][yearIndex])] || []\n    if (!x || !y) return\n    let p = new THREE.Vector3(x, y, point[\"z\"]);\n    let vector = p.project(camera);\n\n    vector.x = (vector.x + 1) / 2 * size.width;\n    vector.y = -(vector.y - 1) / 2 * size.height;\n    vector.z = 0\n\n    setHoveredDotPosition([vector.x, vector.y]);\n  })\n  return null\n}\nconst Controls = () => {\n  const { camera, gl, invalidate } = useThree()\n  const ref = useRef()\n  useFrame(() => ref.current.update())\n  useEffect(() => void ref.current.addEventListener('change', invalidate), [])\n  return <orbitControls ref={ref} args={[camera, gl.domElement]} />\n}\n// function Controls(props) {\n//   const ref = useRef()\n//   const { camera } = useThree()\n//   // useFrame(() => ref.current.obj.update())\n//   return <orbitControls ref={ref} args={[camera]} {...props} />\n// }\n\nextend({ OrbitControls })\n\nfunction Wrapper({ vertices, color, year, yearIndex, data, showingCategories, hoveredDot, setHoveredDot, ...props }) {\n  const onHoverDot = (d) => {\n    setHoveredDot(d[\"name\"])\n  }\n\n  const [hoveredDotPosition, setHoveredDotPosition] = useState([])\n\n  return (\n    <Canvas camera={camera} {...props}>\n      {/* <HoveredDot {...{hoveredDot, data, yearIndex, setHoveredDotPosition}} /> */}\n      <Controls />\n      <group>\n\n        <pointLight\n          position={[0,0,4]}\n          color=\"#fff\"\n          intensity={0.3}\n        />\n        <pointLight\n          position={[-2,0,-2]}\n          color=\"#fff\"\n          intensity={0.3}\n        />\n        <pointLight\n          position={[3,3,3]}\n          color=\"#12CBC4\"\n          intensity={0.1}\n        />\n        <ambientLight color=\"0xFFC312\" intensity={0.4} />\n        <ambientLight color=\"#5758BB\" intensity={0.4} />\n\n        <group position={[-curveDepth / 2, -curveDepth * 0.4, -curveDepth]}>\n          {data.map(d => (\n            <Point\n              key={d[\"name\"]}\n              pointIndex={d[\"pointIndex\"][yearIndex]}\n              time={d[\"time\"][yearIndex]}\n              name={d[\"names\"][yearIndex] || d[\"name\"]}\n              color={d[\"color\"]}\n              z={d[\"z\"]}\n              isHovered={hoveredDot == d[\"name\"]}\n              onHover={(e) => onHoverDot(d, e)}\n            />\n          ))}\n\n          <Curve />\n        </group>\n      </group>\n    </Canvas>\n  )\n}\n\nconst extrudeSettings = {\n  steps: 2,\n  depth: curveDepth,\n  bevelEnabled: true,\n  bevelThickness: 0,\n  bevelSize: 0,\n  bevelOffset: 0,\n  bevelSegments: 10,\n  curveSegments: 60,\n}\n\nconst curve = new THREE.Shape()\n\nconst width = curveWidth\n\ncurve.moveTo(0, 0)\ncurve.bezierCurveTo(...[\n  1.185, 0, // cp1\n  1.226, 5.496, // cp2\n  2.121, 5.496 // end\n].map(d => d * width))\ncurve.bezierCurveTo(...[\n  3.017, 5.496, // cp1\n  2.493, 1.075, // cp2\n  3.939, 1.075, // end\n].map(d => d * width))\ncurve.bezierCurveTo(...[\n  5.386, 1.075, // cp1\n  6.928, 3.113, // cp2\n  10, 3.113 // end\n].map(d => d * width))\ncurve.lineTo(...[\n  10, 0\n].map(d => d * width))\nconst curvePoints = range(0, 1.01, 0.01).map(d => {\n  const point = curve.getPointAt(d)\n  if (!point) return null\n  return [point.x, point.y]\n})\n\n\nconst Curve = () => (\n  <mesh>\n    <extrudeGeometry attach=\"geometry\" args={[curve, extrudeSettings]} />\n    <meshLambertMaterial\n      attach=\"material\"\n      color=\"#fff\"\n      transparent=\"true\"\n      opacity=\"0.5\"\n      side={THREE.DoubleSide}\n    />\n  </mesh>\n)\n\nconst pointGeometry = new THREE.SphereGeometry(0.2, 32, 32)\n// const pointMaterial = new THREE.MeshLambertMaterial({color: \"#45aeb1\", side: THREE.DoubleSide})\nconst Point = ({ name, color, pointIndex=0, z, time, isHovered, onHover }) => {\n\n  const {pointIndex: pointIndexTweened} = useSpring({\n    config: {\n      mass: 10, tension: 30, friction: 34,\n    },\n    pointIndex,\n  })\n\n  const {colorTweened} = useSpring({\n    config: {\n      mass: 1, tension: 30, friction: 34,\n    },\n    colorTweened: pointIndex > 0 && pointIndex < 100 ? color || \"#fff\" : \"#fff\",\n  })\n\n  return (\n    <a.group\n      position-x={pointIndexTweened.interpolate(d => (curvePoints[Math.round(d)] || [])[0])}\n      position-y={pointIndexTweened.interpolate(d => (curvePoints[Math.round(d)] || [])[1])}\n      position-z={z}\n      onPointerOver={onHover}\n    >\n      <mesh geometry={pointGeometry}>\n        <a.meshLambertMaterial attach=\"material\" color={isHovered ? \"#000\" : colorTweened} />\n      </mesh>\n    </a.group>\n  )\n}\n\nconst List = memo(({ yearIndex, data, hoveredDot, setHoveredDot }) => {\n  const [isHovering, setIsHovering] = useState(false)\n  const wrapperElement = useRef()\n\n  useEffect(() => {\n    if (isHovering) return\n    if (!wrapperElement.current) return\n    if (!hoveredDot) return\n    const elem = wrapperElement.current.getElementsByClassName(`item--${kebabCase(hoveredDot)}`)[0]\n    if (!elem) return\n    elem.scrollIntoView()\n  }, [hoveredDot])\n\n  const sortedItems = useMemo(() => (\n    data.map(d => ({\n      name: d[\"name\"],\n      value: d[\"pointIndex\"][yearIndex],\n      // color: yearsToMainstreamColorMap[d[\"time\"][yearIndex]],\n      color: d[\"color\"],\n      category: d[\"category\"],\n    }))\n    // .filter(d => d[\"value\"] && d[\"value\"] < 100)\n    .sort((a,b) => a.value - b.value)\n  ), [yearIndex, data])\n\n  return (\n    <div ref={wrapperElement} className=\"HypeCycle__list\" onMouseEnter={() => setIsHovering(true)} onMouseLeave={() => setIsHovering(true)}>\n      <FlipMove>\n        {sortedItems.map(({ name, color, value, category }) => (\n          <ListItem\n            key={name}\n            isHovered={hoveredDot == name}\n            onHover={() => setHoveredDot(name)}\n            {...{name, color, value, category}}\n          />\n        ))}\n      </FlipMove>\n    </div>\n  )\n})\n\nconst ListItem = forwardRef(({ name, color, value, category, isHovered, onHover }, ref) => (\n  <div ref={ref} className={`item--${kebabCase(name)} HypeCycle__list__item HypeCycle__list__item--is-${!value || value >= 100 ? \"hidden\" : \"showing\"} HypeCycle__list__item--is-${isHovered ? \"hovered\" : \"not-hovered\"}`} style={{\n    \"--color\": color,\n  }} onMouseEnter={onHover}>\n    <h6 className=\"HypeCycle__list__item__category\">\n      { category }\n    </h6>\n    {name}\n  </div>\n))\n\nconst Timeline = memo(({ yearIndex, setYearIndex, isPlaying, setIsPlaying}) => {\n  return (\n    <div className=\"HypeCycle__years\">\n      <button className=\"HypeCycle__years__toggle\" onClick={() => setIsPlaying(!isPlaying)}>\n        <Icon name={isPlaying ? \"pause\" : \"play\"} />\n      </button>\n      {years.map((year, i) => (\n        <button className={`HypeCycle__years__item HypeCycle__years__item--is-${i == yearIndex ? \"selected\" : \"unselected\"}`} key={year} onClick={() => {\n          setYearIndex(i)\n          setIsPlaying(false)\n        }}>\n          <div className=\"HypeCycle__years__item__text\">\n            { year }\n          </div>\n        </button>\n      ))}\n    </div>\n  )\n})\n\nconst Categories = ({ data, yearIndex, showingCategories, setShowingCategories }) => {\n  const counts = useMemo(() => (\n    countBy(data.filter(d => (\n      d[\"pointIndex\"][yearIndex] > 0 && d[\"pointIndex\"][yearIndex] < 100\n    )), \"category\")\n  ), [data, yearIndex])\n\n  const sortedCategories = useMemo(() => (\n    [...categories].sort((a,b) => counts[b] ? counts[b] > counts[a] ? 2 : 1 : b > a ? -100 : -50)\n  ), [counts])\n\n  return (\n    <div className=\"HypeCycle__categories\">\n      <FlipMove>\n        {sortedCategories.map(category => (\n          <div className={`HypeCycle__categories__item HypeCycle__categories__item--is-${showingCategories.includes(category) ? \"showing\" : \"not-showing\"} HypeCycle__categories__item--is-${counts[category] ? \"visible\" : \"not-visible\"}`} key={category} style={{\n            color: categoryColors[category]\n          }} onClick={() => {\n            const isShowing = showingCategories.includes(category)\n            if (!isShowing || showingCategories.length > 1) {\n              setShowingCategories([category])\n            } else {\n              setShowingCategories(categories)\n            }\n          }}>\n            { category }\n            <div className=\"HypeCycle__categories__item__count\">\n              { counts[category] }\n            </div>\n          </div>\n        ))}\n      </FlipMove>\n    </div>\n  )\n}","import * as THREE from 'three'\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nlet OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.LEFT, MIDDLE: THREE.MOUSE.MIDDLE, RIGHT: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t// console.log( 'handleKeyDown' );\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.MIDDLE:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.RIGHT:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\nObject.defineProperties( OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nexport default OrbitControls"],"sourceRoot":""}