{"version":3,"sources":["components/Articles/WebGLDemo/lady.jpg","components/Articles/WebGLDemo/lady-map.jpg","components/Articles/WebGLDemo/mount.jpg","components/Articles/WebGLDemo/mount-map.jpg","components/Articles/WebGLDemo/canyon.jpg","components/Articles/WebGLDemo/canyon-map.jpg","components/Articles/WebGLDemo/ball.jpg","components/Articles/WebGLDemo/ball-map.jpg","components/Articles/WebGLDemo/WebGLDemo.jsx","components/_ui/Button/ButtonGroup/ButtonGroup.jsx","components/_ui/Toggle/Toggle.jsx"],"names":["module","exports","__webpack_require__","p","WebGLDemo","_useState","useState","_useState2","Object","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","mouse","setMouse","_useState3","_useState4","selectedOption","setSelectedOption","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","className","components_ui_Toggle_Toggle__WEBPACK_IMPORTED_MODULE_14__","value","options","onChange","onMouseMove","_ref","x","clientX","y","clientY","window","innerWidth","innerHeight","Scene","text","_ref2","props","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react_three_fiber__WEBPACK_IMPORTED_MODULE_3__","MainImage","planeGeomArgs","scale","_ref3","invalidate","useThree","_useSpring","useSpring","dispX","dispY","args","useMemo","loader","THREE","option","uniforms","texture","type","load","image","map","imageMap","threshold","horizontalThreshold","verticalThreshold","vertexShader","fragmentShader","attach","react_spring_three__WEBPACK_IMPORTED_MODULE_4__","shaderMaterial","uniforms-dispX-value","uniforms-dispY-value","id","label","image1","imageMap1","image2","imageMap2","image3","imageMap3","image4","imageMap4","require","ButtonGroup","button","e","_this","classNames","this","Button--active","isActive","Button--inactive","_this2","buttons","react__WEBPACK_IMPORTED_MODULE_4___default","getClassName","idx","_Button__WEBPACK_IMPORTED_MODULE_6__","key","getButtonClassName","disabled","isDisabled","onClick","children","Component","Toggle","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","_Button_ButtonGroup_ButtonGroup__WEBPACK_IMPORTED_MODULE_5__","assign"],"mappings":"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","file":"static/js/37.818bdb33.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lady.c70469b2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/lady-map.c28f9f62.jpg\";","module.exports = __webpack_public_path__ + \"static/media/mount.f9426562.jpg\";","module.exports = __webpack_public_path__ + \"static/media/mount-map.76f6b860.jpg\";","module.exports = __webpack_public_path__ + \"static/media/canyon.9e8b58c6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/canyon-map.46719416.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ball.bda31e39.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ball-map.86abc128.jpg\";","import React, { useState, useMemo } from \"react\"\nimport { extend, Canvas, useThree } from 'react-three-fiber'\nimport { useSpring, a } from 'react-spring/three'\nimport * as THREE from 'three'\nimport image1 from \"./lady.jpg\"\nimport imageMap1 from \"./lady-map.jpg\"\nimport image2 from \"./mount.jpg\"\nimport imageMap2 from \"./mount-map.jpg\"\nimport image3 from \"./canyon.jpg\"\nimport imageMap3 from \"./canyon-map.jpg\"\nimport image4 from \"./ball.jpg\"\nimport imageMap4 from \"./ball-map.jpg\"\nimport Toggle from \"components/_ui/Toggle/Toggle\";\n\nimport './WebGLDemo.scss';\n\nconst aspectRatio = 781 / 1173\nconst WebGLDemo = () => {\n  const [mouse, setMouse] = useState([0, 0])\n  const [selectedOption, setSelectedOption] = useState(0)\n\n  const onMouseMove = ({ clientX: x, clientY: y }) => {\n    setMouse([\n      x / window.innerWidth,\n      y / window.innerHeight,\n    ])\n  }\n\n  return (\n    <div className=\"WebGLDemo\">\n      <Toggle\n        className=\"WebGLDemo__toggles\"\n        value={selectedOption}\n        options={options}\n        onChange={setSelectedOption}\n      />\n\n      <div className=\"WebGLDemo__scene\" onMouseMove={onMouseMove}>\n        <Scene {...{mouse, selectedOption}} />\n\n        <div className=\"WebGLDemo__overlay\">\n            { options[selectedOption].text }\n        </div>\n      </div>\n\n    </div>\n  )\n}\n\nexport default WebGLDemo\n\nconst Scene = ({ mouse, selectedOption, ...props }) => (\n  <Canvas {...props}>\n    <MainImage {...{mouse, selectedOption}} />\n  </Canvas>\n)\n\nconst planeGeomArgs = [8, 8]\nconst scale = [1, aspectRatio, 1]\nconst MainImage = ({ mouse, selectedOption }) => {\n  const { invalidate } = useThree()\n\n  const { dispX, dispY } = useSpring({\n    dispX: mouse[0],\n    dispY: mouse[1],\n  })\n\n  const args = useMemo(() => {\n    const loader = new THREE.TextureLoader()\n\n    const option = options[selectedOption]\n\n    return [{\n      uniforms: {\n        texture: { type: 't', value: loader.load(option.image, invalidate) },\n        map: { type: 't', value: loader.load(option.imageMap, invalidate) },\n        threshold: {type: '2f', value: [\n          option.horizontalThreshold,\n          option.verticalThreshold,\n        ] },\n        dispX: { type: 'f', value: 0 },\n        dispY: { type: 'f', value: 0 },\n      },\n      vertexShader,\n      fragmentShader\n    }]\n  }, [selectedOption, invalidate])\n\n  return (\n    <mesh scale={scale}>\n      <planeBufferGeometry attach=\"geometry\" args={planeGeomArgs} />\n      <a.shaderMaterial\n        attach=\"material\"\n        args={args}\n        uniforms-dispX-value={dispX}\n        uniforms-dispY-value={dispY}\n    />\n    </mesh>\n  )\n}\n\nconst vertexShader = `\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  `\n\nconst fragmentShader = `\n  #ifdef GL_ES\n  precision mediump float;\n  #endif\n\n  varying vec2 vUv;\n  uniform vec2 threshold;\n  uniform sampler2D texture;\n  uniform sampler2D map;\n  uniform float dispX;\n  uniform float dispY;\n  uniform float _rot;\n\n  vec2 mirrored(vec2 v) {\n    vec2 m = mod(v, 2.);\n    return mix(m, 2.0 - m, step(1.0, m));\n  }\n  void main() {\n    vec4 tex1 = texture2D(map, mirrored(vUv));\n    vec2 fake3d = vec2(vUv.x + (tex1.r - 0.5) * dispX / threshold.x, vUv.y + (tex1.r - 0.5) * dispY / threshold.y);\n    gl_FragColor = texture2D(texture, mirrored(fake3d));\n  }\n`\n\n\nconst options = [\n  {id: 0, label: \"Lady\", image: image1, imageMap: imageMap1, horizontalThreshold: 35, verticalThreshold: 15, text: \"QO\" },\n  {id: 1, label: \"Mountain\", image: image2, imageMap: imageMap2, horizontalThreshold: 15, verticalThreshold: 25, text: \"W\" },\n  {id: 2, label: \"Canyon\", image: image3, imageMap: imageMap3, horizontalThreshold: 35, verticalThreshold: 25, text: \"S\" },\n  {id: 3, label: \"Ball\", image: image4, imageMap: imageMap4, horizontalThreshold: 15, verticalThreshold: 25, text: \"BALL\" },\n]","import React, {Component} from \"react\"\nimport PropTypes from \"prop-types\"\nimport classNames from \"classnames\"\nimport Button from \"./../Button\"\n\nrequire('./ButtonGroup.scss')\n\nclass ButtonGroup extends Component {\n  static propTypes = {\n    buttons: PropTypes.array,\n    onChange: PropTypes.func\n  }\n\n  getClassName() {\n    return classNames(\n      \"ButtonGroup\", this.props.className\n    )\n  }\n\n  getButtonClassName(button) {\n    return classNames(button.className, {\n      \"Button--active\": button.isActive,\n      \"Button--inactive\": !button.isActive,\n    })\n  }\n\n  onChange = button => e => {\n    this.props.onChange(button, e)\n  }\n\n  render() {\n    let {buttons} = this.props\n\n    return (\n      <div className={this.getClassName()}>\n        {buttons.map((button, idx) =>\n          <Button type=\"button\"\n                  key={idx}\n                  className={this.getButtonClassName(button)}\n                  disabled={button.isDisabled}\n                  onClick={this.onChange(button)}>\n            {button.label || button}\n            {button.children}\n          </Button>\n        )}\n      </div>\n      )\n  }\n}\n\nexport default ButtonGroup\n","import React from 'react'\nimport _ from \"lodash\"\n\nimport './Toggle.scss'\nimport ButtonGroup from '../Button/ButtonGroup/ButtonGroup';\nimport Button from '../Button/Button';\n\nconst Toggle = ({ options, value, onChange, ...props }) => {\n    const onChangeLocal = button => onChange(button.id)\n\n    const buttons = options.map(option => ({\n        ...option,\n        isActive: option.id == value,\n    }))\n\n    return (\n        <ButtonGroup {...props}\n            buttons={buttons}\n            onChange={onChangeLocal}\n        />\n    )\n}\n\nexport default Toggle\n"],"sourceRoot":""}