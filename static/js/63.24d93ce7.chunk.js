(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1314:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(651),i=t(46),c=(t(617),t(641)),s=t(12),o=t(33),m=t(51),d=t(24);t(655),t(258);a.default=function(e){var a=e.onScrollToSectionLocal;return l.a.createElement("div",{className:"LearnChangeData"},l.a.createElement("p",null,"Now that we've grabbed our data, we need to cajole it into a format that we can work with. ",l.a.createElement("b",null,"d3")," has a module that comes in very handy when transforming and querying data:"),l.a.createElement("h3",null,"d3-array"),l.a.createElement("p",null,"Let's start by talking about ",l.a.createElement("i",null,"what ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-array"},l.a.createElement("b",null,"d3-array"))," doesn't cover"),":"),l.a.createElement(m.a,{icon:l.a.createElement(o.a,{style:{color:"#e6672d"},className:"List__item__icon",name:"x"}),items:[l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Expensive data manipulation"),l.a.createElement("p",null,"This should really happen before we access data on our website, since long-running tasks can slow down our users' devices (especially if they're using an older phone)")),l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Native Javascript methods"),l.a.createElement("p",null,"Vanilla Javascript is pretty powerful these days - there are many methods already available in browsers that can help with transforming data. ",l.a.createElement(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#instance_methods"},"Here is a full list of Array methods.")),l.a.createElement("p",null,"Some of these methods were covered in ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-collection"},l.a.createElement("b",null,"d3-collection")),", which is now deprecated because we don't need a special library anymore!  ",l.a.createElement(r.Twemoji,{svg:!0,text:":confetti_ball:"})))]}),l.a.createElement("p",null,"So what ",l.a.createElement("i",null,"can")," we do with ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-array"},l.a.createElement("b",null,"d3-array")),"?"),l.a.createElement("h5",null,"Basic statistics"),l.a.createElement("p",null,"There are 11 methods in ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-array"},l.a.createElement("b",null,"d3-array"))," that help answer basic questions about a dataset."),l.a.createElement("p",null,"The methods that probably get the most use are the ones that will find the highest and lowest value (",l.a.createElement(u,null,"d3.max()")," / ",l.a.createElement(u,null,"d3.min()"),"), and the method that returns the extremes (",l.a.createElement(u,null,"d3.extent()"),"). These come in handy when creating a ",l.a.createElement("b",null,"scale")," (which we cover in the ",l.a.createElement(s.a,{to:"#converting-between-data-domains",onClick:a("converting-between-data-domains")},"Modules for converting between data domains")," section)."),l.a.createElement("p",null,"There are also methods for finding other statistics, like ",l.a.createElement(u,null,"d3.mean()"),", ",l.a.createElement(u,null,"d3.median()"),", ",l.a.createElement(u,null,"d3.quantile()"),", ",l.a.createElement(u,null,"d3.variance()"),", and ",l.a.createElement(u,null,"d3.deviation()"),"."),l.a.createElement("p",null,"To use any of these methods, we want to call it with two parameters:"),l.a.createElement(m.a,{items:[l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"our dataset"),l.a.createElement("p",null,"The first parameter needs to be an array containing the values we're interested in")),l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"an accessor function")," (optional)",l.a.createElement("p",null,"The second parameter will tell ",l.a.createElement("b",null,"d3")," ",l.a.createElement("i",null,"how to find a value within one data point"),". This defaults to an identity function (",l.a.createElement(u,null,"d => d"),"), which means that this parameter is unnecessary if our ",l.a.createElement("b",null,"dataset")," is an array of values."))],hasNumbers:!0}),l.a.createElement("p",null,"For example, let's find the ",l.a.createElement("b",null,"mean")," of this list of temperatures:"),l.a.createElement(d.a,{canEval:!0,fileName:l.a.createElement(l.a.Fragment,null,"In your browser\u2019s Dev Tools ",l.a.createElement("b",null,"Console")," tab")},'const dataset = [{\n    date: "2019-10-10",\n    temp: 10,\n},{\n    date: "2019-10-11",\n    temp: 12,\n}]\n\nconst mean = d3.mean(dataset, d => d.temp)\nalert(mean)'),l.a.createElement("h5",null,"Questions about order"),l.a.createElement("p",null,l.a.createElement("b",null,"d3-array")," can also help with finding specific items in an array in two main ways:"),l.a.createElement(m.a,{items:[l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Find the item with the smallest value."),l.a.createElement("p",null,l.a.createElement(h,{id:"least"})," will return the item and ",l.a.createElement(h,{id:"leastIndex"})," will return the item's index.")),l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Find the item ",l.a.createElement("i",null,"nearest to")," a specific value."),l.a.createElement("p",null,l.a.createElement(h,{id:"bisect"})," will take a sorted array and a value and return the ",l.a.createElement("i",null,"index at which the value would fit"),"."),l.a.createElement("p",null,"For example, we can find where the number ",l.a.createElement(u,null,"12")," would fit in this array:"),l.a.createElement(d.a,{canEval:!0,fileName:l.a.createElement(l.a.Fragment,null,"In your browser\u2019s Dev Tools ",l.a.createElement("b",null,"Console")," tab")},"const array = [10, 20, 30, 40, 50, 60]\nconst nearestValueIndex = d3.bisect(array, 12)\nalert(nearestValueIndex) // is 1\n// compiled array: [10, 12, 20, 30...]"),l.a.createElement("p",null,"There are a few similar ",l.a.createElement("b",null,"bisect")," functions for things like using an accessor or comparator function (",l.a.createElement(h,{id:"bisector"}),") or specifying whether you want the index to be lower than (",l.a.createElement(h,{id:"bisectLeft"}),") or higher than (",l.a.createElement(h,{id:"bisectRight"}),") existing matching values."),l.a.createElement(i.a,{icon:"tooltip"},l.a.createElement(o.a,{className:"Aside__icon",name:"asterisk",size:"l",style:{top:"1.16em",left:"-0.13em",strokeWidth:0,fill:"#bdbdcf"}}),"These ",l.a.createElement("b",null,"bisector")," functions are very handy when creating tooltips - finding the closest point to the user's cursor is a great way to make a chart easy to interact with."),l.a.createElement("p",null,"There are also two handy comparator functions that you can use: ",l.a.createElement(h,{id:"ascending"})," and  ",l.a.createElement(h,{id:"descending"})))]}),l.a.createElement("h5",null,"Transformations"),l.a.createElement("p",null,"There are a handful of ",l.a.createElement("b",null,"d3-array")," functions that would look at home in a utility library like ",l.a.createElement(s.a,{href:"https://lodash.com/"},"Lodash"),". These allow you to do things like:"),l.a.createElement(m.a,{items:[l.a.createElement(l.a.Fragment,null,"Group a list of objects by a specific key: ",l.a.createElement(h,{id:"group"})," returned the grouped objects and ",l.a.createElement(h,{id:"rollup"})," returned the grouped indices"),l.a.createElement(l.a.Fragment,null,"Create a list of permutations of two arrays: ",l.a.createElement(h,{id:"cross"})),l.a.createElement(l.a.Fragment,null,"Create a new array by pulling items at specific indices or keys: ",l.a.createElement(h,{id:"permute"})),l.a.createElement(l.a.Fragment,null,"Shuffle the items of array: ",l.a.createElement(h,{id:"shuffle"})),l.a.createElement(l.a.Fragment,null,"Create an array counting between two numbers: ",l.a.createElement(h,{id:"range"})),l.a.createElement(l.a.Fragment,null,"Zip two arrays: ",l.a.createElement(h,{id:"zip"}))]}),l.a.createElement(i.a,null,l.a.createElement("b",null,"Note that some of these methods aren't yet available in the core d3 package."),l.a.createElement(c.a,{description:"new packages"},l.a.createElement(h,{id:"quickselect"}),", ",l.a.createElement(h,{id:"group"}),", ",l.a.createElement(h,{id:"rollup"}),", ",l.a.createElement(h,{id:"bin"}),", ",l.a.createElement(h,{id:"count"}),", ",l.a.createElement(h,{id:"minIndex"}),", ",l.a.createElement(h,{id:"maxIndex"}),", ",l.a.createElement(h,{id:"least"}),", ",l.a.createElement(h,{id:"leastIndex"}),", ",l.a.createElement(h,{id:"groups"}),", ",l.a.createElement(h,{id:"rollups"})),l.a.createElement("p",null,"To check this yourself, the module versions are in ",l.a.createElement(s.a,{href:"https://github.com/d3/d3/blob/master/package.json#L42-L72"},"the main d3 packages.json file")," and the Changelog for a module is in ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-array/releases"},"its Releases list"),"."),l.a.createElement("p",null,"In order to use these new methods, make sure that you're importing ",l.a.createElement("b",null,"d3-array"),", version 2+.")),l.a.createElement("h5",null,"Binning"),l.a.createElement("p",null,"There is also ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-array#bins"},"a group of ",l.a.createElement("b",null,"d3-array")," methods")," that will chunk a dataset into bins. This is really helpful for creating bucketed charts like ",l.a.createElement(s.a,{href:"https://en.wikipedia.org/wiki/Histogram"},"histograms"),"."),l.a.createElement("h3",null,"d3-random"),l.a.createElement("p",null,"Sometimes data visualization requires random numbers - like when you need to generate test data. I've also used random numbers to add jitter to help space out points on a chart -- helpful as long as it's clear that the jitter doesn't represent any data!"),l.a.createElement("p",null,"Our browsers have a built-in ",l.a.createElement(u,null,"Math.random()")," function, which is good for simple use-cases. But what if you want your random data to have structure?"),l.a.createElement("p",null,l.a.createElement("b",null,"d3-random")," lets you create random numbers with specific distributions. For example, the normal distribution (",l.a.createElement(s.a,{href:"https://github.com/d3/d3-random#randomNormal"},l.a.createElement(u,null,"d3.randomNormal()")),") is helpful for generating numbers that are ",l.a.createElement("b",null,"normally distributed")," around a specific value."),l.a.createElement("p",null,"For example, this abandoned prototype is using ",l.a.createElement(u,null,"d3.randomNormal()"),' to space out moving "dashes" so that they are mostly grouped around a single vector, but some are further out to make the traffic a bit easier to parse.'),l.a.createElement("video",{autoplay:"",loop:!0,muted:!0,style:{width:"20em",maxWidth:"100%"}},l.a.createElement("source",{src:"https://video.twimg.com/tweet_video/D6vJcd7XsAAus4b.mp4",type:"video/mp4"})),l.a.createElement("h3",null,"Others?"),l.a.createElement("p",null,"These modules are explicitly devoted to creating/manipulating data, but there are also specific methods in other modules that are catered towards a specific type of visualization."),l.a.createElement("p",null,"For example, ",l.a.createElement(s.a,{href:"https://github.com/d3/d3-hierarchy"},l.a.createElement("b",null,"d3-hierarchy"))," has a method (",l.a.createElement(u,null,"d3.hierarchy()"),") that will convert data into a specific nested structure that it can then visualize."),l.a.createElement("p",null,"We'll talk more about these use-case driven data manipulation functions in the ",l.a.createElement(s.a,{to:"#specific-visualizations",onClick:a("specific-visualizations")},"Modules for specific visualizations")," section."))};var u=function(e){var a=e.children;return l.a.createElement("code",{className:"P"},a)},h=function(e){var a=e.id;return l.a.createElement(s.a,{href:"https://github.com/d3/d3-array#".concat(a)},l.a.createElement(u,null,"d3.",a,"()"))}},617:function(e,a,t){"use strict";var n=t(6),l=t(34),r=t(0),i=t.n(r),c=t(33),s=t(147);t(129),t(619);a.a=function(e){var a=e.trigger,t=e.triggerExpandText,o=(e.doHideIfCollapsed,e.className),m=e.children,d=Object(l.a)(e,["trigger","triggerExpandText","doHideIfCollapsed","className","children"]),u=Object(r.useState)(!1),h=Object(n.a)(u,2),E=h[0],p=h[1],g=Object(r.useRef)();return i.a.createElement("details",Object.assign({className:"Expandy Expandy--is-".concat(E?"expanded":"collapsed"," ").concat(o)},d,{ref:g,onToggle:function(e){var a=e.target.open;p(a)}}),i.a.createElement("summary",null,i.a.createElement("div",{className:"Expandy__trigger button-no-appearance"},i.a.createElement("div",{className:"Expandy__trigger__text"},i.a.createElement("b",null,a),i.a.createElement("div",{className:"Expandy__trigger__info"},t||"tap me ".concat(E?"to hide":"for more"," details"))),i.a.createElement("div",{className:"Expandy__trigger__mark"},"\u1f30")),i.a.createElement(s.a,{className:"Expandy__toggle",contents:i.a.createElement("button",{className:"button-no-appearance"},E?"Collapse me":"Expand me")},i.a.createElement("div",{className:"Expandy__toggle__arrow Expandy__toggle__arrow--up"},i.a.createElement(c.a,{name:"arrow",direction:"n",size:"s"})),i.a.createElement("div",{className:"Expandy__toggle__arrow Expandy__toggle__arrow--down"},i.a.createElement(c.a,{name:"arrow",direction:"s",size:"s"})))),i.a.createElement("div",{className:"Expandy__contents"},m))}},619:function(e,a,t){},641:function(e,a,t){"use strict";var n=t(6),l=t(34),r=t(0),i=t.n(r);t(33),t(642);a.a=function(e){var a=e.description,t=e.className,c=e.children,s=Object(l.a)(e,["description","className","children"]),o=Object(r.useState)(!1),m=Object(n.a)(o,2),d=m[0],u=m[1];return i.a.createElement("div",Object.assign({className:"InlineExpandy InlineExpandy--is-".concat(d?"expanded":"collapsed"," ").concat(t)},s),i.a.createElement("div",{className:"InlineExpandy__trigger",onClick:function(){u(!d)}},d?"Hide":"Show"," ",a,"..."),d&&i.a.createElement("div",{className:"InlineExpandy__contents"},c))}},642:function(e,a,t){}}]);
//# sourceMappingURL=63.24d93ce7.chunk.js.map