(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1092:function(e,t,r){e.exports=r.p+"25fd7aa1a88466c6560f386ec0a6a49c.csv"},1093:function(e,t,r){},1094:function(e,t,r){"use strict";(function(e){function n(){var e,t=0,r=[],a=0,o=0;var i=h(function(e){o||c(1,e)}),s=h(function(e){o||c(-1,e)});function c(r,n){o++;var a=0;try{n===m&&p();var i=r>0&&d(n);i?i.call(n,h(function(e){a++,c(1,e)}),h(function(e){a++,c(-1,e)})):(t=r,e=n,u())}catch(s){t||a||c(-1,s)}}function u(){a||(setTimeout(l,0),a=1)}function l(){var e=r;a=0,r=[],e.forEach(f)}function f(e){e()}function d(e){var t=e&&(v(e)||"object"===typeof e)&&e.then;return v(t)&&t}function h(e){var t=0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];t++||e.apply(this,r)}}function p(){throw new TypeError("Chaining cycle detected")}var v=function(e){return"function"===typeof e},m={then:function(a,o){var i=n();return r.push(function(){var r=t>0?a:o;if(v(r))try{var n=r(e);n===i&&p();var s=d(n);s?s.call(n,i.resolve,i.reject):i.resolve(n)}catch(c){i.reject(c)}else i[t>0?"resolve":"reject"](e)}),t&&u(),i},resolve:i,reject:s};return m}function a(){var e,t,r=new Promise(function(r,n){e=r,t=n});return{then:r.then.bind(r),resolve:e,reject:t}}r.d(t,"a",function(){return m}),r.d(t,"b",function(){return h}),n.all=a.all=function(e){var t=0,r=[],n=o();return 0===e.length?n.resolve([]):e.forEach(function(a,i){var s=o();s.resolve(a),s.then(function(a){t++,r[i]=a,t===e.length&&n.resolve(r)},n.reject)}),n};var o="function"===typeof Promise?a:n;function i(){var e=Object.create(null);function t(e,t){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(a){console.error(a)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",function(r){var n=r.data,a=n.messageId,o=n.action,i=n.data;try{"registerModule"===o&&function r(n,a){var o=n.id,i=n.name,s=n.dependencies;void 0===s&&(s=[]);var c=n.init;void 0===c&&(c=function(){});var u=n.getTransferables;if(void 0===u&&(u=null),!e[o])try{s=s.map(function(t){return t&&t.isWorkerModule&&(r(t,function(e){if(e instanceof Error)throw e}),t=e[t.id].value),t}),c=t("<"+i+">.init",c),u&&(u=t("<"+i+">.getTransferables",u));var l=null;"function"===typeof c?l=c.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:l,getTransferables:u},a(l)}catch(f){f&&f.noLog||console.error(f),a(f)}}(i,function(e){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:{isCallable:"function"===typeof e}})}),"callModule"===o&&function(t,r){var n,a=t.id,o=t.args;e[a]&&"function"===typeof e[a].value||r(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var i=(n=e[a]).value.apply(n,o);i&&"function"===typeof i.then?i.then(s,function(e){return r(e instanceof Error?e:new Error(""+e))}):s(i)}catch(c){r(c)}function s(t){try{var n=e[a].getTransferables&&e[a].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),r(t,n)}catch(c){console.error(c),r(c)}}}(i,function(e,t){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:e},t||void 0)})}catch(s){postMessage({messageId:a,success:!1,error:s.stack})}})}var s=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return s=function(){return e},e},c=0,u=0,l=!1,f=Object.create(null),d=function(){var e=Object.create(null);return e._count=0,e}();function h(e){if((!e||"function"!==typeof e.init)&&!l)throw new Error("requires `options.init` function");var t=e.dependencies,r=e.init,n=e.getTransferables,a=e.workerId;if(!s())return function(e){var t=function e(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(e){if("function"===typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var r=e.dependencies,n=e.init;r=Array.isArray(r)?r.map(function(e){return e&&e._getInitResult?e._getInitResult():e}):[];var a=o.all(r).then(function(e){return n.apply(null,e)});return t._getInitResult=function(){return a},a},t}(e);null==a&&(a="#default");var i="workerModule"+ ++c,u=e.name||i,f=null;function d(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return f||(f=v(a,"registerModule",d.workerModuleData)),f.then(function(t){if(t.isCallable)return v(a,"callModule",{id:i,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")})}return t=t&&t.map(function(e){return"function"!==typeof e||e.workerModuleData||(l=!0,e=h({workerId:a,name:"<"+u+"> function dependency: "+e.name,init:"function(){return (\n"+p(e)+"\n)}"}),l=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e}),d.workerModuleData={isWorkerModule:!0,id:i,name:u,dependencies:t,init:p(r),getTransferables:n&&p(n)},d}function p(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function v(e,t,r){var n=o(),a=++u;return d[a]=function(e){e.success?n.resolve(e.result):n.reject(new Error("Error in worker "+t+" call: "+e.error))},d._count++,d.count>1e3&&console.warn("Large number of open WorkerModule requests, some may not be returning"),function(e){var t=f[e];if(!t){var r=p(i);(t=f[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,n=d[r];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete d[r],d.count--,n(t)}}return t}(e).postMessage({messageId:a,action:t,data:r}),n}var m=h({name:"Thenable",dependencies:[o],init:function(e){return e}})}).call(this,r(369))},1333:function(e,t,r){"use strict";r.r(t);var n=r(34),a=r(22),o=r.n(a),i=r(261),s=r(7),c=r(257),u=r(6),l=r(0),f=r.n(l),d=r(694),h=r(1331),p=r(113),v=r(53),m=r(17),g=r(13),y=r(41),b=r(42),S=r(623),U=r(1094),x=(r(75),/\bvoid\s+main\s*\(\s*\)\s*{/g);function w(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){var r=S.ShaderChunk[t];return r?w(r):e})}var _=Object.assign||function(){for(var e=arguments[0],t=1,r=arguments.length;t<r;t++){var n=arguments[t];if(n)for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])}return e},T=Date.now(),k=new WeakMap,C=new Map,O=1e10;function F(e,t){var r=function(e){var t=JSON.stringify(e,E),r=P.get(t);null==r&&P.set(t,r=++M);return r}(t),n=k.get(e);if(n||k.set(e,n=Object.create(null)),n[r])return new n[r];var a="_onBeforeCompile".concat(r),o=function(n){e.onBeforeCompile.call(this,n);var o=r+"|||"+n.vertexShader+"|||"+n.fragmentShader,i=C[o];if(!i){var s=function(e,t,r){var n=e.vertexShader,a=e.fragmentShader,o=t.vertexDefs,i=t.vertexMainIntro,s=t.vertexMainOutro,c=t.vertexTransform,u=t.fragmentDefs,l=t.fragmentMainIntro,f=t.fragmentMainOutro,d=t.fragmentColorTransform,h=t.customRewriter,p=t.timeUniform;o=o||"",i=i||"",s=s||"",u=u||"",l=l||"",f=f||"",(c||h)&&(n=w(n));(d||h)&&(a=w(a=a.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(h){var v=h({vertexShader:n,fragmentShader:a});n=v.vertexShader,a=v.fragmentShader}if(d){var m=[];a=a.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,function(e){return m.push(e),""}),f="".concat(d,"\n").concat(m.join("\n"),"\n").concat(f)}if(p){var g="\nuniform float ".concat(p,";\n");o=g+o,u=g+u}c&&(o="".concat(o,"\nvec3 troika_position_").concat(r,";\nvec3 troika_normal_").concat(r,";\nvec2 troika_uv_").concat(r,";\nvoid troikaVertexTransform").concat(r,"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(c,"\n}\n"),i="\ntroika_position_".concat(r," = vec3(position);\ntroika_normal_").concat(r," = vec3(normal);\ntroika_uv_").concat(r," = vec2(uv);\ntroikaVertexTransform").concat(r,"(troika_position_").concat(r,", troika_normal_").concat(r,", troika_uv_").concat(r,");\n").concat(i,"\n"),n=n.replace(/\b(position|normal|uv)\b/g,function(e,t,n,a){return/\battribute\s+vec[23]\s+$/.test(a.substr(0,n))?t:"troika_".concat(t,"_").concat(r)}));return n=D(n,r,o,i,s),a=D(a,r,u,l,f),{vertexShader:n,fragmentShader:a}}(n,t,r);i=C[o]=s}n.vertexShader=i.vertexShader,n.fragmentShader=i.fragmentShader,_(n.uniforms,this.uniforms),t.timeUniform&&(n.uniforms[t.timeUniform]={get value(){return Date.now()-T}}),this[a]&&this[a](n)},i=function(){return s(t.chained?e:e.clone())},s=function(n){var a=Object.create(n,c);return Object.defineProperty(a,"baseMaterial",{value:e}),Object.defineProperty(a,"id",{value:O++}),a.uuid=S.MathUtils.generateUUID(),a.uniforms=_({},n.uniforms,t.uniforms),a.defines=_({},n.defines,t.defines),a.defines["TROIKA_DERIVED_MATERIAL_".concat(r)]="",a.extensions=_({},n.extensions,t.extensions),a._listeners=void 0,a},c={constructor:{value:i},isDerivedMaterial:{value:!0},customProgramCacheKey:{value:function(){return r}},onBeforeCompile:{get:function(){return o},set:function(e){this[a]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(_(this.extensions,t.extensions),_(this.defines,t.defines),_(this.uniforms,S.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){var t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){var r=this._depthMaterial;return r||((r=this._depthMaterial=F(e.isDerivedMaterial?e.getDepthMaterial():new S.MeshDepthMaterial({depthPacking:S.RGBADepthPacking}),t)).defines.IS_DEPTH_MATERIAL="",r.uniforms=this.uniforms),r}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){var r=this._distanceMaterial;return r||((r=this._distanceMaterial=F(e.isDerivedMaterial?e.getDistanceMaterial():new S.MeshDistanceMaterial,t)).defines.IS_DISTANCE_MATERIAL="",r.uniforms=this.uniforms),r}},dispose:{writable:!0,configurable:!0,value:function(){var t=this._depthMaterial,r=this._distanceMaterial;t&&t.dispose(),r&&r.dispose(),e.dispose.call(this)}}};return n[r]=i,new i}function D(e,t,r,n,a){return(n||a||r)&&(e=e.replace(x,"\n".concat(r,"\nvoid troikaOrigMain").concat(t,"() {")),e+="\nvoid main() {\n  ".concat(n,"\n  troikaOrigMain").concat(t,"();\n  ").concat(a,"\n}")),e}function E(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}var M=0,P=new Map;var I="\nuniform vec3 pointA;\nuniform vec3 controlA;\nuniform vec3 controlB;\nuniform vec3 pointB;\nuniform float radius;\nvarying float bezierT;\n\nvec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  float b0 = t2 * t2 * t2;\n  float b1 = 3.0 * t * t2 * t2;\n  float b2 = 3.0 * t * t * t2;\n  float b3 = t * t * t;\n  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;\n}\n\nvec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  return -3.0 * p1 * t2 * t2 +\n    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +\n    c2 * (6.0 * t2 * t - 3.0 * t * t) +\n    3.0 * p2 * t * t;\n}\n",A='\nfloat t = position.y;\nbezierT = t;\nvec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);\nvec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));\n\n// Make "sideways" always perpendicular to the camera ray; this ensures that any twists\n// in the cylinder occur where you won\'t see them: \nvec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);\nif (bezierDir == viewDirection) {\n  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));\n}\nvec3 sideways = normalize(cross(bezierDir, viewDirection));\nvec3 upish = normalize(cross(sideways, bezierDir));\n\n// Build a matrix for transforming this disc in the cylinder:\nmat4 discTx;\ndiscTx[0].xyz = sideways * radius;\ndiscTx[1].xyz = bezierDir * radius;\ndiscTx[2].xyz = upish * radius;\ndiscTx[3].xyz = bezierCenterPos;\ndiscTx[3][3] = 1.0;\n\n// Apply transform, ignoring original y\nposition = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;\nnormal = normalize(mat3(discTx) * normal);\n',G="\nuniform vec3 dashing;\nvarying float bezierT;\n",j="\nif (dashing.x + dashing.y > 0.0) {\n  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);\n  if (dashFrac > dashing.x) {\n    discard;\n  }\n}\n";var B=null,L=new S.MeshStandardMaterial({color:16777215,side:S.DoubleSide});S.Mesh;var R=Object(U.b)({name:"Typr Font Parser",dependencies:[function(){var e=self,t={parse:function(e){var r=t._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var a=4;r.readUshort(n,a),a+=2,r.readUshort(n,a),a+=2;var o=r.readUint(n,a);a+=4;for(var i=[],s=0;s<o;s++){var c=r.readUint(n,a);a+=4,i.push(t._readFont(n,c))}return i}return[t._readFont(n,0)]},_readFont:function(e,r){var n=t._bin,a=r;n.readFixed(e,r),r+=4;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:a},c={},u=0;u<o;u++){var l=n.readASCII(e,r,4);r+=4,n.readUint(e,r),r+=4;var f=n.readUint(e,r);r+=4;var d=n.readUint(e,r);r+=4,c[l]={offset:f,length:d}}for(u=0;u<i.length;u++){var h=i[u];c[h]&&(s[h.trim()]=t[h.trim()].parse(e,c[h].offset,c[h].length,s))}return s},_tabOffset:function(e,r,n){for(var a=t._bin,o=a.readUshort(e,n+4),i=n+12,s=0;s<o;s++){var c=a.readASCII(e,i,4);i+=4,a.readUint(e,i),i+=4;var u=a.readUint(e,i);if(i+=4,a.readUint(e,i),i+=4,c==r)return u}return 0}};return t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){var n=t._bin.t.uint8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r],t._bin.t.int32[0]},readInt8:function(e,r){return t._bin.t.uint8[0]=e[r],t._bin.t.int8[0]},readShort:function(e,r){var n=t._bin.t.uint8;return n[1]=e[r],n[0]=e[r+1],t._bin.t.int16[0]},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUshorts:function(e,r,n){for(var a=[],o=0;o<n;o++)a.push(t._bin.readUshort(e,r+2*o));return a},readUint:function(e,r){var n=t._bin.t.uint8;return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t._bin.t.uint32[0]},readUint64:function(e,r){return 4294967296*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var n="",a=0;a<r;a++)n+=String.fromCharCode(e[t+a]);return n},readUnicode:function(e,t,r){for(var n="",a=0;a<r;a++){var o=e[t++]<<8|e[t++];n+=String.fromCharCode(o)}return n},_tdec:e.TextDecoder?new e.TextDecoder:null,readUTF8:function(e,r,n){var a=t._bin._tdec;return a&&0==r&&n==e.length?a.decode(e):t._bin.readASCII(e,r,n)},readBytes:function(e,t,r){for(var n=[],a=0;a<r;a++)n.push(e[t+a]);return n},readASCIIArray:function(e,t,r){for(var n=[],a=0;a<r;a++)n.push(String.fromCharCode(e[t+a]));return n}},t._bin.t={buff:new ArrayBuffer(8)},t._bin.t.int8=new Int8Array(t._bin.t.buff),t._bin.t.uint8=new Uint8Array(t._bin.t.buff),t._bin.t.int16=new Int16Array(t._bin.t.buff),t._bin.t.uint16=new Uint16Array(t._bin.t.buff),t._bin.t.int32=new Int32Array(t._bin.t.buff),t._bin.t.uint32=new Uint32Array(t._bin.t.buff),t._lctf={},t._lctf.parse=function(e,r,n,a,o){var i=t._bin,s={},c=r;i.readFixed(e,r),r+=4;var u=i.readUshort(e,r);r+=2;var l=i.readUshort(e,r);r+=2;var f=i.readUshort(e,r);return r+=2,s.scriptList=t._lctf.readScriptList(e,c+u),s.featureList=t._lctf.readFeatureList(e,c+l),s.lookupList=t._lctf.readLookupList(e,c+f,o),s},t._lctf.readLookupList=function(e,r,n){var a=t._bin,o=r,i=[],s=a.readUshort(e,r);r+=2;for(var c=0;c<s;c++){var u=a.readUshort(e,r);r+=2;var l=t._lctf.readLookupTable(e,o+u,n);i.push(l)}return i},t._lctf.readLookupTable=function(e,r,n){var a=t._bin,o=r,i={tabs:[]};i.ltype=a.readUshort(e,r),r+=2,i.flag=a.readUshort(e,r),r+=2;var s=a.readUshort(e,r);r+=2;for(var c=0;c<s;c++){var u=a.readUshort(e,r);r+=2;var l=n(e,i.ltype,o+u);i.tabs.push(l)}return i},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var n=t._bin,a=[],o=n.readUshort(e,r);if(r+=2,1==o){var i=n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;for(var c=0;c<s;c++)a.push(i+c),a.push(i+c),a.push(n.readUshort(e,r)),r+=2}if(2==o){var u=n.readUshort(e,r);for(r+=2,c=0;c<u;c++)a.push(n.readUshort(e,r)),r+=2,a.push(n.readUshort(e,r)),r+=2,a.push(n.readUshort(e,r)),r+=2}return a},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var n=e[r],a=e[r+1];if(e[r+2],n<=t&&t<=a)return r}return-1},t._lctf.readCoverage=function(e,r){var n=t._bin,a={};a.fmt=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);return r+=2,1==a.fmt&&(a.tab=n.readUshorts(e,r,o)),2==a.fmt&&(a.tab=n.readUshorts(e,r,3*o)),a},t._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var a=t._lctf.getInterval(n,r);if(-1!=a)return n[a+2]+(r-n[a])}return-1},t._lctf.readFeatureList=function(e,r){var n=t._bin,a=r,o=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,o.push({tag:c.trim(),tab:t._lctf.readFeatureTable(e,a+u)})}return o},t._lctf.readFeatureTable=function(e,r){var n=t._bin;n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2;for(var o=[],i=0;i<a;i++)o.push(n.readUshort(e,r+2*i));return o},t._lctf.readScriptList=function(e,r){var n=t._bin,a=r,o={},i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,o[c.trim()]=t._lctf.readScriptTable(e,a+u)}return o},t._lctf.readScriptTable=function(e,r){var n=t._bin,a=r,o={},i=n.readUshort(e,r);r+=2,o.default=t._lctf.readLangSysTable(e,a+i);var s=n.readUshort(e,r);r+=2;for(var c=0;c<s;c++){var u=n.readASCII(e,r,4);r+=4;var l=n.readUshort(e,r);r+=2,o[u.trim()]=t._lctf.readLangSysTable(e,a+l)}return o},t._lctf.readLangSysTable=function(e,r){var n=t._bin,a={};n.readUshort(e,r),r+=2,a.reqFeature=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);return r+=2,a.features=n.readUshorts(e,r,o),a},t.CFF={},t.CFF.parse=function(e,r,n){var a=t._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r],r++;var o=[];r=t.CFF.readIndex(e,r,o);for(var i=[],s=0;s<o.length-1;s++)i.push(a.readASCII(e,r+o[s],o[s+1]-o[s]));r+=o[o.length-1];var c=[];r=t.CFF.readIndex(e,r,c);var u=[];for(s=0;s<c.length-1;s++)u.push(t.CFF.readDict(e,r+c[s],r+c[s+1]));r+=c[c.length-1];var l=u[0],f=[];r=t.CFF.readIndex(e,r,f);var d=[];for(s=0;s<f.length-1;s++)d.push(a.readASCII(e,r+f[s],f[s+1]-f[s]));if(r+=f[f.length-1],t.CFF.readSubrs(e,r,l),l.CharStrings){r=l.CharStrings,f=[],r=t.CFF.readIndex(e,r,f);var h=[];for(s=0;s<f.length-1;s++)h.push(a.readBytes(e,r+f[s],f[s+1]-f[s]));l.CharStrings=h}if(l.ROS){r=l.FDArray;var p=[];for(r=t.CFF.readIndex(e,r,p),l.FDArray=[],s=0;s<p.length-1;s++){var v=t.CFF.readDict(e,r+p[s],r+p[s+1]);t.CFF._readFDict(e,v,d),l.FDArray.push(v)}r+=p[p.length-1],r=l.FDSelect,l.FDSelect=[];var m=e[r];if(r++,3!=m)throw m;var g=a.readUshort(e,r);for(r+=2,s=0;s<g+1;s++)l.FDSelect.push(a.readUshort(e,r),e[r+2]),r+=3}return l.Encoding&&(l.Encoding=t.CFF.readEncoding(e,l.Encoding,l.CharStrings.length)),l.charset&&(l.charset=t.CFF.readCharset(e,l.charset,l.CharStrings.length)),t.CFF._readFDict(e,l,d),l},t.CFF._readFDict=function(e,r,n){var a;for(var o in r.Private&&(a=r.Private[1],r.Private=t.CFF.readDict(e,a,a+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,a+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(r[o]=n[r[o]-426+35])},t.CFF.readSubrs=function(e,r,n){var a=t._bin,o=[];r=t.CFF.readIndex(e,r,o);var i,s=o.length;i=s<1240?107:s<33900?1131:32768,n.Bias=i,n.Subrs=[];for(var c=0;c<o.length-1;c++)n.Subrs.push(a.readBytes(e,r+o[c],o[c+1]-o[c]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return-1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,n){t._bin;var a=[".notdef"],o=e[r];if(0!=o)throw"error: unknown encoding format: "+o;var i=e[++r];r++;for(var s=0;s<i;s++)a.push(e[r+s]);return a},t.CFF.readCharset=function(e,r,n){var a=t._bin,o=[".notdef"],i=e[r];if(r++,0==i)for(var s=0;s<n;s++){var c=a.readUshort(e,r);r+=2,o.push(c)}else{if(1!=i&&2!=i)throw"error: format: "+i;for(;o.length<n;){c=a.readUshort(e,r),r+=2;var u=0;for(1==i?(u=e[r],r++):(u=a.readUshort(e,r),r+=2),s=0;s<=u;s++)o.push(c),c++}}return o},t.CFF.readIndex=function(e,r,n){var a=t._bin,o=a.readUshort(e,r)+1,i=e[r+=2];if(r++,1==i)for(var s=0;s<o;s++)n.push(e[r+s]);else if(2==i)for(s=0;s<o;s++)n.push(a.readUshort(e,r+2*s));else if(3==i)for(s=0;s<o;s++)n.push(16777215&a.readUint(e,r+3*s-1));else if(1!=o)throw"unsupported offset size: "+i+", count: "+o;return(r+=o*i)-1},t.CFF.getCharString=function(e,r,n){var a=t._bin,o=e[r],i=e[r+1],s=(e[r+2],e[r+3],e[r+4],1),c=null,u=null;o<=20&&(c=o,s=1),12==o&&(c=100*o+i,s=2),21<=o&&o<=27&&(c=o,s=1),28==o&&(u=a.readShort(e,r+1),s=3),29<=o&&o<=31&&(c=o,s=1),32<=o&&o<=246&&(u=o-139,s=1),247<=o&&o<=250&&(u=256*(o-247)+i+108,s=2),251<=o&&o<=254&&(u=256*-(o-251)-i-108,s=2),255==o&&(u=a.readInt(e,r+1)/65535,s=5),n.val=null!=u?u:"o"+c,n.size=s},t.CFF.readCharString=function(e,r,n){for(var a=r+n,o=t._bin,i=[];r<a;){var s=e[r],c=e[r+1],u=(e[r+2],e[r+3],e[r+4],1),l=null,f=null;s<=20&&(l=s,u=1),12==s&&(l=100*s+c,u=2),19!=s&&20!=s||(l=s,u=2),21<=s&&s<=27&&(l=s,u=1),28==s&&(f=o.readShort(e,r+1),u=3),29<=s&&s<=31&&(l=s,u=1),32<=s&&s<=246&&(f=s-139,u=1),247<=s&&s<=250&&(f=256*(s-247)+c+108,u=2),251<=s&&s<=254&&(f=256*-(s-251)-c-108,u=2),255==s&&(f=o.readInt(e,r+1)/65535,u=5),i.push(null!=f?f:"o"+l),r+=u}return i},t.CFF.readDict=function(e,r,n){for(var a=t._bin,o={},i=[];r<n;){var s=e[r],c=e[r+1],u=(e[r+2],e[r+3],e[r+4],1),l=null,f=null;if(28==s&&(f=a.readShort(e,r+1),u=3),29==s&&(f=a.readInt(e,r+1),u=5),32<=s&&s<=246&&(f=s-139,u=1),247<=s&&s<=250&&(f=256*(s-247)+c+108,u=2),251<=s&&s<=254&&(f=256*-(s-251)-c-108,u=2),255==s)throw f=a.readInt(e,r+1)/65535,u=5,"unknown number";if(30==s){var d=[];for(u=1;;){var h=e[r+u];u++;var p=h>>4,v=15&h;if(15!=p&&d.push(p),15!=v&&d.push(v),15==v)break}for(var m="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)m+=g[d[y]];f=parseFloat(m)}s<=21&&(l=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s&&(l=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],u=2)),null!=l?(o[l]=1==i.length?i[0]:i,i=[]):i.push(f),r+=u}return o},t.cmap={},t.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var a=t._bin,o={};a.readUshort(e,r),r+=2;var i=a.readUshort(e,r);r+=2;var s=[];o.tables=[];for(var c=0;c<i;c++){var u=a.readUshort(e,r);r+=2;var l=a.readUshort(e,r);r+=2;var f=a.readUint(e,r);r+=4;var d="p"+u+"e"+l,h=s.indexOf(f);if(-1==h){var p;h=o.tables.length,s.push(f);var v=a.readUshort(e,f);0==v?p=t.cmap.parse0(e,f):4==v?p=t.cmap.parse4(e,f):6==v?p=t.cmap.parse6(e,f):12==v?p=t.cmap.parse12(e,f):console.log("unknown format: "+v,u,l,f),o.tables.push(p)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=h}return o},t.cmap.parse0=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,a.map=[];for(var i=0;i<o-6;i++)a.map.push(e[r+i]);return a},t.cmap.parse4=function(e,r){var n=t._bin,a=r,o={};o.format=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2;var c=s/2;o.searchRange=n.readUshort(e,r),r+=2,o.entrySelector=n.readUshort(e,r),r+=2,o.rangeShift=n.readUshort(e,r),r+=2,o.endCount=n.readUshorts(e,r,c),r+=2*c,r+=2,o.startCount=n.readUshorts(e,r,c),r+=2*c,o.idDelta=[];for(var u=0;u<c;u++)o.idDelta.push(n.readShort(e,r)),r+=2;for(o.idRangeOffset=n.readUshorts(e,r,c),r+=2*c,o.glyphIdArray=[];r<a+i;)o.glyphIdArray.push(n.readUshort(e,r)),r+=2;return o},t.cmap.parse6=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,a.firstCode=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,a.glyphIdArray=[];for(var i=0;i<o;i++)a.glyphIdArray.push(n.readUshort(e,r)),r+=2;return a},t.cmap.parse12=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2,r+=2,n.readUint(e,r),r+=4,n.readUint(e,r),r+=4;var o=n.readUint(e,r);r+=4,a.groups=[];for(var i=0;i<o;i++){var s=r+12*i,c=n.readUint(e,s+0),u=n.readUint(e,s+4),l=n.readUint(e,s+8);a.groups.push([c,u,l])}return a},t.glyf={},t.glyf.parse=function(e,t,r,n){for(var a=[],o=0;o<n.maxp.numGlyphs;o++)a.push(null);return a},t.glyf._parseGlyf=function(e,r){var n=t._bin,a=e._data,o=t._tabOffset(a,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var i={};if(i.noc=n.readShort(a,o),o+=2,i.xMin=n.readShort(a,o),o+=2,i.yMin=n.readShort(a,o),o+=2,i.xMax=n.readShort(a,o),o+=2,i.yMax=n.readShort(a,o),o+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var s=0;s<i.noc;s++)i.endPts.push(n.readUshort(a,o)),o+=2;var c=n.readUshort(a,o);if(o+=2,a.length-o<c)return null;i.instructions=n.readBytes(a,o,c),o+=c;var u=i.endPts[i.noc-1]+1;for(i.flags=[],s=0;s<u;s++){var l=a[o];if(o++,i.flags.push(l),0!=(8&l)){var f=a[o];o++;for(var d=0;d<f;d++)i.flags.push(l),s++}}for(i.xs=[],s=0;s<u;s++){var h=0!=(2&i.flags[s]),p=0!=(16&i.flags[s]);h?(i.xs.push(p?a[o]:-a[o]),o++):p?i.xs.push(0):(i.xs.push(n.readShort(a,o)),o+=2)}for(i.ys=[],s=0;s<u;s++)h=0!=(4&i.flags[s]),p=0!=(32&i.flags[s]),h?(i.ys.push(p?a[o]:-a[o]),o++):p?i.ys.push(0):(i.ys.push(n.readShort(a,o)),o+=2);var v=0,m=0;for(s=0;s<u;s++)v+=i.xs[s],m+=i.ys[s],i.xs[s]=v,i.ys[s]=m}else{var g;i.parts=[];do{g=n.readUshort(a,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(y),y.glyphIndex=n.readUshort(a,o),o+=2,1&g){var b=n.readShort(a,o);o+=2;var S=n.readShort(a,o);o+=2}else b=n.readInt8(a,o),o++,S=n.readInt8(a,o),o++;2&g?(y.m.tx=b,y.m.ty=S):(y.p1=b,y.p2=S),8&g?(y.m.a=y.m.d=n.readF2dot14(a,o),o+=2):64&g?(y.m.a=n.readF2dot14(a,o),o+=2,y.m.d=n.readF2dot14(a,o),o+=2):128&g&&(y.m.a=n.readF2dot14(a,o),o+=2,y.m.b=n.readF2dot14(a,o),o+=2,y.m.c=n.readF2dot14(a,o),o+=2,y.m.d=n.readF2dot14(a,o),o+=2)}while(32&g);if(256&g){var U=n.readUshort(a,o);for(o+=2,i.instr=[],s=0;s<U;s++)i.instr.push(a[o]),o++}}return i},t.GPOS={},t.GPOS.parse=function(e,r,n,a){return t._lctf.parse(e,r,n,a,t.GPOS.subt)},t.GPOS.subt=function(e,r,n){var a=t._bin,o=n,i={};if(i.fmt=a.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&i.fmt<=2){var s=a.readUshort(e,n);n+=2,i.coverage=t._lctf.readCoverage(e,s+o)}if(1==r&&1==i.fmt){var c=a.readUshort(e,n);n+=2;var u=t._lctf.numOfOnes(c);0!=c&&(i.pos=t.GPOS.readValueRecord(e,n,c))}else if(2==r){c=a.readUshort(e,n),n+=2;var l=a.readUshort(e,n);n+=2,u=t._lctf.numOfOnes(c);var f=t._lctf.numOfOnes(l);if(1==i.fmt){i.pairsets=[];var d=a.readUshort(e,n);n+=2;for(var h=0;h<d;h++){var p=o+a.readUshort(e,n);n+=2;var v=a.readUshort(e,p);p+=2;for(var m=[],g=0;g<v;g++){var y=a.readUshort(e,p);p+=2,0!=c&&(_=t.GPOS.readValueRecord(e,p,c),p+=2*u),0!=l&&(T=t.GPOS.readValueRecord(e,p,l),p+=2*f),m.push({gid2:y,val1:_,val2:T})}i.pairsets.push(m)}}if(2==i.fmt){var b=a.readUshort(e,n);n+=2;var S=a.readUshort(e,n);n+=2;var U=a.readUshort(e,n);n+=2;var x=a.readUshort(e,n);for(n+=2,i.classDef1=t._lctf.readClassDef(e,o+b),i.classDef2=t._lctf.readClassDef(e,o+S),i.matrix=[],h=0;h<U;h++){var w=[];for(g=0;g<x;g++){var _=null,T=null;0!=i.valFmt1&&(_=t.GPOS.readValueRecord(e,n,i.valFmt1),n+=2*u),0!=i.valFmt2&&(T=t.GPOS.readValueRecord(e,n,i.valFmt2),n+=2*f),w.push({val1:_,val2:T})}i.matrix.push(w)}}}return i},t.GPOS.readValueRecord=function(e,r,n){var a=t._bin,o=[];return o.push(1&n?a.readShort(e,r):0),r+=1&n?2:0,o.push(2&n?a.readShort(e,r):0),r+=2&n?2:0,o.push(4&n?a.readShort(e,r):0),r+=4&n?2:0,o.push(8&n?a.readShort(e,r):0),r+=8&n?2:0,o},t.GSUB={},t.GSUB.parse=function(e,r,n,a){return t._lctf.parse(e,r,n,a,t.GSUB.subt)},t.GSUB.subt=function(e,r,n){var a=t._bin,o=n,i={};if(i.fmt=a.readUshort(e,n),n+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&i.fmt<=2||6==r&&i.fmt<=2){var s=a.readUshort(e,n);n+=2,i.coverage=t._lctf.readCoverage(e,o+s)}if(1==r){if(1==i.fmt)i.delta=a.readShort(e,n),n+=2;else if(2==i.fmt){var c=a.readUshort(e,n);n+=2,i.newg=a.readUshorts(e,n,c),n+=2*i.newg.length}}else if(4==r){i.vals=[],c=a.readUshort(e,n),n+=2;for(var u=0;u<c;u++){var l=a.readUshort(e,n);n+=2,i.vals.push(t.GSUB.readLigatureSet(e,o+l))}}else if(5==r){if(2==i.fmt){var f=a.readUshort(e,n);n+=2,i.cDef=t._lctf.readClassDef(e,o+f),i.scset=[];var d=a.readUshort(e,n);for(n+=2,u=0;u<d;u++){var h=a.readUshort(e,n);n+=2,i.scset.push(0==h?null:t.GSUB.readSubClassSet(e,o+h))}}}else if(6==r&&3==i.fmt){for(u=0;u<3;u++){c=a.readUshort(e,n),n+=2;for(var p=[],v=0;v<c;v++)p.push(t._lctf.readCoverage(e,o+a.readUshort(e,n+2*v)));n+=2*c,0==u&&(i.backCvg=p),1==u&&(i.inptCvg=p),2==u&&(i.ahedCvg=p)}c=a.readUshort(e,n),n+=2,i.lookupRec=t.GSUB.readSubstLookupRecords(e,n,c)}return i},t.GSUB.readSubClassSet=function(e,r){var n=t._bin.readUshort,a=r,o=[],i=n(e,r);r+=2;for(var s=0;s<i;s++){var c=n(e,r);r+=2,o.push(t.GSUB.readSubClassRule(e,a+c))}return o},t.GSUB.readSubClassRule=function(e,r){var n=t._bin.readUshort,a={},o=n(e,r),i=n(e,r+=2);r+=2,a.input=[];for(var s=0;s<o-1;s++)a.input.push(n(e,r)),r+=2;return a.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,i),a},t.GSUB.readSubstLookupRecords=function(e,r,n){for(var a=t._bin.readUshort,o=[],i=0;i<n;i++)o.push(a(e,r),a(e,r+2)),r+=4;return o},t.GSUB.readChainSubClassSet=function(e,r){var n=t._bin,a=r,o=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readUshort(e,r);r+=2,o.push(t.GSUB.readChainSubClassRule(e,a+c))}return o},t.GSUB.readChainSubClassRule=function(e,r){for(var n=t._bin,a={},o=["backtrack","input","lookahead"],i=0;i<o.length;i++){var s=n.readUshort(e,r);r+=2,1==i&&s--,a[o[i]]=n.readUshorts(e,r,s),r+=2*a[o[i]].length}return s=n.readUshort(e,r),r+=2,a.subst=n.readUshorts(e,r,2*s),r+=2*a.subst.length,a},t.GSUB.readLigatureSet=function(e,r){var n=t._bin,a=r,o=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readUshort(e,r);r+=2,o.push(t.GSUB.readLigature(e,a+c))}return o},t.GSUB.readLigature=function(e,r){var n=t._bin,a={chain:[]};a.nglyph=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2;for(var i=0;i<o-1;i++)a.chain.push(n.readUshort(e,r)),r+=2;return a},t.head={},t.head.parse=function(e,r,n){var a=t._bin,o={};return a.readFixed(e,r),r+=4,o.fontRevision=a.readFixed(e,r),r+=4,a.readUint(e,r),r+=4,a.readUint(e,r),r+=4,o.flags=a.readUshort(e,r),r+=2,o.unitsPerEm=a.readUshort(e,r),r+=2,o.created=a.readUint64(e,r),r+=8,o.modified=a.readUint64(e,r),r+=8,o.xMin=a.readShort(e,r),r+=2,o.yMin=a.readShort(e,r),r+=2,o.xMax=a.readShort(e,r),r+=2,o.yMax=a.readShort(e,r),r+=2,o.macStyle=a.readUshort(e,r),r+=2,o.lowestRecPPEM=a.readUshort(e,r),r+=2,o.fontDirectionHint=a.readShort(e,r),r+=2,o.indexToLocFormat=a.readShort(e,r),r+=2,o.glyphDataFormat=a.readShort(e,r),r+=2,o},t.hhea={},t.hhea.parse=function(e,r,n){var a=t._bin,o={};return a.readFixed(e,r),r+=4,o.ascender=a.readShort(e,r),r+=2,o.descender=a.readShort(e,r),r+=2,o.lineGap=a.readShort(e,r),r+=2,o.advanceWidthMax=a.readUshort(e,r),r+=2,o.minLeftSideBearing=a.readShort(e,r),r+=2,o.minRightSideBearing=a.readShort(e,r),r+=2,o.xMaxExtent=a.readShort(e,r),r+=2,o.caretSlopeRise=a.readShort(e,r),r+=2,o.caretSlopeRun=a.readShort(e,r),r+=2,o.caretOffset=a.readShort(e,r),r+=2,r+=8,o.metricDataFormat=a.readShort(e,r),r+=2,o.numberOfHMetrics=a.readUshort(e,r),r+=2,o},t.hmtx={},t.hmtx.parse=function(e,r,n,a){for(var o=t._bin,i={aWidth:[],lsBearing:[]},s=0,c=0,u=0;u<a.maxp.numGlyphs;u++)u<a.hhea.numberOfHMetrics&&(s=o.readUshort(e,r),r+=2,c=o.readShort(e,r),r+=2),i.aWidth.push(s),i.lsBearing.push(c);return i},t.kern={},t.kern.parse=function(e,r,n,a){var o=t._bin,i=o.readUshort(e,r);if(r+=2,1==i)return t.kern.parseV1(e,r-2,n,a);var s=o.readUshort(e,r);r+=2;for(var c={glyph1:[],rval:[]},u=0;u<s;u++){r+=2,n=o.readUshort(e,r),r+=2;var l=o.readUshort(e,r);r+=2;var f=l>>>8;if(0!=(f&=15))throw"unknown kern table format: "+f;r=t.kern.readFormat0(e,r,c)}return c},t.kern.parseV1=function(e,r,n,a){var o=t._bin;o.readFixed(e,r),r+=4;var i=o.readUint(e,r);r+=4;for(var s={glyph1:[],rval:[]},c=0;c<i;c++){o.readUint(e,r),r+=4;var u=o.readUshort(e,r);r+=2,o.readUshort(e,r),r+=2;var l=u>>>8;if(0!=(l&=15))throw"unknown kern table format: "+l;r=t.kern.readFormat0(e,r,s)}return s},t.kern.readFormat0=function(e,r,n){var a=t._bin,o=-1,i=a.readUshort(e,r);r+=2,a.readUshort(e,r),r+=2,a.readUshort(e,r),r+=2,a.readUshort(e,r),r+=2;for(var s=0;s<i;s++){var c=a.readUshort(e,r);r+=2;var u=a.readUshort(e,r);r+=2;var l=a.readShort(e,r);r+=2,c!=o&&(n.glyph1.push(c),n.rval.push({glyph2:[],vals:[]}));var f=n.rval[n.rval.length-1];f.glyph2.push(u),f.vals.push(l),o=c}return r},t.loca={},t.loca.parse=function(e,r,n,a){var o=t._bin,i=[],s=a.head.indexToLocFormat,c=a.maxp.numGlyphs+1;if(0==s)for(var u=0;u<c;u++)i.push(o.readUshort(e,r+(u<<1))<<1);if(1==s)for(u=0;u<c;u++)i.push(o.readUint(e,r+(u<<2)));return i},t.maxp={},t.maxp.parse=function(e,r,n){var a=t._bin,o={},i=a.readUint(e,r);return r+=4,o.numGlyphs=a.readUshort(e,r),r+=2,65536==i&&(o.maxPoints=a.readUshort(e,r),r+=2,o.maxContours=a.readUshort(e,r),r+=2,o.maxCompositePoints=a.readUshort(e,r),r+=2,o.maxCompositeContours=a.readUshort(e,r),r+=2,o.maxZones=a.readUshort(e,r),r+=2,o.maxTwilightPoints=a.readUshort(e,r),r+=2,o.maxStorage=a.readUshort(e,r),r+=2,o.maxFunctionDefs=a.readUshort(e,r),r+=2,o.maxInstructionDefs=a.readUshort(e,r),r+=2,o.maxStackElements=a.readUshort(e,r),r+=2,o.maxSizeOfInstructions=a.readUshort(e,r),r+=2,o.maxComponentElements=a.readUshort(e,r),r+=2,o.maxComponentDepth=a.readUshort(e,r),r+=2),o},t.name={},t.name.parse=function(e,r,n){var a=t._bin,o={};a.readUshort(e,r),r+=2;var i=a.readUshort(e,r);r+=2,a.readUshort(e,r);for(var s,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=r+=2,l=0;l<i;l++){var f=a.readUshort(e,r);r+=2;var d=a.readUshort(e,r);r+=2;var h=a.readUshort(e,r);r+=2;var p=a.readUshort(e,r);r+=2;var v=a.readUshort(e,r);r+=2;var m=a.readUshort(e,r);r+=2;var g,y=c[p],b=u+12*i+m;if(0==f)g=a.readUnicode(e,b,v/2);else if(3==f&&0==d)g=a.readUnicode(e,b,v/2);else if(0==d)g=a.readASCII(e,b,v);else if(1==d)g=a.readUnicode(e,b,v/2);else if(3==d)g=a.readUnicode(e,b,v/2);else{if(1!=f)throw"unknown encoding "+d+", platformID: "+f;g=a.readASCII(e,b,v),console.log("reading unknown MAC encoding "+d+" as ASCII")}var S="p"+f+","+h.toString(16);null==o[S]&&(o[S]={}),o[S][y]=g,o[S]._lang=h}for(var U in o)if(null!=o[U].postScriptName&&1033==o[U]._lang)return o[U];for(var U in o)if(null!=o[U].postScriptName&&0==o[U]._lang)return o[U];for(var U in o)if(null!=o[U].postScriptName&&3084==o[U]._lang)return o[U];for(var U in o)if(null!=o[U].postScriptName)return o[U];for(var U in o){s=U;break}return console.log("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,r,n){var a=t._bin.readUshort(e,r);r+=2;var o={};if(0==a)t["OS/2"].version0(e,r,o);else if(1==a)t["OS/2"].version1(e,r,o);else if(2==a||3==a||4==a)t["OS/2"].version2(e,r,o);else{if(5!=a)throw"unknown OS/2 table version: "+a;t["OS/2"].version5(e,r,o)}return o},t["OS/2"].version0=function(e,r,n){var a=t._bin;return n.xAvgCharWidth=a.readShort(e,r),r+=2,n.usWeightClass=a.readUshort(e,r),r+=2,n.usWidthClass=a.readUshort(e,r),r+=2,n.fsType=a.readUshort(e,r),r+=2,n.ySubscriptXSize=a.readShort(e,r),r+=2,n.ySubscriptYSize=a.readShort(e,r),r+=2,n.ySubscriptXOffset=a.readShort(e,r),r+=2,n.ySubscriptYOffset=a.readShort(e,r),r+=2,n.ySuperscriptXSize=a.readShort(e,r),r+=2,n.ySuperscriptYSize=a.readShort(e,r),r+=2,n.ySuperscriptXOffset=a.readShort(e,r),r+=2,n.ySuperscriptYOffset=a.readShort(e,r),r+=2,n.yStrikeoutSize=a.readShort(e,r),r+=2,n.yStrikeoutPosition=a.readShort(e,r),r+=2,n.sFamilyClass=a.readShort(e,r),r+=2,n.panose=a.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=a.readUint(e,r),r+=4,n.ulUnicodeRange2=a.readUint(e,r),r+=4,n.ulUnicodeRange3=a.readUint(e,r),r+=4,n.ulUnicodeRange4=a.readUint(e,r),r+=4,n.achVendID=[a.readInt8(e,r),a.readInt8(e,r+1),a.readInt8(e,r+2),a.readInt8(e,r+3)],r+=4,n.fsSelection=a.readUshort(e,r),r+=2,n.usFirstCharIndex=a.readUshort(e,r),r+=2,n.usLastCharIndex=a.readUshort(e,r),r+=2,n.sTypoAscender=a.readShort(e,r),r+=2,n.sTypoDescender=a.readShort(e,r),r+=2,n.sTypoLineGap=a.readShort(e,r),r+=2,n.usWinAscent=a.readUshort(e,r),r+=2,n.usWinDescent=a.readUshort(e,r),r+=2},t["OS/2"].version1=function(e,r,n){var a=t._bin;return r=t["OS/2"].version0(e,r,n),n.ulCodePageRange1=a.readUint(e,r),r+=4,n.ulCodePageRange2=a.readUint(e,r),r+=4},t["OS/2"].version2=function(e,r,n){var a=t._bin;return r=t["OS/2"].version1(e,r,n),n.sxHeight=a.readShort(e,r),r+=2,n.sCapHeight=a.readShort(e,r),r+=2,n.usDefault=a.readUshort(e,r),r+=2,n.usBreak=a.readUshort(e,r),r+=2,n.usMaxContext=a.readUshort(e,r),r+=2},t["OS/2"].version5=function(e,r,n){var a=t._bin;return r=t["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=a.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=a.readUshort(e,r),r+=2},t.post={},t.post.parse=function(e,r,n){var a=t._bin,o={};return o.version=a.readFixed(e,r),r+=4,o.italicAngle=a.readFixed(e,r),r+=4,o.underlinePosition=a.readShort(e,r),r+=2,o.underlineThickness=a.readShort(e,r),r+=2,o},t.SVG={},t.SVG.parse=function(e,r,n){var a=t._bin,o={entries:[]},i=r;a.readUshort(e,r),r+=2;var s=a.readUint(e,r);r+=4,a.readUint(e,r),r+=4,r=s+i;var c=a.readUshort(e,r);r+=2;for(var u=0;u<c;u++){var l=a.readUshort(e,r);r+=2;var f=a.readUshort(e,r);r+=2;var d=a.readUint(e,r);r+=4;var h=a.readUint(e,r);r+=4;for(var p=new Uint8Array(e.buffer,i+d+s,h),v=a.readUTF8(p,0,p.length),m=l;m<=f;m++)o.entries[m]=v}return o},t.SVG.toPath=function(e){var r={cmds:[],crds:[]};if(null==e)return r;for(var n=(new DOMParser).parseFromString(e,"image/svg+xml").firstChild;"svg"!=n.tagName;)n=n.nextSibling;var a=n.getAttribute("viewBox");a=a?a.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],t.SVG._toPath(n.children,r);for(var o=0;o<r.crds.length;o+=2){var i=r.crds[o],s=r.crds[o+1];i-=a[0],s=-(s-=a[1]),r.crds[o]=i,r.crds[o+1]=s}return r},t.SVG._toPath=function(e,r,n){for(var a=0;a<e.length;a++){var o=e[a],i=o.tagName,s=o.getAttribute("fill");if(null==s&&(s=n),"g"==i)t.SVG._toPath(o.children,r,s);else if("path"==i){r.cmds.push(s||"#000000");var c=o.getAttribute("d"),u=t.SVG._tokens(c);t.SVG._toksToPath(u,r),r.cmds.push("X")}else"defs"==i||console.log(i,o)}},t.SVG._tokens=function(e){for(var t=[],r=0,n=!1,a="";r<e.length;){var o=e.charCodeAt(r),i=e.charAt(r);r++;var s=48<=o&&o<=57||"."==i||"-"==i;n?"-"==i?(t.push(parseFloat(a)),a=i):s?a+=i:(t.push(parseFloat(a)),","!=i&&" "!=i&&t.push(i),n=!1):s?(a=i,n=!0):","!=i&&" "!=i&&t.push(i)}return n&&t.push(parseFloat(a)),t},t.SVG._toksToPath=function(e,r){for(var n=0,a=0,o=0,i=0,s=0,c={M:2,L:2,H:1,V:1,S:4,C:6},u=r.cmds,l=r.crds;n<e.length;){var f=e[n];if(n++,"z"==f)u.push("Z"),a=i,o=s;else for(var d=f.toUpperCase(),h=c[d],p=t.SVG._reps(e,n,h),v=0;v<p;v++){var m=0,g=0;if(f!=d&&(m=a,g=o),"M"==d)a=m+e[n++],o=g+e[n++],u.push("M"),l.push(a,o),i=a,s=o;else if("L"==d)a=m+e[n++],o=g+e[n++],u.push("L"),l.push(a,o);else if("H"==d)a=m+e[n++],u.push("L"),l.push(a,o);else if("V"==d)o=g+e[n++],u.push("L"),l.push(a,o);else if("C"==d){var y=m+e[n++],b=g+e[n++],S=m+e[n++],U=g+e[n++],x=m+e[n++],w=g+e[n++];u.push("C"),l.push(y,b,S,U,x,w),a=x,o=w}else if("S"==d){var _=Math.max(l.length-4,0);y=a+a-l[_],b=o+o-l[_+1],S=m+e[n++],U=g+e[n++],x=m+e[n++],w=g+e[n++],u.push("C"),l.push(y,b,S,U,x,w),a=x,o=w}else console.log("Unknown SVG command "+f)}}},t.SVG._reps=function(e,t,r){for(var n=t;n<e.length&&"string"!=typeof e[n];)n+=r;return(n-t)/r},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var a=r.tables[n];if(0==a.format)return t>=a.map.length?0:a.map[t];if(4==a.format){for(var o=-1,i=0;i<a.endCount.length;i++)if(t<=a.endCount[i]){o=i;break}return-1==o?0:a.startCount[o]>t?0:65535&(0!=a.idRangeOffset[o]?a.glyphIdArray[t-a.startCount[o]+(a.idRangeOffset[o]>>1)-(a.idRangeOffset.length-o)]:t+a.idDelta[o])}if(12==a.format){if(t>a.groups[a.groups.length-1][1])return 0;for(i=0;i<a.groups.length;i++){var s=a.groups[i];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+a.format},t.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var a=e.SVG.entries[r];return null==a?n:("string"==typeof a&&(a=t.SVG.toPath(a),e.SVG.entries[r]=a),a)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},i=e.CFF,s=e.CFF.Private;if(i.ROS){for(var c=0;i.FDSelect[c+2]<=r;)c+=2;s=i.FDArray[i.FDSelect[c+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],o,i,s,n)}else e.glyf&&t.U._drawGlyf(r,e,n);return n},t.U._drawGlyf=function(e,r,n){var a=r.glyf[e];null==a&&(a=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=a&&(a.noc>-1?t.U._simpleGlyph(a,n):t.U._compoGlyph(a,r,n))},t.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var a=0==n?0:e.endPts[n-1]+1,o=e.endPts[n],i=a;i<=o;i++){var s=i==a?o:i-1,c=i==o?a:i+1,u=1&e.flags[i],l=1&e.flags[s],f=1&e.flags[c],d=e.xs[i],h=e.ys[i];if(i==a)if(u){if(!l){t.U.P.moveTo(r,d,h);continue}t.U.P.moveTo(r,e.xs[s],e.ys[s])}else l?t.U.P.moveTo(r,e.xs[s],e.ys[s]):t.U.P.moveTo(r,(e.xs[s]+d)/2,(e.ys[s]+h)/2);u?l&&t.U.P.lineTo(r,d,h):f?t.U.P.qcurveTo(r,d,h,e.xs[c],e.ys[c]):t.U.P.qcurveTo(r,d,h,(d+e.xs[c])/2,(h+e.ys[c])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,n){for(var a=0;a<e.parts.length;a++){var o={cmds:[],crds:[]},i=e.parts[a];t.U._drawGlyf(i.glyphIndex,r,o);for(var s=i.m,c=0;c<o.crds.length;c+=2){var u=o.crds[c],l=o.crds[c+1];n.crds.push(u*s.a+l*s.b+s.tx),n.crds.push(u*s.c+l*s.d+s.ty)}for(c=0;c<o.cmds.length;c++)n.cmds.push(o.cmds[c])}},t.U._getGlyphClass=function(e,r){var n=t._lctf.getInterval(r,e);return-1==n?0:r[n+2]},t.U.getPairAdjustment=function(e,r,n){if(e.GPOS)for(var a=e.GPOS,o=a.lookupList,i=a.featureList,s=[],c=0;c<i.length;c++){var u=i[c];if("kern"==u.tag)for(var l=0;l<u.tab.length;l++)if(!s[u.tab[l]]){s[u.tab[l]]=!0;for(var f=o[u.tab[l]],d=0;d<f.tabs.length;d++)if(null!=f.tabs[c]){var h,p=f.tabs[d];if(!p.coverage||-1!=(h=t._lctf.coverageIndex(p.coverage,r)))if(1==f.ltype);else if(2==f.ltype){var v;if(1==p.fmt){var m=p.pairsets[h];for(c=0;c<m.length;c++)m[c].gid2==n&&(v=m[c])}else if(2==p.fmt){var g=t.U._getGlyphClass(r,p.classDef1),y=t.U._getGlyphClass(n,p.classDef2);v=p.matrix[g][y]}if(v&&v.val2)return v.val2[2]}}}}if(e.kern){var b=e.kern.glyph1.indexOf(r);if(-1!=b){var S=e.kern.rval[b].glyph2.indexOf(n);if(-1!=S)return e.kern.rval[b].vals[S]}}return 0},t.U.stringToGlyphs=function(e,r){for(var n=[],a=0;a<r.length;a++)(o=r.codePointAt(a))>65535&&a++,n.push(t.U.codeToGlyph(e,o));for(a=0;a<r.length;a++){var o;if(2367==(o=r.codePointAt(a))){var i=n[a-1];n[a-1]=n[a],n[a]=i}o>65535&&a++}var s=e.GSUB;if(null==s)return n;for(var c=s.lookupList,u=s.featureList,l=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],f=[],d=0;d<u.length;d++){var h=u[d];if(-1!=l.indexOf(h.tag))for(var p=0;p<h.tab.length;p++)if(!f[h.tab[p]]){f[h.tab[p]]=!0;for(var v=c[h.tab[p]],m=0;m<n.length;m++){var g=t.U._getWPfeature(r,m);-1!="isol,init,fina,medi".indexOf(h.tag)&&h.tag!=g||t.U._applySubs(n,m,v,c)}}}return n},t.U._getWPfeature=function(e,t){var r='\n\t" ,.:;!?()  \u060c',n="\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0671\u0672\u0673\u0675\u0676\u0677\u0688\u0689\u068a\u068b\u068c\u068d\u068e\u068f\u0690\u0691\u0692\u0693\u0694\u0695\u0696\u0697\u0698\u0699\u06c0\u06c3\u06c4\u06c5\u06c6\u06c7\u06c8\u06c9\u06ca\u06cb\u06cd\u06cf\u06d2\u06d3\u06d5\u06ee\u06ef\u0710\u0715\u0716\u0717\u0718\u0719\u071e\u0728\u072a\u072c\u072f\u074d\u0759\u075a\u075b\u076b\u076c\u0771\u0773\u0774\u0778\u0779\u0840\u0846\u0847\u0849\u0854\u0867\u0869\u086a\u08aa\u08ab\u08ac\u08ae\u08b1\u08b2\u08b9\u0ac5\u0ac7\u0ac9\u0aca\u0ace\u0acf\u0ad0\u0ad1\u0ad2\u0add\u0ae1\u0ae4\u0aef\u0b81\u0b83\u0b84\u0b85\u0b89\u0b8c\u0b8e\u0b8f\u0b91\u0ba9\u0baa\u0bab\u0bac",a=0==t||-1!=r.indexOf(e[t-1]),o=t==e.length-1||-1!=r.indexOf(e[t+1]);return a||-1==n.indexOf(e[t-1])||(a=!0),o||-1==n.indexOf(e[t])||(o=!0),o||-1=="\ua872\u0acd\u0ad7".indexOf(e[t+1])||(o=!0),a||-1=="\ua872\u0acd\u0ad7".indexOf(e[t])||(a=!0),a?o?"isol":"init":o?"fina":"medi"},t.U._applySubs=function(e,r,n,a){for(var o=e.length-r-1,i=0;i<n.tabs.length;i++)if(null!=n.tabs[i]){var s,c=n.tabs[i];if(!c.coverage||-1!=(s=t._lctf.coverageIndex(c.coverage,e[r])))if(1==n.ltype)e[r],1==c.fmt?e[r]=e[r]+c.delta:e[r]=c.newg[s];else if(4==n.ltype)for(var u=c.vals[s],l=0;l<u.length;l++){var f=u[l],d=f.chain.length;if(!(d>o)){for(var h=!0,p=0,v=0;v<d;v++){for(;-1==e[r+p+(1+v)];)p++;f.chain[v]!=e[r+p+(1+v)]&&(h=!1)}if(h){for(e[r]=f.nglyph,v=0;v<d+p;v++)e[r+v+1]=-1;break}}}else if(5==n.ltype&&2==c.fmt)for(var m=t._lctf.getInterval(c.cDef,e[r]),g=c.cDef[m+2],y=c.scset[g],b=0;b<y.length;b++){var S=y[b],U=S.input;if(!(U.length>o)){for(h=!0,v=0;v<U.length;v++){var x=t._lctf.getInterval(c.cDef,e[r+1+v]);if(-1==m&&c.cDef[x+2]!=U[v]){h=!1;break}}if(h){var w=S.substLookupRecords;for(l=0;l<w.length;l+=2)w[l],w[l+1]}}}else if(6==n.ltype&&3==c.fmt){if(!t.U._glsCovered(e,c.backCvg,r-c.backCvg.length))continue;if(!t.U._glsCovered(e,c.inptCvg,r))continue;if(!t.U._glsCovered(e,c.ahedCvg,r+c.inptCvg.length))continue;var _=c.lookupRec;for(b=0;b<_.length;b+=2){m=_[b];var T=a[_[b+1]];t.U._applySubs(e,r+m,T,a)}}}},t.U._glsCovered=function(e,r,n){for(var a=0;a<r.length;a++)if(-1==t._lctf.coverageIndex(r[a],e[n+a]))return!1;return!0},t.U.glyphsToPath=function(e,r,n){for(var a={cmds:[],crds:[]},o=0,i=0;i<r.length;i++){var s=r[i];if(-1!=s){for(var c=i<r.length-1&&-1!=r[i+1]?r[i+1]:0,u=t.U.glyphToPath(e,s),l=0;l<u.crds.length;l+=2)a.crds.push(u.crds[l]+o),a.crds.push(u.crds[l+1]);for(n&&a.cmds.push(n),l=0;l<u.cmds.length;l++)a.cmds.push(u.cmds[l]);n&&a.cmds.push("X"),o+=e.hmtx.aWidth[s],i<r.length-1&&(o+=t.U.getPairAdjustment(e,s,c))}}return a},t.U.pathToSVG=function(e,t){null==t&&(t=5);for(var r=[],n=0,a={M:2,L:2,Q:4,C:6},o=0;o<e.cmds.length;o++){var i=e.cmds[o],s=n+(a[i]?a[i]:0);for(r.push(i);n<s;){var c=e.crds[n++];r.push(parseFloat(c.toFixed(t))+(n==s?"":" "))}}return r.join("")},t.U.pathToContext=function(e,t){for(var r=0,n=e.crds,a=0;a<e.cmds.length;a++){var o=e.cmds[a];"M"==o?(t.moveTo(n[r],n[r+1]),r+=2):"L"==o?(t.lineTo(n[r],n[r+1]),r+=2):"C"==o?(t.bezierCurveTo(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5]),r+=6):"Q"==o?(t.quadraticCurveTo(n[r],n[r+1],n[r+2],n[r+3]),r+=4):"#"==o.charAt(0)?(t.beginPath(),t.fillStyle=o):"Z"==o?t.closePath():"X"==o&&t.fill()}},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,n,a,o,i){e.cmds.push("C"),e.crds.push(t,r,n,a,o,i)},t.U.P.qcurveTo=function(e,t,r,n,a){e.cmds.push("Q"),e.crds.push(t,r,n,a)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,n,a,o){for(var i=r.stack,s=r.nStems,c=r.haveWidth,u=r.width,l=r.open,f=0,d=r.x,h=r.y,p=0,v=0,m=0,g=0,y=0,b=0,S=0,U=0,x=0,w=0,_={val:0,size:0};f<e.length;){t.CFF.getCharString(e,f,_);var T=_.val;if(f+=_.size,"o1"==T||"o18"==T)i.length%2!==0&&!c&&(u=i.shift()+a.nominalWidthX),s+=i.length>>1,i.length=0,c=!0;else if("o3"==T||"o23"==T)i.length%2!==0&&!c&&(u=i.shift()+a.nominalWidthX),s+=i.length>>1,i.length=0,c=!0;else if("o4"==T)i.length>1&&!c&&(u=i.shift()+a.nominalWidthX,c=!0),l&&t.U.P.closePath(o),h+=i.pop(),t.U.P.moveTo(o,d,h),l=!0;else if("o5"==T)for(;i.length>0;)d+=i.shift(),h+=i.shift(),t.U.P.lineTo(o,d,h);else if("o6"==T||"o7"==T)for(var k=i.length,C="o6"==T,O=0;O<k;O++){var F=i.shift();C?d+=F:h+=F,C=!C,t.U.P.lineTo(o,d,h)}else if("o8"==T||"o24"==T){k=i.length;for(var D=0;D+6<=k;)p=d+i.shift(),v=h+i.shift(),m=p+i.shift(),g=v+i.shift(),d=m+i.shift(),h=g+i.shift(),t.U.P.curveTo(o,p,v,m,g,d,h),D+=6;"o24"==T&&(d+=i.shift(),h+=i.shift(),t.U.P.lineTo(o,d,h))}else{if("o11"==T)break;if("o1234"==T||"o1235"==T||"o1236"==T||"o1237"==T)"o1234"==T&&(v=h,m=(p=d+i.shift())+i.shift(),w=g=v+i.shift(),b=g,U=h,d=(S=(y=(x=m+i.shift())+i.shift())+i.shift())+i.shift(),t.U.P.curveTo(o,p,v,m,g,x,w),t.U.P.curveTo(o,y,b,S,U,d,h)),"o1235"==T&&(p=d+i.shift(),v=h+i.shift(),m=p+i.shift(),g=v+i.shift(),x=m+i.shift(),w=g+i.shift(),y=x+i.shift(),b=w+i.shift(),S=y+i.shift(),U=b+i.shift(),d=S+i.shift(),h=U+i.shift(),i.shift(),t.U.P.curveTo(o,p,v,m,g,x,w),t.U.P.curveTo(o,y,b,S,U,d,h)),"o1236"==T&&(p=d+i.shift(),v=h+i.shift(),m=p+i.shift(),w=g=v+i.shift(),b=g,S=(y=(x=m+i.shift())+i.shift())+i.shift(),U=b+i.shift(),d=S+i.shift(),t.U.P.curveTo(o,p,v,m,g,x,w),t.U.P.curveTo(o,y,b,S,U,d,h)),"o1237"==T&&(p=d+i.shift(),v=h+i.shift(),m=p+i.shift(),g=v+i.shift(),x=m+i.shift(),w=g+i.shift(),y=x+i.shift(),b=w+i.shift(),S=y+i.shift(),U=b+i.shift(),Math.abs(S-d)>Math.abs(U-h)?d=S+i.shift():h=U+i.shift(),t.U.P.curveTo(o,p,v,m,g,x,w),t.U.P.curveTo(o,y,b,S,U,d,h));else if("o14"==T){if(i.length>0&&!c&&(u=i.shift()+n.nominalWidthX,c=!0),4==i.length){var E=i.shift(),M=i.shift(),P=i.shift(),I=i.shift(),A=t.CFF.glyphBySE(n,P),G=t.CFF.glyphBySE(n,I);t.U._drawCFF(n.CharStrings[A],r,n,a,o),r.x=E,r.y=M,t.U._drawCFF(n.CharStrings[G],r,n,a,o)}l&&(t.U.P.closePath(o),l=!1)}else if("o19"==T||"o20"==T)i.length%2!==0&&!c&&(u=i.shift()+a.nominalWidthX),s+=i.length>>1,i.length=0,c=!0,f+=s+7>>3;else if("o21"==T)i.length>2&&!c&&(u=i.shift()+a.nominalWidthX,c=!0),h+=i.pop(),d+=i.pop(),l&&t.U.P.closePath(o),t.U.P.moveTo(o,d,h),l=!0;else if("o22"==T)i.length>1&&!c&&(u=i.shift()+a.nominalWidthX,c=!0),d+=i.pop(),l&&t.U.P.closePath(o),t.U.P.moveTo(o,d,h),l=!0;else if("o25"==T){for(;i.length>6;)d+=i.shift(),h+=i.shift(),t.U.P.lineTo(o,d,h);p=d+i.shift(),v=h+i.shift(),m=p+i.shift(),g=v+i.shift(),d=m+i.shift(),h=g+i.shift(),t.U.P.curveTo(o,p,v,m,g,d,h)}else if("o26"==T)for(i.length%2&&(d+=i.shift());i.length>0;)p=d,v=h+i.shift(),d=m=p+i.shift(),h=(g=v+i.shift())+i.shift(),t.U.P.curveTo(o,p,v,m,g,d,h);else if("o27"==T)for(i.length%2&&(h+=i.shift());i.length>0;)v=h,m=(p=d+i.shift())+i.shift(),g=v+i.shift(),d=m+i.shift(),h=g,t.U.P.curveTo(o,p,v,m,g,d,h);else if("o10"==T||"o29"==T){var j="o10"==T?a:n;if(0==i.length)console.log("error: empty stack");else{var B=i.pop(),L=j.Subrs[B+j.Bias];r.x=d,r.y=h,r.nStems=s,r.haveWidth=c,r.width=u,r.open=l,t.U._drawCFF(L,r,n,a,o),d=r.x,h=r.y,s=r.nStems,c=r.haveWidth,u=r.width,l=r.open}}else if("o30"==T||"o31"==T){var R=i.length,z=(D=0,"o31"==T);for(D+=R-(k=-3&R);D<k;)z?(v=h,m=(p=d+i.shift())+i.shift(),h=(g=v+i.shift())+i.shift(),k-D==5?(d=m+i.shift(),D++):d=m,z=!1):(p=d,v=h+i.shift(),m=p+i.shift(),g=v+i.shift(),d=m+i.shift(),k-D==5?(h=g+i.shift(),D++):h=g,z=!0),t.U.P.curveTo(o,p,v,m,g,d,h),D+=4}else{if("o"==(T+"").charAt(0))throw console.log("Unknown operation: "+T,e),T;i.push(T)}}}r.x=d,r.y=h,r.nStems=s,r.haveWidth=c,r.width=u,r.open=l},t},function(){var e=function(){var e={},t=0,r=-3;function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function a(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new n,this.dtree=new n}var o=new n,i=new n,s=new Uint8Array(30),c=new Uint16Array(30),u=new Uint8Array(30),l=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new n,h=new Uint8Array(320);function p(e,t,r,n){var a,o;for(a=0;a<r;++a)e[a]=0;for(a=0;a<30-r;++a)e[a+r]=a/r|0;for(o=n,a=0;a<30;++a)t[a]=o,o+=1<<e[a]}var v=new Uint16Array(16);function m(e,t,r,n){var a,o;for(a=0;a<16;++a)e.table[a]=0;for(a=0;a<n;++a)e.table[t[r+a]]++;for(e.table[0]=0,o=0,a=0;a<16;++a)v[a]=o,o+=e.table[a];for(a=0;a<n;++a)t[r+a]&&(e.trans[v[t[r+a]]++]=a)}function g(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function y(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function b(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,a=0,o=e.tag;do{n=2*n+(1&o),o>>>=1,++a,r+=t.table[a],n-=t.table[a]}while(n>=0);return e.tag=o,e.bitcount-=a,t.trans[r+n]}function S(e,t,r){var n,a,o,i,s,c;for(n=y(e,5,257),a=y(e,5,1),o=y(e,4,4),i=0;i<19;++i)h[i]=0;for(i=0;i<o;++i){var u=y(e,3,0);h[f[i]]=u}for(m(d,h,0,19),s=0;s<n+a;){var l=b(e,d);switch(l){case 16:var p=h[s-1];for(c=y(e,2,3);c;--c)h[s++]=p;break;case 17:for(c=y(e,3,3);c;--c)h[s++]=0;break;case 18:for(c=y(e,7,11);c;--c)h[s++]=0;break;default:h[s++]=l}}m(t,h,0,n),m(r,h,n,a)}function U(e,r,n){for(;;){var a,o,i,f,d=b(e,r);if(256===d)return t;if(d<256)e.dest[e.destLen++]=d;else for(a=y(e,s[d-=257],c[d]),o=b(e,n),f=i=e.destLen-y(e,u[o],l[o]);f<i+a;++f)e.dest[e.destLen++]=e.dest[f]}}function x(e){for(var n,a;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((n=256*(n=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return r;for(e.sourceIndex+=4,a=n;a;--a)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,t}return function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(o,i),p(s,c,4,3),p(u,l,2,1),s[28]=0,c[28]=258,e.exports=function(e,n){var s,c,u=new a(e,n);do{switch(s=g(u),y(u,2,0)){case 0:c=x(u);break;case 1:c=U(u,o,i);break;case 2:S(u,u.ltree,u.dtree),c=U(u,u.ltree,u.dtree);break;default:c=r}if(c!==t)throw new Error("Data error")}while(!s);return u.destLen<u.dest.length?"function"===typeof u.dest.slice?u.dest.slice(0,u.destLen):u.dest.subarray(0,u.destLen):u.dest},e.exports}();return function(t){return function(e,t){var r=new DataView(e),n=0;function a(){var e=r.getUint16(n);return n+=2,e}function o(){var e=r.getUint32(n);return n+=4,e}function i(e){y.setUint16(b,e),b+=2}function s(e){y.setUint32(b,e),b+=4}for(var c={signature:o(),flavor:o(),length:o(),numTables:a(),reserved:a(),totalSfntSize:o(),majorVersion:a(),minorVersion:a(),metaOffset:o(),metaLength:o(),metaOrigLength:o(),privOffset:o(),privLength:o()},u=0;Math.pow(2,u)<=c.numTables;)u++;u--;for(var l=16*Math.pow(2,u),f=16*c.numTables-l,d=12,h=[],p=0;p<c.numTables;p++)h.push({tag:o(),offset:o(),compLength:o(),origLength:o(),origChecksum:o()}),d+=16;var v,m=new Uint8Array(12+16*h.length+h.reduce(function(e,t){return e+t.origLength+4},0)),g=m.buffer,y=new DataView(g),b=0;return s(c.flavor),i(c.numTables),i(l),i(u),i(f),h.forEach(function(e){s(e.tag),s(e.origChecksum),s(d),s(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)}),h.forEach(function(r){var n=e.slice(r.offset,r.offset+r.compLength);if(r.compLength!=r.origLength){var a=new Uint8Array(r.origLength);t(new Uint8Array(n,2),a)}else a=new Uint8Array(n);m.set(a,r.outOffset);var o=0;(d=r.outOffset+r.origLength)%4!=0&&(o=4-d%4),m.set(new Uint8Array(o).buffer,r.outOffset+r.origLength),v=d+o}),g.slice(0,v)}(t,e)}},function(e,t){var r={M:2,L:2,Q:4,C:6,Z:0};return function(n){var a=new Uint8Array(n,0,4),o=e._bin.readASCII(a,0,4);if("wOFF"===o)n=t(n);else if("wOF2"===o)throw new Error("woff2 fonts not supported");return function(t){var n=Object.create(null),a={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph:function(o,i,s,c){var u=0,l=1/a.unitsPerEm*i,f=e.U.stringToGlyphs(t,o),d=0;return f.forEach(function(a){if(-1!==a){var f=n[a];if(!f){var h,p,v,m,g=e.U.glyphToPath(t,a),y=g.cmds,b=g.crds;if(b.length){h=p=1/0,v=m=-1/0;for(var S=0,U=b.length;S<U;S+=2){var x=b[S],w=b[S+1];x<h&&(h=x),w<p&&(p=w),x>v&&(v=x),w>m&&(m=w)}}else h=v=p=m=0;f=n[a]={index:a,advanceWidth:t.hmtx.aWidth[a],xMin:h,yMin:p,xMax:v,yMax:m,pathCommandCount:y.length,forEachPathCommand:function(e){for(var t=0,n=[],a=0,o=y.length;a<o;a++){var i=r[y[a]];n.length=1+i,n[0]=y[a];for(var s=1;s<=i;s++)n[s]=b[t++];e.apply(null,n)}}}}c.call(null,f,u,d),f.advanceWidth&&(u+=f.advanceWidth*l),s&&(u+=s*i)}d+=o.codePointAt(d)>65535?2:1}),u}};return a}(e.parse(n)[0])}}],init:function(e,t,r){return r(e(),t())}}),z={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},V=new S.Color;var N,W=Object.create(null);function H(e,t){if(!0,(e=X({},e)).font=function(e){N||(N="undefined"===typeof document?{}:document.createElement("a"));return N.href=e,N.href}(e.font||z.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||z.sdfGlyphSize,null!=e.colorRanges){var r={};for(var n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){var a=e.colorRanges[n];"number"!==typeof a&&(a=V.set(a).getHex()),r[n]=a}e.colorRanges=r}Object.freeze(e);var o=z.textureWidth,i=z.sdfExponent,s=e.sdfGlyphSize,c="".concat(e.font,"@").concat(s),l=W[c];l||((l=W[c]={sdfTexture:new S.DataTexture(new Uint8Array(s*o),o,s,S.LuminanceFormat,void 0,void 0,void 0,void 0,S.LinearFilter,S.LinearFilter)}).sdfTexture.font=e.font),Z(e).then(function(r){r.newGlyphSDFs&&(r.newGlyphSDFs.forEach(function(e){for(var t=e.textureData,r=e.atlasIndex,n=l.sdfTexture.image;n.data.length<(r+1)*s*s;){var a=new Uint8Array(2*n.data.length);a.set(n.data),n.data=a,n.height*=2}for(var o=n.width/s,i=n.width*s*Math.floor(r/o)+r%o*s,c=0;c<s;c++)for(var u=c*s,f=i+c*n.width,d=0;d<s;d++)n.data[f+d]=t[u+d]}),l.sdfTexture.needsUpdate=!0),t(Object.freeze({parameters:e,sdfTexture:l.sdfTexture,sdfGlyphSize:s,sdfExponent:i,glyphBounds:r.glyphBounds,glyphAtlasIndices:r.glyphAtlasIndices,glyphColors:r.glyphColors,caretPositions:r.caretPositions,caretHeight:r.caretHeight,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),r.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");var e=Object(u.a)(r.blockBounds,4),t=e[0],n=e[1];return[e[2]-t,e[3]-n]}}))})}function X(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Y=Object(U.b)({name:"FontProcessor",dependencies:[z,R,function(){var e=!1,t=[];function r(){e&&(t.sort(function(e,t){return e.maxX-t.maxX}),e=!1)}function n(e,t,r,n,a,o){var i=a-r,s=o-n,c=i*i+s*s,u=c?Math.max(0,Math.min(1,((e-r)*i+(t-n)*s)/c)):0,l=e-(r+u*i),f=t-(n+u*s);return l*l+f*f}return{addLineSegment:function(r,n,a,o){var i={x0:r,y0:n,x1:a,y1:o,minX:Math.min(r,a),minY:Math.min(n,o),maxX:Math.max(r,a),maxY:Math.max(n,o)};t.push(i),e=!0},findNearestSignedDistance:function(e,a){r();for(var o=1/0,i=1/0,s=t.length;s--;){var c=t[s];if(c.maxX+i<=e)break;if(e+i>c.minX&&a-i<c.maxY&&a+i>c.minY){var u=n(e,a,c.x0,c.y0,c.x1,c.y1);u<o&&(o=u,i=Math.sqrt(o))}}return function(e,n){r();for(var a=!1,o=t.length;o--;){var i=t[o];if(i.maxX<=e)break;if(i.minY<n&&i.maxY>n){var s=i.y0>n!==i.y1>n&&e<(i.x1-i.x0)*(n-i.y0)/(i.y1-i.y0)+i.x0;s&&(a=!a)}}return a}(e,a)&&(i=-i),i}}},function(e,t){var r=t.sdfExponent,n=t.sdfMargin,a=16;function o(e,t,r,n,a,o,i){var s=1-i;return{x:s*s*e+2*s*i*r+i*i*a,y:s*s*t+2*s*i*n+i*i*o}}function i(e,t,r,n,a,o,i,s,c){var u=1-c;return{x:u*u*u*e+3*u*u*c*r+3*u*c*c*a+c*c*c*i,y:u*u*u*t+3*u*u*c*n+3*u*c*c*o+c*c*c*s}}return function(t,s){var c=new Uint8Array(s*s),u=t.xMax-t.xMin,l=t.yMax-t.yMin,f=Math.max(u,l),d=Math.max(u,l)/s*(n*s+.5),h=t.xMin-d,p=t.yMin-d,v=t.xMax+d,m=t.yMax+d,g=v-h,y=m-p,b=Math.max(g,y);if(t.pathCommandCount){var S,U,x,w,_=e(t);t.forEachPathCommand(function(e,t,r,n,s,c,u){switch(e){case"M":x=S=t,w=U=r;break;case"L":t===x&&r===w||_.addLineSegment(x,w,x=t,w=r);break;case"Q":for(var l={x:x,y:w},f=1;f<a;f++){var d=o(x,w,t,r,n,s,f/(a-1));_.addLineSegment(l.x,l.y,d.x,d.y),l=d}x=n,w=s;break;case"C":for(var h={x:x,y:w},p=1;p<a;p++){var v=i(x,w,t,r,n,s,c,u,p/(a-1));_.addLineSegment(h.x,h.y,v.x,v.y),h=v}x=c,w=u;break;case"Z":x===S&&w===U||_.addLineSegment(x,w,S,U)}});for(var T=0;T<s;T++)for(var k=0;k<s;k++){var C=_.findNearestSignedDistance(h+g*(T+.5)/s,p+y*(k+.5)/s,f),O=Math.pow(1-Math.abs(C)/b,r)/2;C<0&&(O=1-O),O=Math.max(0,Math.min(255,Math.round(255*O))),c[k*s+T]=O}}return{textureData:c,renderingBounds:[h,p,v,m]}}},function(e,t,r){var n=r.defaultFontURL,a=Object.create(null),o=Object.create(null),i=1/0;function s(t,r){t||(t=n);var a=o[t];a?a.pending?a.pending.push(r):r(a):(o[t]={pending:[r]},function(t,r){!function a(){var o=function(e){console.error("Failure loading font ".concat(t).concat(t===n?"":"; trying fallback"),e),t!==n&&(t=n,a())};try{var i=new XMLHttpRequest;i.open("get",t,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)o(new Error(i.statusText));else if(i.status>0)try{var t=e(i.response);r(t)}catch(n){o(n)}},i.onerror=o,i.send()}catch(s){o(s)}}()}(t,function(e){var r=o[t].pending;o[t]=e,r.forEach(function(t){return t(e)})}))}function c(e,r){var o=e.text,c=void 0===o?"":o,u=e.font,h=void 0===u?n:u,p=e.sdfGlyphSize,v=void 0===p?64:p,m=e.fontSize,g=void 0===m?1:m,y=e.letterSpacing,b=void 0===y?0:y,S=e.lineHeight,U=void 0===S?"normal":S,x=e.maxWidth,w=void 0===x?i:x,_=e.textAlign,T=void 0===_?"left":_,k=e.textIndent,C=void 0===k?0:k,O=e.whiteSpace,F=void 0===O?"normal":O,D=e.overflowWrap,E=void 0===D?"normal":D,M=e.anchorX,P=void 0===M?0:M,I=e.anchorY,A=void 0===I?0:I,G=e.includeCaretPositions,j=void 0!==G&&G,B=e.chunkedBoundsSize,L=void 0===B?8192:B,R=e.colorRanges,z=void 0===R?null:R,V=arguments.length>2&&void 0!==arguments[2]&&arguments[2],N=f(),W={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};c.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),c=c.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),g=+g,b=+b,w=+w,U=U||"normal",C=+C,function(e,t,r){e||(e=n);var o="".concat(e,"@").concat(t),i=a[o];i?r(i):s(e,function(e){i=a[o]||(a[o]={fontObj:e,glyphs:{},glyphCount:0}),r(i)})}(h,v,function(e){var n=e.fontObj,a=isFinite(w),o=null,s=null,u=null,h=null,p=null,m=null,y=null,S=0,x=0,_="nowrap"!==F,k=n.ascender,O=n.descender,D=n.unitsPerEm;W.fontLoad=f()-N;var M=f(),I=g/D;"normal"===U&&(U=(k-O)/D);var G=((U*=g)-(k-O)*I)/2,B=-(k*I+G),R=Math.min(U,(k-O)*I),H=(k+O)/2*I-R/2,X=C,Y=new d,Z=[Y];n.forEachGlyph(c,g,b,function(e,t,r){var n,o=c.charAt(r),i=e.advanceWidth*I,s=Y.count;if("isEmpty"in e||(e.isWhitespace=!!o&&/\s/.test(o),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax),e.isWhitespace||e.isEmpty||x++,_&&a&&!e.isWhitespace&&t+i+X>w&&s){if(Y.glyphAt(s-1).glyphObj.isWhitespace)n=new d,X=-t;else for(var u=s;u--;){if(0===u&&"break-word"===E){n=new d,X=-t;break}if(Y.glyphAt(u).glyphObj.isWhitespace){var l=(n=Y.splitAt(u+1)).glyphAt(0).x;X-=l;for(var f=n.count;f--;)n.glyphAt(f).x-=l;break}}n&&(Y.isSoftWrapped=!0,Y=n,Z.push(Y),S=w)}var h=Y.glyphAt(Y.count);h.glyphObj=e,h.x=t+X,h.width=i,h.charIndex=r,"\n"===o&&(Y=new d,Z.push(Y),X=-(t+i+b*g)+C)}),Z.forEach(function(e){for(var t=e.count;t--;){var r=e.glyphAt(t),n=r.glyphObj,a=r.x,o=r.width;if(!n.isWhitespace)return e.width=a+o,void(e.width>S&&(S=e.width))}});var q=0,K=0;if(P&&("number"===typeof P?q=-P:"string"===typeof P&&(q=-S*("left"===P?0:"center"===P?.5:"right"===P?1:l(P)))),A)if("number"===typeof A)K=-A;else if("string"===typeof A){var Q=Z.length*U;K="top"===A?0:"top-baseline"===A?-B:"middle"===A?Q/2:"bottom"===A?Q:"bottom-baseline"===A?Q-G+O*I:l(A)*Q}if(!V){s=new Float32Array(4*x),u=new Float32Array(x),m=[i,i,-i,-i],y=[];var $=B;j&&(p=new Float32Array(3*c.length)),z&&(h=new Uint8Array(3*x));var J,ee,te=0,re=-1,ne=-1;Z.forEach(function(r){var n=r.count,a=r.width;if(n>0){var l=0,d=0;if("center"===T)l=(S-a)/2;else if("right"===T)l=S-a;else if("justify"===T&&r.isSoftWrapped){for(var g=0,b=n;b--;)if(!r.glyphAt(b).glyphObj.isWhitespace){for(;b--;)r.glyphAt(b).glyphObj,r.glyphAt(b).glyphObj.isWhitespace&&g++;break}d=(S-a)/g}for(var x=0;x<n;x++){var w=r.glyphAt(x),_=w.glyphObj;if(l&&(w.x+=l),0!==d&&_.isWhitespace&&(l+=d,w.width+=d),j){var k=w.charIndex;for(p[3*k]=w.x+q,p[3*k+1]=w.x+w.width+q,p[3*k+2]=$+H+K;k-re>1;)p[3*(re+1)]=p[3*re+1],p[3*(re+1)+1]=p[3*re+1],p[3*(re+1)+2]=p[3*re+2],re++;re=k}if(z)for(var C=w.charIndex;C>ne;)ne++,z.hasOwnProperty(ne)&&(ee=z[ne]);if(!_.isWhitespace&&!_.isEmpty){var O=te++,F=e.glyphs[_.index];if(!F){var D=f(),E=t(_,v);W.sdf[c.charAt(w.charIndex)]=f()-D,E.atlasIndex=e.glyphCount++,o||(o=[]),o.push(E),F=e.glyphs[_.index]={atlasIndex:E.atlasIndex,glyphObj:_,renderingBounds:E.renderingBounds}}var M=F.renderingBounds,P=4*O,A=w.x+q,G=$+K;s[P]=A+M[0]*I,s[P+1]=G+M[1]*I,s[P+2]=A+M[2]*I,s[P+3]=G+M[3]*I;var B=A+_.xMin*I,R=G+_.yMin*I,V=A+_.xMax*I,N=G+_.yMax*I;B<m[0]&&(m[0]=B),R<m[1]&&(m[1]=R),V>m[2]&&(m[2]=V),N>m[3]&&(m[3]=N),O%L===0&&(J={start:O,end:O,rect:[i,i,-i,-i]},y.push(J)),J.end++;var X=J.rect;if(B<X[0]&&(X[0]=B),R<X[1]&&(X[1]=R),V>X[2]&&(X[2]=V),N>X[3]&&(X[3]=N),u[O]=F.atlasIndex,z){var Y=3*O;h[Y]=ee>>16&255,h[Y+1]=ee>>8&255,h[Y+2]=255&ee}}}}$-=U})}for(var ae in W.sdf)W.sdfTotal+=W.sdf[ae];W.layout=f()-M-W.sdfTotal,W.total=f()-N,r({glyphBounds:s,glyphAtlasIndices:u,caretPositions:p,caretHeight:R,glyphColors:h,chunkedBounds:y,ascender:k*I,descender:O*I,lineHeight:U,topBaseline:B,blockBounds:[q,K-Z.length*U,q+S,K],visibleBounds:m,newGlyphSDFs:o,timings:W})})}function l(e){var t=e.match(/^([\d.]+)%$/),r=t?parseFloat(t[1]):NaN;return isNaN(r)?0:r/100}function f(){return(self.performance||Date).now()}function d(){this.data=[]}return d.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/4)},glyphAt:function(e){var t=d.flyweight;return t.data=this.data,t.index=e,t},splitAt:function(e){var t=new d;return t.data=this.data.splice(4*e),t}},d.flyweight=["glyphObj","x","width","charIndex"].reduce(function(e,t,r,n){return Object.defineProperty(e,t,{get:function(){return this.data[4*this.index+r]},set:function(e){this.data[4*this.index+r]=e}}),e},{data:null,index:0}),{process:c,measure:function(e,t){c(e,function(e){var r=Object(u.a)(e.blockBounds,4),n=r[0],a=r[1],o=r[2],i=r[3];t({width:o-n,height:i-a})},{metricsOnly:!0})},loadFont:s}}],init:function(e,t,r,n,a){var o=e.sdfExponent,i=e.sdfMargin,s=e.defaultFontURL;return a(t,n(r,{sdfExponent:o,sdfMargin:i}),{defaultFontURL:s})}}),Z=Object(U.b)({name:"TextBuilder",dependencies:[Y,U.a],init:function(e,t){return function(r){var n=new t;return e.process(r,n.resolve),n}},getTransferables:function(e){var t=[e.glyphBounds.buffer,e.glyphAtlasIndices.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.newGlyphSDFs&&e.newGlyphSDFs.forEach(function(e){t.push(e.textureData.buffer)}),t}}),q=function(){var e={};var t=new S.Vector3,r=function(r){Object(y.a)(i,r);var o=Object(b.a)(i);function i(){var e;return Object(m.a)(this,i),(e=o.call(this)).detail=1,e.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],e.boundingSphere=new S.Sphere,e.boundingBox=new S.Box3,e}return Object(g.a)(i,[{key:"computeBoundingSphere",value:function(){}},{key:"computeBoundingBox",value:function(){}},{key:"updateGlyphs",value:function(e,r,o,i,s){n(this,"aTroikaGlyphBounds",e,4),n(this,"aTroikaGlyphIndex",r,1),n(this,"aTroikaGlyphColor",s,3),this._chunkedBounds=i,a(this,r.length);var c=this.boundingSphere;c.center.set((o[0]+o[2])/2,(o[1]+o[3])/2,0),c.radius=c.center.distanceTo(t.set(o[0],o[1],0));var u=this.boundingBox;u.min.set(o[0],o[1],0),u.max.set(o[2],o[3],0)}},{key:"applyClipRect",value:function(e){var t=this.getAttribute("aTroikaGlyphIndex").count,r=this._chunkedBounds;if(r)for(var n=r.length;n--;){t=r[n].end;var o=r[n].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}a(this,t)}},{key:"detail",set:function(t){var r=this;if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);var n=function(t){var r=e[t];return r||(r=e[t]=new S.PlaneBufferGeometry(1,1,t,t).translate(.5,.5,0)),r}(t);["position","normal","uv"].forEach(function(e){r.attributes[e]=n.attributes[e].clone()}),this.setIndex(n.getIndex().clone())}},get:function(){return this._detail}}]),i}(S.InstancedBufferGeometry);function n(e,t,r,n){var a=e.getAttribute(t);r?a&&a.array.length===r.length?(a.array.set(r),a.needsUpdate=!0):(e.setAttribute(t,new S.InstancedBufferAttribute(r,n)),delete e._maxInstanceCount,e.dispose()):a&&e.deleteAttribute(t)}function a(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return r.prototype.setAttribute||(r.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),r}(),K="\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",Q="\nvec4 bounds = aTroikaGlyphBounds;\nvec4 outlineBounds = vec4(bounds.xy - uTroikaDistanceOffset, bounds.zw + uTroikaDistanceOffset);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerGlyph = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerGlyph * vec2(\n  mod(aTroikaGlyphIndex, txCols),\n  floor(aTroikaGlyphIndex / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerGlyph);\n"),$="\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of encoding in SDFGenerator.js\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  return texture2D(uTroikaSDFTexture, textureUV).r;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetTextAlpha(float distanceOffset) {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n    \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ","\n  \n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n  ","\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aaDist = length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  float aaDist = vTroikaGlyphDimensions.x / 64.0;\n  #endif\n  \n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n  \n  return alpha;\n}\n"),J="\nfloat alpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetTextAlpha(uTroikaDistanceOffset);\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\ngl_FragColor.a *= alpha;\n#endif\n  \nif (alpha == 0.0) {\n  discard;\n}\n";var ee=function(){var e=new S.MeshBasicMaterial({color:16777215,side:S.DoubleSide,transparent:!0}),t=new S.Matrix4,r=new S.Vector3,n=new S.Vector3,a=[],o=new S.Vector3,i="+x+y";function s(e){return Array.isArray(e)?e[0]:e}var c=new S.Mesh(new S.PlaneBufferGeometry(1,1).translate(.5,.5,0),e),l={type:"syncstart"},f={type:"synccomplete"},d=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],h=d.concat("material","color","depthOffset","clipRect","orientation","glyphGeometryDetail"),U=function(d){Object(y.a)(w,d);var U=Object(b.a)(w);function w(){var e;Object(m.a)(this,w);var t=new q;return(e=U.call(this,t,null)).text="",e.anchorX=0,e.anchorY=0,e.font=null,e.fontSize=.1,e.letterSpacing=0,e.lineHeight="normal",e.maxWidth=1/0,e.overflowWrap="normal",e.textAlign="left",e.textIndent=0,e.whiteSpace="normal",e.material=null,e.color=null,e.colorRanges=null,e.outlineWidth=0,e.outlineColor=0,e.depthOffset=0,e.clipRect=null,e.orientation=i,e.glyphGeometryDetail=1,e.sdfGlyphSize=null,e.debugSDF=!1,e}return Object(g.a)(w,[{key:"sync",value:function(e){var t=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(l),H({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},function(r){t._isSyncing=!1,t._textRenderInfo=r,t.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.blockBounds,r.chunkedBounds,r.glyphColors);var n=t._queuedSyncs;n&&(t._queuedSyncs=null,t._needsSync=!0,t.sync(function(){n.forEach(function(e){return e&&e()})})),t.dispatchEvent(f),e&&e()})))}},{key:"onBeforeRender",value:function(e,t,r,n,a,o){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"_prepareForRender",value:function(e){var a=e.isTextOutlineMaterial,s=e.uniforms,c=this.textRenderInfo;if(c){var l=c.sdfTexture,f=c.blockBounds;s.uTroikaSDFTexture.value=l,s.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),s.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,s.uTroikaSDFExponent.value=c.sdfExponent,s.uTroikaTotalBounds.value.fromArray(f),s.uTroikaUseGlyphColors.value=!!c.glyphColors;var d=0;if(a){var h=this.outlineWidth;if("string"===typeof h){var p=h.match(/^([\d.]+)%$/),v=p?parseFloat(p[1]):NaN;h=(isNaN(v)?0:v/100)*this.fontSize}d=h}s.uTroikaDistanceOffset.value=d;var m=this.clipRect;if(m&&Array.isArray(m)&&4===m.length)s.uTroikaClipRect.value.fromArray(m);else{var g=100*(this.fontSize||.1);s.uTroikaClipRect.value.set(f[0]-g,f[1]-g,f[2]+g,f[3]+g)}this.geometry.applyClipRect(s.uTroikaClipRect.value)}s.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;var y=a?this.outlineColor||0:this.color;if(null==y)delete e.color;else{var b=e.hasOwnProperty("color")?e.color:e.color=new S.Color;y===b._input&&"object"!==typeof y||b.set(b._input=y)}var U=this.orientation||i;if(U!==e._orientation){var x=s.uTroikaOrient.value,w=(U=U.replace(/[^-+xyz]/g,""))!==i&&U.match(/^([-+])([xyz])([-+])([xyz])$/);if(w){var _=Object(u.a)(w,5),T=_[1],k=_[2],C=_[3],O=_[4];r.set(0,0,0)[k]="-"===T?1:-1,n.set(0,0,0)[O]="-"===C?-1:1,t.lookAt(o,r.cross(n),n),x.setFromMatrix4(t)}else x.identity();e._orientation=U}}},{key:"raycast",value:function(e,r){var n=this.textRenderInfo;if(n){var o=n.blockBounds;c.matrixWorld.multiplyMatrices(this.matrixWorld,t.set(o[2]-o[0],0,0,o[0],0,o[3]-o[1],0,o[1],0,0,1,0,0,0,0,1)),a.length=0,c.raycast(e,a);for(var i=0;i<a.length;i++)a[i].object=this,r.push(a[i])}}},{key:"copy",value:function(e){var t=this;return Object(p.a)(Object(v.a)(w.prototype),"copy",this).call(this,e),h.forEach(function(r){t[r]=e[r]}),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"textRenderInfo",get:function(){return this._textRenderInfo||null}},{key:"material",get:function(){var t=this._derivedMaterial,r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===r||(t=this._derivedMaterial=function(e){var t=F(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new S.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new S.Vector4(0,0,0,0)},uTroikaClipRect:{value:new S.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOrient:{value:new S.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:K,vertexTransform:Q,fragmentDefs:$,fragmentColorTransform:J,customRewriter:function(e){var t=e.vertexShader,r=e.fragmentShader,n=/\buniform\s+vec3\s+diffuse\b/;return n.test(r)&&(r=r.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(t)||(t=t.replace(x,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:r}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get:function(){return this.side},set:function(){}}}),t}(r),r.addEventListener("dispose",function e(){r.removeEventListener("dispose",e),t.dispose()})),this.outlineWidth){var n=t._outlineMtl;return n||((n=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}})).isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,t.addEventListener("dispose",function e(){t.removeEventListener("dispose",e),n.dispose()})),[n,t]}return t},set:function(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}},{key:"glyphGeometryDetail",get:function(){return this.geometry.detail},set:function(e){this.geometry.detail=e}},{key:"customDepthMaterial",get:function(){return s(this.material).getDepthMaterial()}},{key:"customDistanceMaterial",get:function(){return s(this.material).getDistanceMaterial()}}]),w}(S.Mesh);d.forEach(function(e){var t="_private_"+e;Object.defineProperty(U.prototype,e,{get:function(){return this[t]},set:function(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})});var w=!1;return Object.defineProperty(U.prototype,"anchor",{get:function(){return this._deprecated_anchor},set:function(e){this._deprecated_anchor=e,w||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),w=!0),Array.isArray(e)?(this.anchorX="".concat(100*(+e[0]||0),"%"),this.anchorY="".concat(100*(+e[1]||0),"%")):this.anchorX=this.anchorY=0}}),U}();new WeakMap;new WeakMap;var te=r(830),re=r(775),ne=r(4),ae=r(16),oe=r(1092),ie=r.n(oe),se=(r(1093),["#1289A7","#778beb","#22a6b3","#5758BB","#cf6a87","#e77f67","#786fa6","#FDA7DF","#4b7bec","#778ca3","#12CBC4"]),ce=(Object(ae.fromPairs)([{slug:"LT2",label:"Less than 2 years",color:"#e77f67"},{slug:"2T5",label:"Two to five years",color:"#cf6a87"},{slug:"5T10",label:"Five to ten years",color:"#778beb"},{slug:"GT10",label:"Greater than 10 years",color:"#786fa6"},{slug:"UNDF",label:"No time scale specified (1995-1998)",color:"#778ca3"},{slug:"INTP",label:"Interpolated values",color:"#778ca3"}].map(function(e){return[e.slug,e.color]})),["Artificial Intelligence","Human-Computer Interface","Methodology","Software Architecture","Communications","Networking Technology","Mobile Technology","Computer Architecture","Information Technology","Platforms","Web Technology","Cyber Security","Financial Technology","Display Technology","Wireless Technology","Analytics","Energy Technology","Sensing/Tracking","Physical Actuation","Manufacturing","Vehicle Technology"]),ue=Object(ae.fromPairs)(ce.map(function(e,t){return[e,se[t%se.length]]})),le=9,fe=Object(ne.range)(1995,2020),de=Object(ne.scaleLinear)().domain([fe[0],fe.slice(-1)[0]]).range([0,le]),he=(t.default=function(){var e=Object(l.useState)([]),t=Object(u.a)(e,2),r=t[0],n=t[1],a=Object(l.useState)(null),d=Object(u.a)(a,2),h=d[0],p=d[1],v=Object(l.useState)(ce),m=Object(u.a)(v,2),g=m[0],y=m[1],b=function(){var e=Object(c.a)(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.csv)(ie.a);case 2:t=e.sent,r=t.map(function(e,t){var r=!1,n=fe.map(function(t){var n=e["dist".concat(t)];if(!n||!Number.isFinite(+n))return r?100:0;var a=Math.round(100*+n);return r=!0,a}),a=n.map(function(e,t){return[e,t]}).filter(function(e){return e[0]})[0][1],o=0,c=[];n.forEach(function(e,t){var r=Object(u.a)(ye[e],2),n=r[0],a=r[1],l=de(fe[t]),f=new S.Vector3(n,a,l);Math.abs(o-e)>1&&Ce(o,e).map(function(e){var t=Object(i.a)(S.Vector3,Object(s.a)(ye[e]).concat([l]));c.push(t)}),c.push(f),o=e});var l=new S.CatmullRomCurve3(c);return{name:e["Unified Technology Name"],pointIndex:n,names:fe.map(function(t){return e["name".concat(t)]}),time:fe.map(function(t){return e["time".concat(t)]}),category:e["Technology Category"],color:ue[e["Technology Category"]],path:l,i:t,firstYearIndex:a}}),n(r),p(r[0].name);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)(function(){b()},[]);var U=Object(l.useMemo)(function(){return 1==g.length?r.filter(function(e){return g[0]==e.category}):r.filter(function(e){return e.name==h})},[h,g.join(", ")]);return f.a.createElement("div",{className:"HypeCycle"},f.a.createElement(_e,{data:r,hoveredDot:h,setHoveredDot:p}),f.a.createElement(ke,{data:r,showingCategories:g,setShowingCategories:y}),!!h&&f.a.createElement("div",{className:"HypeCycle__tooltip"},h),f.a.createElement("div",{className:"HypeCycle__contents"},f.a.createElement(ve,Object.assign({data:U},{showingCategories:g,hoveredDot:h,setHoveredDot:p}))),f.a.createElement("div",{className:"HypeCycle__attr"},"This is a visualization of how new technologies traverse ",f.a.createElement("a",{href:"https://www.gartner.com/en/documents/3887767",target:"_blank",rel:"noopener"},"the Gartner Hype Cycle"),".",f.a.createElement("br",null),"Data and original idea from ",f.a.createElement("a",{href:"https://vimeo.com/464835556",target:"_blank",rel:"noopener"},"Mark Mine"),"."))},{fov:75,near:.1,far:1e3,"position.z":2}),pe=function(){var e=Object(h.g)(),t=e.camera,r=e.gl,n=e.invalidate,a=Object(l.useRef)();return Object(h.f)(function(){return a.current.update()}),Object(l.useEffect)(function(){a.current.addEventListener("change",n)},[]),f.a.createElement("orbitControls",{ref:a,args:[t,r.domElement]})};function ve(e){e.vertices,e.color;var t=e.data,r=e.showingCategories,a=e.hoveredDot,o=e.setHoveredDot,i=Object(n.a)(e,["vertices","color","data","showingCategories","hoveredDot","setHoveredDot"]),s=Object(l.useState)([]),c=Object(u.a)(s,2);c[0],c[1];return f.a.createElement(h.a,Object.assign({camera:he,pixelRatio:window.devicePixelRatio},i),f.a.createElement(pe,null),f.a.createElement("group",null,f.a.createElement("pointLight",{position:[0,0,4],color:"#fff",intensity:.3}),f.a.createElement("pointLight",{position:[-2,0,-2],color:"#fff",intensity:.3}),f.a.createElement("pointLight",{position:[3,3,3],color:"#12CBC4",intensity:.1}),f.a.createElement("ambientLight",{color:"0xFFC312",intensity:.4}),f.a.createElement("ambientLight",{color:"#5758BB",intensity:.4}),f.a.createElement("mesh",{"rotation-x":.5*Math.PI,position:[0,.4*-le,0]},f.a.createElement("planeGeometry",{attach:"geometry",args:[30,30]}),f.a.createElement("meshBasicMaterial",{attach:"material",color:"#fff",side:S.BackSide})),fe.map(function(e,t){return!(t%5)&&f.a.createElement(ee,{key:e,position:[0,.2*-le,de(e)-le],text:e,color:"#292e31",fontSize:"0.3",anchorX:"right",anchorY:"middle"})}),f.a.createElement("group",{position:[-le/2,.4*-le,-le]},fe.map(function(e){return f.a.createElement(we,{key:e,z:de(e)})}),t.map(function(e){return f.a.createElement(Se,{key:e.name,path:e.path,color:e.color,isHovered:a==e.name&&1==r.length,onHover:function(t){return function(e){o(e.name)}(e)}})}),f.a.createElement(be,null))))}Object(h.d)({OrbitControls:re.a});var me={steps:2,depth:le,bevelEnabled:!0,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:10,curveSegments:60},ge=new S.Shape;ge.moveTo(0,0),ge.bezierCurveTo.apply(ge,Object(s.a)([1.185,0,1.226,5.496,2.121,5.496].map(function(e){return 1*e}))),ge.bezierCurveTo.apply(ge,Object(s.a)([3.017,5.496,2.493,1.075,3.939,1.075].map(function(e){return 1*e}))),ge.bezierCurveTo.apply(ge,Object(s.a)([5.386,1.075,6.928,3.113,10,3.113].map(function(e){return 1*e}))),ge.lineTo.apply(ge,Object(s.a)([10,0].map(function(e){return 1*e})));var ye=Object(ne.range)(0,1.01,.01).map(function(e){var t=ge.getPointAt(e);return t?[t.x,t.y]:null}),be=function(){return f.a.createElement("mesh",null,f.a.createElement("extrudeGeometry",{attach:"geometry",args:[ge,me]}),f.a.createElement("meshLambertMaterial",{attach:"material",color:"#fff",transparent:"true",opacity:"0.5",side:S.DoubleSide}))},Se=function(e){var t=e.path,r=e.color,n=e.isHovered,a=e.onHover,o=Object(l.useMemo)(function(){return new S.TubeGeometry(t,120,.03,60,!0)},[t]);return f.a.createElement(d.a.group,{onPointerOver:a},f.a.createElement("mesh",{geometry:o},f.a.createElement(d.a.lineBasicMaterial,{attach:"material",color:n?"#000":r})))},Ue=new S.CatmullRomCurve3(ye.map(function(e){return Object(i.a)(S.Vector3,Object(s.a)(e).concat([0]))})),xe=new S.TubeGeometry(Ue,120,.01,60,!0),we=function(e){var t=e.z;return f.a.createElement("group",{"position-z":t},f.a.createElement("mesh",{geometry:xe},f.a.createElement("lineBasicMaterial",{attach:"material",color:"#fff"})))},_e=Object(l.memo)(function(e){var t=e.data,r=e.hoveredDot,n=e.setHoveredDot,a=Object(l.useState)(!1),o=Object(u.a)(a,2),i=o[0],s=o[1],c=Object(l.useRef)();Object(l.useEffect)(function(){if(!i&&c.current&&r){var e=c.current.getElementsByClassName("item--".concat(Object(ae.kebabCase)(r)))[0];e&&e.scrollIntoView()}},[r]);var d=Object(l.useMemo)(function(){return t.map(function(e){return{name:e.name,color:e.color,category:e.category}})},[t]);return f.a.createElement("div",{ref:c,className:"HypeCycle__list",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!0)}},f.a.createElement(te.a,null,d.map(function(e){var t=e.name,a=e.color,o=e.category;return f.a.createElement(Te,Object.assign({key:t,isHovered:r==t,onHover:function(){return n(t)}},{name:t,color:a,category:o}))})))}),Te=Object(l.forwardRef)(function(e,t){var r=e.name,n=e.color,a=e.category,o=e.isHovered,i=e.onHover;return f.a.createElement("div",{ref:t,className:"item--".concat(Object(ae.kebabCase)(r)," HypeCycle__list__item HypeCycle__list__item--is-").concat(o?"hovered":"not-hovered"),style:{"--color":n},onMouseEnter:i},f.a.createElement("h6",{className:"HypeCycle__list__item__category"},a),r)}),ke=function(e){var t=e.data,r=e.showingCategories,n=e.setShowingCategories,a=Object(l.useMemo)(function(){return Object(ae.countBy)(t,"category")},[t]),o=Object(l.useMemo)(function(){return[].concat(ce).sort(function(e,t){return a[t]>a[e]?1:-1})},[a]);return f.a.createElement("div",{className:"HypeCycle__categories"},f.a.createElement(te.a,null,o.map(function(e){return f.a.createElement("div",{className:"HypeCycle__categories__item HypeCycle__categories__item--is-".concat(r.includes(e)?"showing":"not-showing"," HypeCycle__categories__item--is-").concat(a[e]?"visible":"not-visible"),key:e,style:{color:ue[e]},onClick:function(){!r.includes(e)||r.length>1?n([e]):n(ce)}},e,f.a.createElement("div",{className:"HypeCycle__categories__item__count"},a[e]))})))},Ce=function(e,t){return e<t?Object(ne.range)(e,t+1):Object(ne.range)(t,e+1).reverse()}},775:function(e,t,r){"use strict";var n=r(623),a=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:n.MOUSE.LEFT,MIDDLE:n.MOUSE.MIDDLE,RIGHT:n.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(a),r.update(),c=s.NONE},this.update=function(){var t=new n.Vector3,o=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),i=o.clone().inverse(),v=new n.Vector3,m=new n.Quaternion;return function(){var e=r.object.position;return t.copy(e).sub(r.target),t.applyQuaternion(o),l.setFromVector3(t),r.autoRotate&&c===s.NONE&&T(2*Math.PI/60/60*r.autoRotateSpeed),l.theta+=f.theta,l.phi+=f.phi,l.theta=Math.max(r.minAzimuthAngle,Math.min(r.maxAzimuthAngle,l.theta)),l.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=d,l.radius=Math.max(r.minDistance,Math.min(r.maxDistance,l.radius)),r.target.add(h),t.setFromSpherical(l),t.applyQuaternion(i),e.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),h.set(0,0,0)),d=1,!!(p||v.distanceToSquared(r.object.position)>u||8*(1-m.dot(r.object.quaternion))>u)&&(r.dispatchEvent(a),v.copy(r.object.position),m.copy(r.object.quaternion),p=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",z,!1),r.domElement.removeEventListener("mousedown",P,!1),r.domElement.removeEventListener("wheel",G,!1),r.domElement.removeEventListener("touchstart",B,!1),r.domElement.removeEventListener("touchend",R,!1),r.domElement.removeEventListener("touchmove",L,!1),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",j,!1)};var r=this,a={type:"change"},o={type:"start"},i={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},c=s.NONE,u=1e-6,l=new n.Spherical,f=new n.Spherical,d=1,h=new n.Vector3,p=!1,v=new n.Vector2,m=new n.Vector2,g=new n.Vector2,y=new n.Vector2,b=new n.Vector2,S=new n.Vector2,U=new n.Vector2,x=new n.Vector2,w=new n.Vector2;function _(){return Math.pow(.95,r.zoomSpeed)}function T(e){f.theta-=e}function k(e){f.phi-=e}var C=function(){var e=new n.Vector3;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),h.add(e)}}(),O=function(){var e=new n.Vector3;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),F=function(){var e=new n.Vector3;return function(t,n){var a=r.domElement===document?r.domElement.body:r.domElement;if(r.object.isPerspectiveCamera){var o=r.object.position;e.copy(o).sub(r.target);var i=e.length();i*=Math.tan(r.object.fov/2*Math.PI/180),C(2*t*i/a.clientHeight,r.object.matrix),O(2*n*i/a.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(C(t*(r.object.right-r.object.left)/r.object.zoom/a.clientWidth,r.object.matrix),O(n*(r.object.top-r.object.bottom)/r.object.zoom/a.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function D(e){r.object.isPerspectiveCamera?d/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function E(e){r.object.isPerspectiveCamera?d*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function M(e){y.set(e.clientX,e.clientY)}function P(e){if(!1!==r.enabled){switch(e.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus(),e.button){case r.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;M(e),c=s.PAN}else{if(!1===r.enableRotate)return;!function(e){v.set(e.clientX,e.clientY)}(e),c=s.ROTATE}break;case r.mouseButtons.MIDDLE:if(!1===r.enableZoom)return;!function(e){U.set(e.clientX,e.clientY)}(e),c=s.DOLLY;break;case r.mouseButtons.RIGHT:if(!1===r.enablePan)return;M(e),c=s.PAN}c!==s.NONE&&(document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",A,!1),r.dispatchEvent(o))}}function I(e){if(!1!==r.enabled)switch(e.preventDefault(),c){case s.ROTATE:if(!1===r.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,v).multiplyScalar(r.rotateSpeed);var t=r.domElement===document?r.domElement.body:r.domElement;T(2*Math.PI*g.x/t.clientHeight),k(2*Math.PI*g.y/t.clientHeight),v.copy(m),r.update()}(e);break;case s.DOLLY:if(!1===r.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,U),w.y>0?D(_()):w.y<0&&E(_()),U.copy(x),r.update()}(e);break;case s.PAN:if(!1===r.enablePan)return;!function(e){b.set(e.clientX,e.clientY),S.subVectors(b,y).multiplyScalar(r.panSpeed),F(S.x,S.y),y.copy(b),r.update()}(e)}}function A(e){!1!==r.enabled&&(document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",A,!1),r.dispatchEvent(i),c=s.NONE)}function G(e){!1===r.enabled||!1===r.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),r.dispatchEvent(o),function(e){e.deltaY<0?E(_()):e.deltaY>0&&D(_()),r.update()}(e),r.dispatchEvent(i))}function j(e){!1!==r.enabled&&!1!==r.enableKeys&&!1!==r.enablePan&&function(e){var t=!1;switch(e.keyCode){case r.keys.UP:F(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:F(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:F(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:F(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function B(e){if(!1!==r.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===r.enableRotate)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY)}(e),c=s.TOUCH_ROTATE;break;case 2:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){if(r.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);U.set(0,a)}if(r.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(o,i)}}(e),c=s.TOUCH_DOLLY_PAN;break;default:c=s.NONE}c!==s.NONE&&r.dispatchEvent(o)}}function L(e){if(!1!==r.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===r.enableRotate)return;if(c!==s.TOUCH_ROTATE)return;!function(e){m.set(e.touches[0].pageX,e.touches[0].pageY),g.subVectors(m,v).multiplyScalar(r.rotateSpeed);var t=r.domElement===document?r.domElement.body:r.domElement;T(2*Math.PI*g.x/t.clientHeight),k(2*Math.PI*g.y/t.clientHeight),v.copy(m),r.update()}(e);break;case 2:if(!1===r.enableZoom&&!1===r.enablePan)return;if(c!==s.TOUCH_DOLLY_PAN)return;!function(e){if(r.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);x.set(0,a),w.set(0,Math.pow(x.y/U.y,r.zoomSpeed)),D(w.y),U.copy(x)}if(r.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(o,i),S.subVectors(b,y).multiplyScalar(r.panSpeed),F(S.x,S.y),y.copy(b)}r.update()}(e);break;default:c=s.NONE}}function R(e){!1!==r.enabled&&(r.dispatchEvent(i),c=s.NONE)}function z(e){!1!==r.enabled&&e.preventDefault()}r.domElement.addEventListener("contextmenu",z,!1),r.domElement.addEventListener("mousedown",P,!1),r.domElement.addEventListener("wheel",G,!1),r.domElement.addEventListener("touchstart",B,!1),r.domElement.addEventListener("touchend",R,!1),r.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",j,!1),this.update()};(a.prototype=Object.create(n.EventDispatcher.prototype)).constructor=a,Object.defineProperties(a.prototype,{center:{get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t.a=a}}]);
//# sourceMappingURL=69.2e8c1657.chunk.js.map