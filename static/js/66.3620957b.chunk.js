(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1121:function(e,t,n){e.exports=n.p+"ccf7a5d4599818360f27d84307f2820a.csv"},1122:function(e,t,n){},1302:function(e,t,n){"use strict";n.r(t);var r=n(55),i=n(22),o=n.n(i),a=n(257),c=n(6),s=n(0),u=n.n(s),f=n(4),h=n(16),d=n(1121),l=n.n(d),v=n(630),p=n(12),b=(n(1122),{"American Indian, Aleut, or Eskimo:":"Other, Non-Hispanic","Asian or Pacific Islander":"Other, Non-Hispanic","Black or African American":"Black, Non-Hispanic","Other (please specify)":"Other, Non-Hispanic",Refused:"",White:"White, Non-Hispanic"}),g=[["Gender","ppgender","Q4",function(e){return e.replace("[Partner Name] is ","")}],["Race","ppethm","Q6B",function(e){return b[e]||""}],["Political Party","partyid7","Q12"]];t.default=function(){var e=Object(s.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(s.useState)(1),d=Object(c.a)(i,2),b=d[0],x=d[1],j=Object(s.useRef)(),R=Object(s.useRef)(0),S=Object(v.a)(),z=Object(c.a)(S,2),B=z[0],k=z[1],M=Object(s.useRef)(),N=Object(s.useRef)(),A=Object(s.useRef)([]),C=Object(s.useRef)([]),D=g[b][1],F=g[b][2]||D,_=g[b][3]||h.identity;Object(s.useEffect)(function(){Object(a.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.csv(l.a);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}},e)}))()},[]);var q=Object(s.useMemo)(function(){return Object(h.countBy)(n,D)},[n,D]),L=Object.keys(q),H=L.map(function(e,t){return[k.width/2,0,E(O[q[e]])]}),W=T(H,k);return j.current&&j.current==D||function(){if(n.length&&W&&W.length){var e={};A.current=n.map(function(t){var n=L.indexOf(t[D]),r=L.indexOf(_(t[F])),i=(e[n]||0)+1,o=O[i];e[n]=i;var a=m[n],c=m[r];return[W[n].x+o[0],W[n].y+o[1],a,c]}),R.current=130,j.current=D,N.current&&cancelAnimationFrame(N.current),function e(){R.current-=1,j.current==D&&(R.current<=0||(function(){var e=M.current.getContext("2d");e.clearRect(0,0,k.width,k.height);var t=A.current.map(function(e,t){var n=Object(c.a)(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return[f.interpolate(r,(C.current[t]||{})[0]||k.width/2)(y(R.current,t)),f.interpolate(i,(C.current[t]||{})[1]||k.height/2)(y(R.current,t)),o,a]});t.forEach(function(t){var n=Object(c.a)(t,4),r=n[0],i=n[1],o=n[2],a=n[3];w(e,[r,i],3,o,a)}),W.forEach(function(t,n){var r=t.x,i=t.y,o=t.r,a=L[n]||'" "',c=r-2*a.length;w(e,[c-5,i-o-10-3],6,m[n],"white"),e.font="13px sans-serif bold",e.fillStyle="black",e.fillText(a,c,i-o-10)}),C.current=t}(),N.current=requestAnimationFrame(e)))}()}}(),u.a.createElement("div",{className:"Dating"},u.a.createElement("div",{className:"Dating__viz",ref:B},u.a.createElement("canvas",{width:k.width,height:k.height,ref:M})),u.a.createElement("div",{className:"Dating__content"},u.a.createElement("h1",null,"Dating survey"),u.a.createElement("h6",null,"Left side = surveyee, right side = partner"),u.a.createElement("select",{defaultValue:b,onChange:function(e){return x(e.target.value)}},g.map(function(e,t){var n=Object(c.a)(e,1)[0];return u.a.createElement("option",{value:t},n)})),L.map(function(e,t){return u.a.createElement("div",{className:"Dating__group",key:e,style:{color:m[t]}},e||'" "')}),u.a.createElement("p",{className:"Dating__note"},"Using data from ",u.a.createElement(p.a,{to:"https://data.stanford.edu/hcmst2017"},"How Couples Meet and Stay Together 2017"))))};var m=["#0fb9b1","#778beb","#e77f67","#FDA7DF","#cf6a87","#58B19F","#A3CB38","#786fa6","#4b7bec","#778ca3"],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=0;return Object(h.times)(e,function(e){var n=4.6*Math.sqrt(e+1);return t+=8.2*Math.asin(1/n),[Math.cos(t)*n,Math.sin(t)*n]})}(),w=function(e,t){var n=Object(c.a)(t,2),r=n[0],i=n[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black",s=arguments.length>4?arguments[4]:void 0,u=1.3*o,f=o;e.moveTo(r+.2,i),e.beginPath(),e.moveTo(r+.2,i),e.quadraticCurveTo(r+.2,i-f,r-.8*u,i-f),e.quadraticCurveTo(r-1.5*u,i-f/2,r+.2,i+f),e.fillStyle=a,e.fill(),e.moveTo(r-.2,i),e.beginPath(),e.moveTo(r-.2,i),e.quadraticCurveTo(r-.2,i-f,r+.8*u,i-f),e.quadraticCurveTo(r+1.5*u,i-f/2,r-.2,i+f),e.fillStyle=s||a,e.fill()},y=function(e,t){return f.easeSinInOut(Math.max(0,Math.min(1,e/130+t/3e4)))},E=function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},T=function(e,t){var n=f.forceSimulation(e).force("x",f.forceX(function(e){return Object(c.a)(e,1)[0]}).strength(.2)).force("y",f.forceY(t.height/2).strength(.2)).force("collide",f.forceCollide(function(e){var t=Object(c.a)(e,3);t[0],t[1];return t[2]+19})).force("center",f.forceCenter(t.width/2,t.height/2)).stop();return Object(h.times)(10,function(){return n.tick()}),n.nodes().map(function(t,n){return Object(r.a)(Object(r.a)({},t),{},{r:e[n][2]})})}},629:function(e,t,n){"use strict";var r,i,o="undefined"===typeof window?{}:window,a=[],c=function(e){if(!r){var t=document.createTextNode("");new MutationObserver(function(){return a.splice(0).forEach(function(e){return e()})}).observe(t,{characterData:!0}),r=function(){t.textContent=""}}a.push(e),r()},s={attributes:!0,characterData:!0,childList:!0,subtree:!0},u=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],f=!1,h=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t,n=this;f||(f=!0,t=function(){var t=!1;try{t=F()}finally{if(f=!1,!q())return;t?n.run(60):e?n.run(e-1):n.start()}},c(function(){requestAnimationFrame(t)}))},e.prototype.schedule=function(){this.stop(),this.run(12)},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,s)};document.body?t():o.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),u.forEach(function(t){return o.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),u.forEach(function(t){return o.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}());!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box"}(i||(i={}));var d=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),l=function(e){return e instanceof SVGElement&&"getBBox"in e},v=function(e){if(l(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||e.getClientRects().length)},p=new Map,b=/auto|scroll/,g=/^tb|vertical/,m=/msie|trident/i.test(o.navigator&&o.navigator.userAgent),O=function(e){return parseFloat(e||"0")},w=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},y=Object.freeze({borderBoxSize:w(),contentBoxSize:w(),contentRect:new d(0,0,0,0)}),E=function(e){if(p.has(e))return p.get(e);if(v(e))return p.set(e,y),y;var t=getComputedStyle(e),n=l(e)&&e.getBBox(),r=!m&&"border-box"===t.boxSizing,i=g.test(t.writingMode||""),o=!n&&b.test(t.overflowY||""),a=!n&&b.test(t.overflowX||""),c=n?0:O(t.paddingTop),s=n?0:O(t.paddingRight),u=n?0:O(t.paddingBottom),f=n?0:O(t.paddingLeft),h=n?0:O(t.borderTopWidth),E=n?0:O(t.borderRightWidth),T=n?0:O(t.borderBottomWidth),x=f+s,j=c+u,R=(n?0:O(t.borderLeftWidth))+E,S=h+T,z=a?e.offsetHeight-S-e.clientHeight:0,B=o?e.offsetWidth-R-e.clientWidth:0,k=r?x+R:0,M=r?j+S:0,N=n?n.width:O(t.width)-k-B,A=n?n.height:O(t.height)-M-z,C=N+x+B+R,D=A+j+z+S,F=Object.freeze({borderBoxSize:w(C,D,i),contentBoxSize:w(N,A,i),contentRect:new d(f,c,N,A)});return p.set(e,F),F},T=function(e,t){var n=E(e),r=n.borderBoxSize,o=n.contentBoxSize;return t===i.BORDER_BOX?r:o},x=function(){function e(e,t){this.target=e,this.observedBox=t||i.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=T(this.target,this.observedBox);return e=this.target,l(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),j=function(){return function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}}(),R="ResizeObserver loop completed with undelivered notifications.",S=function(){return function(e){var t=E(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=t.borderBoxSize,this.contentBoxSize=t.contentBoxSize}}(),z=function(e){if(v(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},B=function(){var e=1/0,t=[];M.forEach(function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach(function(t){var n=new S(t.target),i=z(t.target);r.push(n),t.lastReportedSize=T(t.target,t.observedBox),i<e&&(e=i)}),t.push(function(){n.callback.call(n.observer,r,n.observer)}),n.activeTargets.splice(0,n.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},k=function(e){p.clear(),M.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(n){n.isActive()&&(z(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))})})},M=[],N=new Map,A=0,C=function(e){!A&&e>0&&h.start(),!(A+=e)&&h.stop()},D=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},F=function(){var e=0;for(k(e);M.some(function(e){return e.activeTargets.length>0});)e=B(),k(e);return M.some(function(e){return e.skippedTargets.length>0})&&function(){var e;"function"===typeof ErrorEvent?e=new ErrorEvent("error",{message:R}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=R),window.dispatchEvent(e)}(),e>0},_=function(){function e(){}return e.connect=function(e,t){var n=new j(e,t);M.push(n),N.set(e,n)},e.observe=function(e,t,n){if(N.has(e)){var r=N.get(e);D(r.observationTargets,t)<0&&(r.observationTargets.push(new x(t,n&&n.box)),C(1),h.schedule())}},e.unobserve=function(e,t){if(N.has(e)){var n=N.get(e),r=D(n.observationTargets,t);r>=0&&(n.observationTargets.splice(r,1),C(-1))}},e.disconnect=function(e){if(N.has(e)){var t=N.get(e);M.splice(M.indexOf(t),1),N.delete(e),C(-t.observationTargets.length)}},e}(),q=function(){return!!A},L=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!==typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");_.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(e instanceof Element===!1)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");_.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(e instanceof Element===!1)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");_.unobserve(this,e)},e.prototype.disconnect=function(){_.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();t.a=L},630:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(6),i=n(55),o=n(0),a=n(128),c=n.n(a),s=n(629),u=(c.a.shape({height:c.a.number,width:c.a.number,marginTop:c.a.number,marginRight:c.a.number,marginBottom:c.a.number,marginLeft:c.a.number}),function(e){var t=Object(i.a)({marginTop:40,marginRight:30,marginBottom:40,marginLeft:75},e);return Object(i.a)(Object(i.a)({},t),{},{boundedHeight:Math.max(t.height-t.marginTop-t.marginBottom,0),boundedWidth:Math.max(t.width-t.marginLeft-t.marginRight,0)})}),f=function(e){var t=Object(o.useRef)(),n=u(e),a=Object(o.useState)(0),c=Object(r.a)(a,2),f=c[0],h=c[1],d=Object(o.useState)(0),l=Object(r.a)(d,2),v=l[0],p=l[1];Object(o.useEffect)(function(){if(n.width&&n.height)return[t,n];var e=t.current,r=new s.a(function(e){if(Array.isArray(e)&&e.length){var t=e[0];f!=t.contentRect.width&&h(t.contentRect.width),v!=t.contentRect.height&&p(t.contentRect.height)}});return r.observe(e),function(){return r.unobserve(e)}},[]);var b=u(Object(i.a)(Object(i.a)({},n),{},{width:n.width||f,height:n.height||v}));return[t,b]}}}]);
//# sourceMappingURL=66.3620957b.chunk.js.map