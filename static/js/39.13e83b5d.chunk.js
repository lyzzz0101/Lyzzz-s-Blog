(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1250:function(e,t,n){},1251:function(e,t,n){},1252:function(e,t,n){e.exports=n.p+"static/media/yoda1.7c6b8c6a.png"},1253:function(e,t,n){e.exports=n.p+"static/media/yoda2.44e9b0d0.png"},1254:function(e,t,n){e.exports=n.p+"static/media/yoda3.218fcec4.png"},1255:function(e,t,n){e.exports=n.p+"static/media/scmp.e3e870d6.png"},1256:function(e,t,n){e.exports=n.p+"static/media/meta.cd73ea97.png"},1257:function(e,t,n){},1324:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(6),c=n(0),o=n.n(c),i=n(179),l=n(16),u=n(46),s=n(12),m=n(95),f=n(33),d=n(34),h=n(178);n(370);var p=function(e){var t=e.padding,n=void 0===t?"0":t,a=e.onChange,r=void 0===a?l.noop:a,i=e.className,u=e.children,s=Object(d.a)(e,["padding","onChange","className","children"]),m=Object(h.g)(),f=Object(c.useRef)(),p=Object(c.useRef)(),g=Object(c.useCallback)(Object(l.throttle)(function(e){if(m){var t=e[0].isIntersecting;r(t)}},60));return Object(c.useEffect)(function(){return m&&IntersectionObserver&&(f.current=new IntersectionObserver(g,{}),f.current.observe(p.current),f.current.USE_MUTATION_OBSERVER=!1),function(){f.current&&f.current.disconnect()}},[]),o.a.createElement("div",Object.assign({},s,{className:i||"",style:{position:"relative"}}),o.a.createElement("div",Object.assign({ref:p,style:{position:"absolute",top:"calc(".concat(n,")"),right:0,bottom:"calc(".concat(n,")"),left:0,pointerEvents:"none"}},s)),u)},g=n(24),b=n(173),E=n(340),v=n(341),y=n(339),w=n(335),x=n(336),C=n(337),_=n(338),O=n(215);function j(e){return function(){return e}}function V(e){return 1e-6*(e()-.5)}function k(e){return e.x+e.vx}function N(e){return e.y+e.vy}var F=[["x",E.a,[{name:"x",min:-300,max:300,defaultValue:0,options:[{name:"buckets",value:function(e,t){return t%5*150-300}},{name:"in a line",value:function(e,t){return 5*t-300}}]},{name:"strength",min:0,max:1,step:.05,defaultValue:.1,format:"0.2f"}],"forceX"],["y",v.a,[{name:"y",min:-300,max:300,defaultValue:0,options:[{name:"buckets",value:function(e,t){return t%5*150-300}},{name:"in a line",value:function(e,t){return 5*t-300}}]},{name:"strength",min:0,max:1,step:.05,defaultValue:.1,format:"0.2f"}],"forceY"],["radial",y.a,[{name:"x",min:-300,max:300,defaultValue:0},{name:"y",min:-300,max:300,defaultValue:0},{name:"radius",min:0,max:300,defaultValue:100},{name:"strength",min:0,max:1,step:.05,defaultValue:.1,format:"0.2f"}],"forceRadial"],["center",w.a,[{name:"x",min:-300,max:300,defaultValue:0},{name:"y",min:-300,max:300,defaultValue:0},{name:"strength",min:0,max:1,step:.05,defaultValue:1,format:"0.2f"}],"forceCenter"],["collide",x.a,[{name:"radius",min:0,max:50,defaultValue:13},{name:"iterations",min:0,max:50,defaultValue:1},{name:"strength",min:0,max:1,step:.05,defaultValue:1,format:"0.2f"}],"forceCollide"],["link",C.a,[{name:"links",type:"array",getDefaultValue:S,options:[{name:"random links",getValue:S}]},{name:"distance",min:0,max:500,defaultValue:30},{name:"iterations",min:0,max:50,defaultValue:1},{name:"strength",min:0,max:1,step:.05,defaultValue:.1,format:"0.2f"}],"forceLink"],["many body",_.a,[{name:"theta",min:0,max:50,defaultValue:.81},{name:"distanceMin",min:0,max:50,defaultValue:1},{name:"distanceMax",min:0,max:1e3,defaultValue:500},{name:"strength",min:-100,max:100,step:1,defaultValue:-30,format:"0.2f"}]],["rect collide",function(e,t){var n,a,r,c,o=1,i=10,l=1;function u(){for(var e,t=0;t<l;++t)e=Object(O.a)(n,k,N).visitAfter(s),n.forEach(function(t){e.visit(function(e,n,a,c,o){return r(e,0,0,0,0,t)})});function r(e,t,n,r,c,l){var u=e.data,s=!1;if(!u)return s;if(u&&u!==l&&u.index>l.index){var m=l.x-u.x-u.vx,f=l.y-u.y-u.vy,d=Math.abs(m),h=Math.abs(f),p=i+(u.width+l.width)/2,g=i+(u.height+l.height)/2,b=u.width+l.width,E=u.height+l.height,v=Math.pow(m,2)+Math.pow(f,2);(v<Math.pow(b,2)||v<Math.pow(E,2))&&(0===m&&(m=V(a),v+=Math.pow(m,2)),0===f&&(f=V(a),v+=Math.pow(f,2)),m*=(b-(d-p))/Math.sqrt(v)*o,f*=(E-(h-g))/Math.sqrt(v)*o,l.vx+=m*(b=Math.pow(u.width,2)/(Math.pow(l.width,2)+Math.pow(u.width,2))),l.vy+=f*(E=Math.pow(u.height,2)/(Math.pow(l.height,2)+Math.pow(u.height,2))),u.vx-=m*(1-b),u.vy-=f*(1-E),s=!0)}}}function s(e){e.data&&(e.width=r[e.data.index],e.height=c[e.data.index]);for(var t=e.width=0;t<4;++t)e[t]&&e[t].width>e.width&&(e.width=e[t].width);for(t=e.height=0;t<4;++t)e[t]&&e[t].height>e.height&&(e.height=e[t].height)}function m(){if(n){var a,o,i=n.length;for(r=new Array(i),c=new Array(i),a=0;a<i;++a)o=n[a],r[o.index]=+e(o,a,n),c[o.index]=+t(o,a,n)}}return"function"!==typeof e&&(e=j(null==e?20:+e)),"function"!==typeof t&&(t=j(null==t?20:+t)),u.initialize=function(e){n=e,a=Math.random,m()},u.iterations=function(e){return arguments.length?(l=+e,u):l},u.strength=function(e){return arguments.length?(o=+e,u):o},u.width=function(t){return arguments.length?(e="function"===typeof t?t:j(+t),m(),u):e},u.height=function(e){return arguments.length?(t="function"===typeof e?e:j(+e),m(),u):t},u.padding=function(e){return arguments.length?(i=+e,u):i},u},[{name:"padding",min:0,max:50,defaultValue:13},{name:"iterations",min:0,max:50,defaultValue:1},{name:"strength",min:0,max:1,step:.05,defaultValue:1,format:"0.2f"}]],["bounds",function(){var e=[],t=1,n=0,a=-100,r=100,c=-100,o=100;function i(){e.forEach(function(e){e.x=Math.max(e.x,a+n),e.x=Math.min(e.x,r-n),e.y=Math.max(e.y,c+n),e.y=Math.min(e.y,o-n)})}return i.initialize=function(t){e=t},i.padding=function(e){return arguments.length?(n=+e,i):n},i.minX=function(e){return arguments.length?(a=+e,i):a},i.maxX=function(e){return arguments.length?(r=+e,i):r},i.minY=function(e){return arguments.length?(c=+e,i):c},i.maxY=function(e){return arguments.length?(o=+e,i):o},i.strength=function(e){return arguments.length?(t=+e,i):t},i},[{name:"minX",min:-500,max:0,defaultValue:-100},{name:"maxX",min:0,max:500,defaultValue:100},{name:"minY",min:-500,max:0,defaultValue:-100},{name:"maxY",min:0,max:500,defaultValue:100},{name:"strength",min:0,max:1,step:.05,defaultValue:1,format:"0.2f"}]]],H=F,M=function(e,t){return Math.floor(e+Math.random()*(t-e))},T=0;function S(){return new Array(50).fill(0).map(function(e,t){var n=Math.random()<.1?M(0,100):T,a=M(0,100);return T=a,{source:n,target:a}})}var L=Object(l.fromPairs)(F.map(function(e){return[e[0],e]})),D=n(630),I=(n(1250),function(e){var t=e.forces,n=void 0===t?[]:t,a=e.numberOfNodes,i=void 0===a?100:a,u=e.forceAttributes,s=e.forceShape,m=e.isRunning,f=e.tickIteration,d=void 0===f?0:f,p=Object(c.useRef)(),g=Object(D.a)({marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),b=Object(r.a)(g,2),E=b[0],v=b[1],y=Object(c.useRef)([]);Object(c.useEffect)(function(){y.current=new Array(i).fill(0).map(function(e){return{width:M(6,60),height:M(6,50)}})},[i]);var w=Object(c.useMemo)(function(){return n.filter(function(e){var t=Object(r.a)(e,3),n=t[0];return t[1],t[2],"link"==n}).map(function(e){var t=Object(r.a)(e,3);return t[0],t[1],t[2]})},[n]),x=R(y.current,n);return Object(h.f)(function(){if(p.current){var e=p.current.getContext("2d");e.clearRect(0,0,v.width,v.height),e.fillStyle="#DB5C6E",y.current.forEach(function(t){var n=t.x,a=t.y,r=t.width,c=t.height,o=n+v.width/2,i=a+v.height/2;e.beginPath(),"circle"==s?(e.arc(o,i,6,0,2*Math.PI,!1),e.fill()):"rect"==s&&e.fillRect(o,i,r,c)});var t=Object(l.flatten)(w.map(function(e){return u[e]?u[e].links.value:[]}));e.strokeStyle="#8b8ba7",t.forEach(function(t){var n=t.source,a=t.target;e.beginPath(),e.moveTo(n.x+v.width/2,n.y+v.height/2),e.lineTo(a.x+v.width/2,a.y+v.height/2),e.stroke()}),m&&x.alpha(1).restart()}},100),Object(c.useEffect)(function(){m?x.alpha(1).restart():x.stop()},[m]),Object(c.useEffect)(function(){x&&x.tick()},[d]),o.a.createElement("div",{className:"D3ForceExample",ref:E},o.a.createElement("canvas",{width:v.width,height:v.height,ref:p}))}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(c.useRef)(Object(b.a)()),a=Object(c.useRef)([]);return Object(c.useEffect)(function(){n.current.nodes(e)},[e]),Object(c.useEffect)(function(){a.current.forEach(function(e){n.current.force(e,null)}),a.current=t.map(function(e){var t=Object(r.a)(e,3);t[0],t[1];return t[2]}),t.forEach(function(e){var t=Object(r.a)(e,3),a=(t[0],t[1]),c=t[2];n.current.force(c,a)})},[t]),n.current},A=n(55),z=n(123),B=n(673),P=(n(638),n(778)),W=(n(1251),function(e){var t=e.forces,n=e.optionNames,i=e.excludedMethods,u=e.isRunning,s=e.onChange,d=e.onSetIsRunning,h=e.onTick,p=e.onAddForce,g=e.forceAttributes,b=e.setForceAttributes,E=(e.forceFunctions,e.setForceFunctions,n.map(function(e){return H.find(function(t){var n=Object(r.a)(t,1)[0];return e==n})}));Object(c.useEffect)(function(){var e=Object(A.a)({},g);t.filter(function(e){var t=Object(r.a)(e,1)[0];return!g[t]}).forEach(function(t){e[t[2]]=y(t)}),Object.keys(e).filter(function(e){return!t.find(function(t){var n=Object(r.a)(t,3),a=(n[0],n[1],n[2]);return e==a})}).forEach(function(t){delete e[t]}),b(e)},[t]);var v=function(e){return"undefined"!=typeof e.defaultValue?e.defaultValue:"function"==typeof e.getDefaultValue?e.getDefaultValue():0},y=function(e){var t=Object(r.a)(e,3),n=t[0],a=t[1],c=(t[2],L[n][2]),o=Object(l.fromPairs)(c.map(function(e){return[e.name,Object(A.a)(Object(A.a)({},e),{},{value:v(e)})]}));return Object.keys(o).forEach(function(t){o[t],o[t]&&(a[t]?a[t](o[t].value):console.log(t,e))}),o};return o.a.createElement("div",{className:"D3ForceForces"},o.a.createElement("div",{className:"D3ForceForces__section"},o.a.createElement("h6",null,"Simulation Control panel"),o.a.createElement("div",{className:"D3ForceForces__controls"},u?o.a.createElement(m.a,{onClick:function(){return d(!1)}},o.a.createElement(f.a,{name:"pause",size:"xs"})):o.a.createElement(m.a,{onClick:function(){return d(!0)}},o.a.createElement(f.a,{name:"play",size:"xs"})),o.a.createElement("div",null,u?"The simulation is running":"The simulation is paused"),!u&&o.a.createElement(m.a,{onClick:h},"Tick"))),o.a.createElement("div",{className:"D3ForceForces__section"},o.a.createElement("h6",null,"Add a force"),o.a.createElement("div",{className:"D3ForceForces__options"},E.map(function(e,t){var n=Object(r.a)(e,1)[0];return o.a.createElement(m.a,{className:"D3ForceForces__option",key:n,onClick:function(){return p(E[t])}},n)}))),o.a.createElement("div",{className:"D3ForceForces__section"},o.a.createElement("h6",null,"Active forces"),o.a.createElement("div",{className:"D3ForceForces__forces"},t.map(function(e,n){var c=Object(r.a)(e,3),l=c[0],u=(c[1],c[2]);return o.a.createElement("div",{className:"D3ForceForces__force",key:l+n},o.a.createElement("div",{className:"D3ForceForces__force__title"},l," force",o.a.createElement(m.a,{onClick:function(){return function(e){var n=[].concat(Object(a.a)(t.slice(0,e)),Object(a.a)(t.slice(e+1)));s(n)}(n)}},o.a.createElement(f.a,{name:"x",size:"xs"}))),o.a.createElement("div",{className:"D3ForceForces__force__attributes"},Object.keys(g[u]||{}).filter(function(e){return!i.includes(e)}).map(function(e){return o.a.createElement(Z,Object.assign({key:e+n,name:e},g[u][e],{onChange:function(a){return function(e,n,a){if(t[e]&&t[e][1][n]){t[e][1][n](a);var r=Object(A.a)({},g);r[t[e][2]][n].value=a,b(r)}}(n,e,a)}}))})))}))))}),Z=function(e){var t=e.name,n=e.value,a=void 0===n?0:n,r=e.min,c=void 0===r?0:r,i=e.max,l=void 0===i?50:i,u=e.step,s=void 0===u?1:u,f=e.format,d=void 0===f?",.0f":f,h=e.options,p=void 0===h?[]:h,g=e.type,b=e.onChange;return o.a.createElement("div",{className:"D3ForceForces__force__attribute"},o.a.createElement("div",{className:"D3ForceForces__force__attribute__top"},o.a.createElement("div",{className:"D3ForceForces__force__attribute__name"},t),"number"==typeof a&&o.a.createElement("div",{className:"D3ForceForces__force__attribute__value"},o.a.createElement(P.a,{number:a,format:Object(z.b)(d)}))),"array"!=g&&o.a.createElement("div",{className:"D3ForceForces__force__attribute__slider D3ForceForces__force__attribute__slider--is-".concat("number"==typeof a?"visible":"disabled")},o.a.createElement(B.b,{value:a,min:c,max:l,step:s,onChange:b})),o.a.createElement("div",{className:"D3ForceForces__force__attribute__options"},p.map(function(e){return o.a.createElement(m.a,{key:e.name,className:"D3ForceForces__force__attribute__option ".concat(a==e.value?"Button--selected":"","\n        "),onClick:function(){return b(e.value||e.getValue())}},e.name)})))},Y=n(1252),X=n.n(Y),U=n(1253),q=n.n(U),J=n(1254),G=n.n(J),K=n(1255),Q=n.n(K),$=n(1256),ee=n.n($),te=n(129),ne=(n(1257),t.default=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],d=t[1],h=Object(c.useState)([]),b=Object(r.a)(h,2),E=b[0],v=b[1],y=Object(c.useState)("circle"),w=Object(r.a)(y,2),x=w[0],C=w[1],_=Object(c.useState)({}),O=Object(r.a)(_,2),j=O[0],V=O[1],k=Object(c.useState)([]),N=Object(r.a)(k,2),F=N[0],H=N[1],M=Object(c.useState)([]),T=Object(r.a)(M,2),S=T[0],D=T[1],R=Object(c.useState)(["strength","iterations"]),A=Object(r.a)(R,2),z=A[0],B=A[1],P=Object(c.useState)(!0),Z=Object(r.a)(P,2),Y=Z[0],X=Z[1],U=Object(c.useState)(0),q=Object(r.a)(U,2),J=q[0],G=q[1],K=Object(c.useState)(!1),$=Object(r.a)(K,2),ce=$[0],oe=$[1];Object(c.useEffect)(function(){var e=(window.location.hash||"").slice(1);e&&function(e){var t=document.querySelector("#".concat(e));if(t){var n=t.getBoundingClientRect().top+window.scrollY-150;Object(te.a)(n,100)}}(e)},[]);var ie=function(e,t){var n=E.find(function(t){return Object(r.a)(t,1)[0]==e});if(!n)return"";var a=n[2];return j[a]&&j[a][t]?j[a][t].value:""},le=function(e){var t=e.map(function(e){return[e[0],e[1](),Object(l.uniqueId)()]});v(t)};return o.a.createElement("div",{className:"D3Force"},o.a.createElement(i.Helmet,null,o.a.createElement("meta",{charSet:"utf-8"}),o.a.createElement("title",null,"Use the d3 force"),o.a.createElement("link",{rel:"canonical",href:"https://wattenberger.com/blog/d3-force"}),o.a.createElement("meta",{property:"og:type",content:"website"}),o.a.createElement("meta",{name:"description",content:"<p>Usually, we position elements on our web pages in static, explicit places. But what if we want to make them feel more alive, or move them based on loose rules? Let's learn how to move particles with forces using d3-force.</p>"}),o.a.createElement("meta",{name:"image",content:ee.a})),o.a.createElement("div",{className:"D3Force__controls D3Force__controls--is-".concat(n?"visible":"hidden"," D3Force__controls--is-").concat(ce?"mobile-showing":"mobile-hidden")},o.a.createElement(m.a,{className:"D3Force__controls__toggle",onClick:function(){return oe(!ce)}},"Show controls"),o.a.createElement(m.a,{className:"D3Force__controls__toggle D3Force__controls__toggle--bottom",onClick:function(){return oe(!1)}},o.a.createElement(f.a,{name:"x",size:"xs"})),o.a.createElement(W,Object.assign({forces:E,optionNames:S,excludedMethods:z,isRunning:Y,onTick:function(){G(J+1)},forceAttributes:j,setForceAttributes:V,forceFunctions:F,onAddForce:function(e){var t=e[0],n=e[1](),r=[].concat(Object(a.a)(E),[[t,n,Object(l.uniqueId)()]]);v(r)},setForceFunctions:H},{onSetIsRunning:X,onChange:v}))),o.a.createElement("div",{className:"D3Force__example"},o.a.createElement(I,{forces:E,forceAttributes:j,forceShape:x,isRunning:Y,tickIteration:J})),o.a.createElement("div",{className:"D3Force__content"},o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D([]),d(!1),X(!0))}},o.a.createElement(ae,null),o.a.createElement("p",null,"Usually, we position elements on our web pages in static, explicit places. But what if we want to make them feel more alive, or move them based on loose rules?"),o.a.createElement("p",null,"Then, we have to ",o.a.createElement("strong",null,"use the force"),". The ",o.a.createElement(s.a,{to:"https://github.com/d3/d3-force"},"d3-force"),"."),o.a.createElement("h2",null,"d3-force"),o.a.createElement("p",null,o.a.createElement(s.a,{to:"https://github.com/d3/d3-force"},"d3-force")," is a module in the ",o.a.createElement(s.a,{to:"https://github.com/d3/d3"},"d3.js"),' API that runs a simulation, moving a set of particles on every "tick".'),o.a.createElement("p",null,"To create a new simulation, we can use ",o.a.createElement(ne,null,"d3.forceSimulation()"),"."),o.a.createElement("p",null,o.a.createElement(ne,null,"d3.forceSimulation()")," takes one parameter: the array of particles that we want to move about. These particles will each be an object:"),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'const particles = [\n  {\n    // particle 1\n    // data about the particle here, for example:\n    date: "2020-11-23",\n  },\n  {\n    // particle 2\n    date: "2020-11-23",\n  },\n  // ...\n]\n\nd3.forceSimulation(particles)'),o.a.createElement("p",null,"To start our particles in a specific location, we can specify that by adding an ",o.a.createElement(ne,null,"x")," and ",o.a.createElement(ne,null,"y")," key to the object. If we don't specify an initial location, our particles will start in a ",o.a.createElement(s.a,{to:"https://observablehq.com/@d3/force-layout-phyllotaxis"},"Phyllotaxis arrangement"),"."),o.a.createElement(u.a,null,"Read about ",o.a.createElement(s.a,{to:"/blog/spirals"},"how a spiral starting position could be beneficial")," (and also how unoriginal I am with article names)"),o.a.createElement("p",null,"Once our simulation is created, we'll move our particles according to a set of ",o.a.createElement("strong",null,"forces"),".")),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x"]),d(!0),le([L.x]),C("circle"))}},o.a.createElement(re,{id:"The x force"},o.a.createElement("p",null,"There are several built-in forces that we can use with a d3-force simulation. The first I'll teach you is the ",o.a.createElement("strong",null,"x force"),"."),o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"x force")," urges our particles to move towards a specific x (horizontal) position."),o.a.createElement("p",null,"Add new ",o.a.createElement("strong",null,"x forces")," (in the ",o.a.createElement("strong",null,"Simulation Control Panel"),") to our active forces, and move the sliders to change the targeted x position."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("x", d3.forceX('.concat(ie("x","x"),"))")),o.a.createElement(u.a,null,"When adding a new force, we call the simulation's ",o.a.createElement(ne,null,".force()")," method, passing two parameters: a name (for later cancelling the force) and the force function itself."),o.a.createElement("p",null,"We can also specify a function, using the provided parameters (the particle, and the index of the particle). Try this by clicking ",o.a.createElement("strong",null,"buckets")," or ",o.a.createElement("strong",null,"in a line"),"."),o.a.createElement("p",null,"But this ",o.a.createElement("strong",null,"x force")," isn't very powerful on its own. Let's learn some other ones! Much to learn you still have, my young padawan."))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y"]),B(["strength","iterations"]),d(!0),le([L.y]),C("circle"))}},o.a.createElement(re,{id:"The y force"},o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"y force")," is very similar to the ",o.a.createElement("strong",null,"x force"),", but moves our particles ",o.a.createElement("i",null,"vertically"),"."),o.a.createElement("p",null,"Try moving the ",o.a.createElement("strong",null,"y force")," around."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("y", d3.forceY('.concat(ie("y","y"),"))")))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide"]),B(["strength","iterations"]),d(!0),X(!0),le([L.collide]),C("circle"))}},o.a.createElement(re,{id:"The collide force"},o.a.createElement("p",null,"This is my favorite force! The ",o.a.createElement("strong",null,"collide force")," checks each particle to see if it's colliding with another particle. If so, it will move both particles away from each other."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("collide", d3.forceCollide('.concat(ie("collide","radius"),"))")),o.a.createElement("p",null,"Our particles have run amok! Let's learn a way to keep them from spreading out too far."))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide"]),B(["iterations"]),d(!0),X(!0),le([L.x,L.y,L.collide]),C("circle"))}},o.a.createElement(re,{id:"Using multiple forces"},o.a.createElement("p",null,"We can use as many ",o.a.createElement("strong",null,"forces")," as we want! Let's add an ",o.a.createElement("strong",null,"x force")," and ",o.a.createElement("strong",null,"y force")," to keep our particles close to the middle of our screen."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("x", d3.forceX('.concat(ie("x","x"),'))\n  .force("y", d3.forceY(').concat(ie("y","y"),'))\n  .force("collide", d3.forceCollide(').concat(ie("collide","radius"),"))")),o.a.createElement("p",null,"Some forces may counteract each other. Control which one is stronger by changing their ",o.a.createElement(ne,null,"strength"),"."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("x", d3.forceX('.concat(ie("x","x"),").strength(").concat(ie("x","strength"),'))\n  .force("y", d3.forceY(').concat(ie("y","y"),").strength(").concat(ie("y","strength"),'))\n  .force("collide", d3.forceCollide(').concat(ie("collide","radius"),").strength(").concat(ie("collide","strength"),"))")))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide"]),B([]),d(!0),X(!1),le([L.x,L.y,L.collide]),C("circle"))}},o.a.createElement(re,{id:"Ticking the simulation"},o.a.createElement("p",null,"The simulation works by running a ",o.a.createElement("strong",null,"tick")," function on every layout frame. We've paused the simulation using ",o.a.createElement(ne,null,"simulation.stop()")," - hit the ",o.a.createElement("strong",null,"tick")," button (in the top left) to run ",o.a.createElement(ne,null,"simulation.tick()")," and step through one frame at a time."),o.a.createElement("p",null,"Our ",o.a.createElement("strong",null,"collide force")," can also run multiple times per frame - set the number of times it runs by changing its ",o.a.createElement(ne,null,"iterations"),". This can help with jittering simulations, where the ",o.a.createElement("strong",null,"collide force")," fights against other forces."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("x", d3.forceX('.concat(ie("x","x"),'))\n  .force("y", d3.forceY(').concat(ie("y","y"),'))\n  .force("collide", d3.forceCollide(').concat(ie("collide","radius"),").iterations(").concat(ie("collide","iterations"),"))")))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide","radial"]),B([]),d(!0),X(!0),le([L.radial]),C("circle"))}},o.a.createElement(re,{id:"The radial force"},o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"radial force")," moves the particles towards the edge of a circle. We can change the ",o.a.createElement(ne,null,"radius")," of that circle, and also its ",o.a.createElement(ne,null,"x")," and ",o.a.createElement(ne,null,"y")," position."),o.a.createElement(u.a,null,"The ",o.a.createElement("strong",null,"radial force")," doesn't evenly space our particles, so sometimes we'll want to add another force (try adding a ",o.a.createElement("strong",null,"collide force"),") to prevent our particles from clumping all in one place."))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide","radial","many body"]),B([]),d(!0),X(!0),le([L["many body"]]),C("circle"))}},o.a.createElement(re,{id:"The many body force"},o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"many body force")," affects how the particles interact ",o.a.createElement("i",null,"with each other")," and is the closest we get to simulate physics - a negative ",o.a.createElement(ne,null,"strength")," mimics repulsion and a positive ",o.a.createElement(ne,null,"strength")," mimics gravity."),o.a.createElement("p",null,"Because this force causes particles to affect each other, we can get interesting behavior like clumping. See if you can cause our particles to glom into distinct groups."))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide","radial","many body","center"]),B([]),d(!0),X(!0),le([L.center]),C("circle"))}},o.a.createElement(re,{id:"The center force"},o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"center force")," may ",o.a.createElement("i",null,"seem like")," a repeat of our ",o.a.createElement("strong",null,"x force")," and ",o.a.createElement("strong",null,"y force"),", but it's actually very different."),o.a.createElement("p",null,"Instead of zooming our particles around, the ",o.a.createElement("strong",null,"center force")," will move the entire particle system so that it's centered at a specific spot. This is helpful for keeping our particles centered in our screen, but not modifying other active forces."))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide","radial","many body","center","link"]),B([]),d(!0),X(!0),le([L.link,L.x,L.y,L["many body"]]),C("circle"))}},o.a.createElement(re,{id:"The link force"},o.a.createElement("p",null,"The ",o.a.createElement("strong",null,"link force")," is great for network diagrams, similar to ",o.a.createElement(s.a,{to:"https://www.scmp.com/infographics/article/1670384/infographic-satellites-network"},"this infographic from the South China Morning Post"),"."),o.a.createElement("br",null),o.a.createElement("img",{src:Q.a,style:{width:"10em"}}),o.a.createElement("p",null,"We pass an array of links (objects with a ",o.a.createElement(ne,null,"source")," and a ",o.a.createElement(ne,null,"target"),") to tell our ",o.a.createElement("strong",null,"link force")," which particles are connected."),o.a.createElement(g.a,{size:"m",hasLineNumbers:!1},'d3.forceSimulation()\n  .force("link", d3.forceLinks([\n    {source: 0, target: 1},\n    {source: 1, target: 2},\n    // ...\n  ]))'),o.a.createElement("p",null,"These values correspond to each particle's ",o.a.createElement(ne,null,"id"),", which defaults to its index in the particles array."))),o.a.createElement(p,{padding:"40vh",onChange:function(e){e&&(D(["x","y","collide","radial","many body","link","center","bounds"]),B([]),d(!0),X(!0),le([L.bounds,L.collide]))}},o.a.createElement(re,{id:"Custom forces"},o.a.createElement("p",null,"Here is where we learn the true power of forces - we can make custom ones to move our particles in any way we can imagine!"),o.a.createElement("p",null,"For example, we could create a ",o.a.createElement("strong",null,"bounding force")," that keeps our particles within x and y positions."),o.a.createElement(u.a,null,"Check out ",o.a.createElement(s.a,{to:"https://github.com/Wattenberger/Wattenberger-2019/blob/master/src/components/Blog/posts/D3Force/bounds.js"},"the code for our ",o.a.createElement("strong",null,"bounding force")),"."),o.a.createElement("p",null,"This force could be really helpful for making sure our particles stay on screen."),o.a.createElement("p",null,"Go and make your own custom forces! If you make your own force, ping me on ",o.a.createElement(s.a,{to:"http://twitter.com/wattenberger"},"Twitter")," and I'll start a list here!")))))},function(e){var t=e.children;return o.a.createElement("code",{className:"P"},t)}),ae=function(){return o.a.createElement("svg",{className:"Title",viewBox:"0 0 623 215",fill:"currentColor"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M234.113 0.740112C224.448 0.740112 216.613 8.57513 216.613 18.2401V86.5297C216.613 96.1946 224.448 104.03 234.113 104.03H298.347V69.0297H251.613V64.6823H283.146V40.6823H251.613V35.7401H298.347V0.740112H234.113ZM133.299 10.3285C136.71 4.51703 142.945 0.94751 149.684 0.94751H212.918V38.9475H182.049L202.555 75.6849C205.839 81.5692 205.761 88.7529 202.349 94.5644C198.938 100.376 192.703 103.945 185.964 103.945H159.493V103.947L83.416 103.947C81.6081 104.028 79.8339 104.056 78.1138 104.056C68.7239 104.056 58.0603 103.097 48.8221 97.7376C38.2887 91.6272 33.1187 82.012 30.6108 72.359C28.3204 63.5435 27.8122 53.0633 27.6731 42.1932C27.592 35.8542 27.6456 28.3688 27.705 20.0848C27.748 14.0862 27.794 7.66813 27.794 0.964111H67.1381V59.5168C67.1381 64.7748 71.4005 69.0373 76.6585 69.0373C81.9165 69.0373 86.179 64.7748 86.179 59.5168V0.964111H125.241C125.241 13.3187 125.546 23.7517 125.815 32.9565L125.815 32.9591C125.901 35.9311 125.985 38.776 126.052 41.5153C126.302 51.61 126.418 61.5778 125.045 69.947H155.833L133.093 29.2079C129.809 23.3237 129.887 16.1399 133.299 10.3285ZM542.666 18.2401C542.666 8.57513 550.501 0.740112 560.166 0.740112H624.4V35.7401H577.666V40.6823H609.199V64.6823H577.666V69.0297H624.4V104.03H560.166C550.501 104.03 542.666 96.1946 542.666 86.5297V18.2401ZM518.987 110.546C514.327 110.546 509.859 112.405 506.574 115.71C503.289 119.016 501.458 123.495 501.487 128.155L501.93 199.249C501.99 208.872 509.807 216.64 519.43 216.64H520.408V216.674H649.4V183.674H536.834L536.775 174.219H576.718V150.219H536.625L536.596 145.546H596.075V110.546H518.987ZM162.915 145.277H99.6307V150.219H144.317V174.219H99.6307V214.235V216.757H58.6307V130.777C58.6307 125.34 60.7906 120.126 64.635 116.281C68.4795 112.437 73.6938 110.277 79.1307 110.277H82.1307H93.1367H162.915V145.277ZM396.836 129.048C396.836 118.831 405.119 110.548 415.336 110.548H496.337V147.548H433.836V181.401H496.284V216.401H360.825C350.29 216.401 340.241 211.97 333.136 204.192L317.264 186.815V216.757H282.264V110.475H298.919V110.44H352.117L352.687 110.481C360.139 111.014 367.26 115.352 372.179 120.668C377.684 126.618 381.848 135.209 381.848 145.924C381.848 156.254 378.131 164.887 372.586 171.048C369.001 175.031 364.122 178.49 358.587 180.158L358.979 180.587C359.452 181.106 360.122 181.401 360.825 181.401H396.836V129.048ZM465.851 0.938234V40.6823H495.024V0.938232L536.024 0.938231V103.95H495.024V64.6823H465.851V103.95H424.851V35.8982H400.37V103.95H363.37V35.8982H325.178V0.898193H436.993V0.938233L465.851 0.938234ZM168.745 147.777C168.745 127.066 185.534 110.277 206.245 110.277H239.609C260.32 110.277 277.109 127.066 277.109 147.777V179.403C277.109 200.114 260.32 216.903 239.609 216.903H206.245C185.534 216.903 168.745 200.114 168.745 179.403V147.777ZM222.927 135.136C217.669 135.136 213.406 139.399 213.406 144.657V182.523C213.406 187.781 217.669 192.043 222.927 192.043C228.185 192.043 232.447 187.781 232.447 182.523V144.657C232.447 139.399 228.185 135.136 222.927 135.136ZM352.502 148.194C352.502 144.331 349.37 141.199 345.507 141.199H315.765V155.189H345.507C349.37 155.189 352.502 152.058 352.502 148.194Z"}),o.a.createElement("path",{style:{strokeWidth:0},d:"M39.7228 155.438C39.7228 149.99 36.325 147.571 34.7739 146.352L34.7739 145.835L39.1319 146.574L39.1319 142.364L1.31368 136.085L1.31368 140.443L15.2739 142.77L15.2739 143.139C13.7966 143.841 10.3989 144.986 10.3989 150.526C10.3989 157.69 16.0864 163.581 25.0239 165.077C34.0353 166.554 39.7228 162.547 39.7228 155.438ZM35.808 154.367C35.808 159.832 31.0069 161.698 24.95 160.682C18.9671 159.703 14.3137 156.342 14.3137 150.821C14.3137 145.484 18.5978 143.232 24.95 144.284C31.3762 145.355 35.808 149.122 35.808 154.367Z"}),o.a.createElement("path",{style:{strokeWidth:0},d:"M39.6489 120.948C39.6489 113.506 35.6049 107.745 29.1603 106.692C24.3776 105.898 20.5921 108.096 19.7796 112.749L19.558 112.749C18.3577 108.779 15.3662 105.806 11.2114 105.141C5.74549 104.255 0.796628 107.782 0.796629 114.891C0.796629 121.317 4.85913 127.263 10.7682 128.408L10.7682 123.976C7.00117 123.275 4.78527 119.12 4.78527 115.113C4.78527 110.958 7.2043 108.89 10.8421 109.499C15.0154 110.182 17.7114 113.875 17.7114 118.363L17.7114 121.243L21.7739 121.908L21.7739 118.806C21.7739 113.026 24.6361 110.533 28.5694 111.124C32.9827 111.789 35.5864 116.11 35.5864 120.874C35.5864 125.343 33.2966 128.076 29.6773 127.743L29.6773 132.323C35.6603 133.098 39.6489 128.353 39.6489 120.948Z"}))},re=function(e){var t=e.id,n=e.children;return o.a.createElement("section",{className:"section",id:Object(l.kebabCase)(t)},o.a.createElement(ce,{id:t}),n)},ce=Object(c.memo)(function(e){var t=e.id,n=t.endsWith("force");return o.a.createElement("div",{className:"section__heading"},o.a.createElement("a",{href:"#".concat(Object(l.kebabCase)(t)),className:"section__heading__hash"},"#"),o.a.createElement("h2",null,t),n&&o.a.createElement("img",{className:"section__heading__image",src:Math.random()<.3?X.a:Math.random()<.5?q.a:G.a}))})},630:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(6),r=n(55),c=n(0),o=n(128),i=n.n(o),l=n(629),u=(i.a.shape({height:i.a.number,width:i.a.number,marginTop:i.a.number,marginRight:i.a.number,marginBottom:i.a.number,marginLeft:i.a.number}),function(e){var t=Object(r.a)({marginTop:40,marginRight:30,marginBottom:40,marginLeft:75},e);return Object(r.a)(Object(r.a)({},t),{},{boundedHeight:Math.max(t.height-t.marginTop-t.marginBottom,0),boundedWidth:Math.max(t.width-t.marginLeft-t.marginRight,0)})}),s=function(e){var t=Object(c.useRef)(),n=u(e),o=Object(c.useState)(0),i=Object(a.a)(o,2),s=i[0],m=i[1],f=Object(c.useState)(0),d=Object(a.a)(f,2),h=d[0],p=d[1];Object(c.useEffect)(function(){if(n.width&&n.height)return[t,n];var e=t.current,a=new l.a(function(e){if(Array.isArray(e)&&e.length){var t=e[0];s!=t.contentRect.width&&m(t.contentRect.width),h!=t.contentRect.height&&p(t.contentRect.height)}});return a.observe(e),function(){return a.unobserve(e)}},[]);var g=u(Object(r.a)(Object(r.a)({},n),{},{width:n.width||s,height:n.height||h}));return[t,g]}},778:function(e,t,n){"use strict";var a=n(17),r=n(13),c=n(41),o=n(42),i=n(0),l=n.n(i),u=n(616),s=n.n(u),m=n(16),f=n.n(m),d=n(4),h=(n(779),function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={currentNumber:0},e.onNumberChange=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e._isMounted){var n=e.props,a=n.number,r=n.numberOfSteps,c=n.updateSeconds,o=e.state.currentNumber;!f.a.isNaN(a)&&f.a.isNumber(a)?t?(e.interpolator=d.interpolateNumber(o,a),e.stepIndex=0,e.secondsPerIncrement=c/r,e.timeout&&clearTimeout(e.timeout),e.updateNumber()):e.setState({currentNumber:a}):e.setState({currentNumber:null})}},e.updateNumber=function(){if(e._isMounted){var t=e.props.numberOfSteps;e.timeout&&clearTimeout(e.timeout),e.stepIndex++;var n=e.interpolator(1/t*e.stepIndex);e.setState({currentNumber:n},function(){e.stepIndex>=t||(e.timeout=setTimeout(e.updateNumber,1e3*e.secondsPerIncrement))})}},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0;var e=this.props.doInterpolateOnInit;this.onNumberChange(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.timeout&&clearTimeout(this.timeout)}},{key:"componentDidUpdate",value:function(e,t){e.number!=this.props.number&&this.onNumberChange()}},{key:"render",value:function(){var e=this.props,t=e.number,n=e.format,a=(e.numberOfSteps,e.updateSeconds,e.className,this.state.currentNumber);return f.a.isFinite(t)?n(a):l.a.createElement("span",{className:"InterpolatedNumber__empty"},"\u2014")}}]),n}(i.PureComponent));h.defaultProps={numberOfSteps:9,updateSeconds:.6,format:function(e){return s()(e).format("0,0")},doInterpolateOnInit:!1},t.a=h},779:function(e,t,n){}}]);
//# sourceMappingURL=39.13e83b5d.chunk.js.map