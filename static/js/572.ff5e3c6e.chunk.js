"use strict";(self.webpackChunkwattenberger_2019=self.webpackChunkwattenberger_2019||[]).push([[572],{3191:function(t,e,r){r.r(e),r.d(e,{encodeIntoResult:function(){return m},stegaEncodeSourceMap:function(){return E},stegaEncodeSourceMap$1:function(){return S}});var n=r(436),o=r(4765),a=r(9379),i=r(5544),c=r(2284),u=r(9218),l=/_key\s*==\s*['"](.*)['"]/;function s(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((function(t,e,r){var n=(0,c.A)(e);if("number"===n)return"".concat(t,"[").concat(e,"]");if("string"===n)return"".concat(t).concat(0===r?"":".").concat(e);if(function(t){return"string"==typeof t?l.test(t.trim()):"object"==(0,c.A)(t)&&"_key"in t}(e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){var o=(0,i.A)(e,2),a=o[0],u=o[1];return"".concat(t,"[").concat(a,":").concat(u,"]")}throw new Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))}),"")}var f={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},p={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function d(t){for(var e,r=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;null!==(e=n.exec(t));)if(void 0===e[1])if(void 0===e[2])if(void 0===e[3]);else{var o=e[3].replace(/\\(\\')/g,(function(t){return p[t]}));r.push({_key:o,_index:-1})}else r.push(parseInt(e[2],10));else{var a=e[1].replace(/\\(\\|f|n|r|t|')/g,(function(t){return p[t]}));r.push(a)}return r}function h(t){return t.map((function(t){if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))}))}function g(t,e){if(null!==e&&void 0!==e&&e.mappings){var r=function(t){return"$".concat(t.map((function(t){return"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,(function(t){return f[t]})),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,(function(t){return f[t]})),"')]"):"[".concat(t._index,"]")})).join(""))}(t.map((function(t){if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))})));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};var n=Object.entries(e.mappings).filter((function(t){var e=(0,i.A)(t,1)[0];return r.startsWith(e)})).sort((function(t,e){var r=(0,i.A)(t,1)[0];return(0,i.A)(e,1)[0].length-r.length}));if(0!=n.length){var o=(0,i.A)(n[0],2),a=o[0];return{mapping:o[1],matchedPath:a,pathSuffix:r.substring(a.length)}}}}function v(t){return"object"==(0,c.A)(t)&&null!==t}function y(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(t){return null!==t&&Array.isArray(t)}(t)?t.map((function(t,n){if(v(t)){var o=t._key;if("string"==typeof o)return y(t,e,r.concat({_key:o,_index:n}))}return y(t,e,r.concat(n))})):v(t)?Object.fromEntries(Object.entries(t).map((function(t){var n=(0,i.A)(t,2),o=n[0];return[o,y(n[1],e,r.concat(o))]}))):e(t,r)}function m(t,e,r){return y(t,(function(t,n){if("string"!=typeof t)return t;var o=g(n,e);if(!o)return t;var a=o.mapping,i=o.matchedPath;if("value"!==a.type||"documentValue"!==a.source.type)return t;var c=e.documents[a.source.document],u=e.paths[a.source.path],l=d(i),s=d(u).concat(n.slice(l.length));return r({sourcePath:s,sourceDocument:c,resultPath:n,value:t})}))}var b="drafts.";function k(t){var e=t.baseUrl,r=t.workspace,n=void 0===r?"default":r,o=t.tool,a=void 0===o?"default":o,i=t.id,c=t.type,u=t.path,l=t.projectId,f=t.dataset;if(!e)throw new Error("baseUrl is required");if(!u)throw new Error("path is required");if(!i)throw new Error("id is required");if("/"!==e&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");var p="default"===n?void 0:n,d="default"===a?void 0:a,g=function(t){return t.startsWith(b)?t.slice(b.length):t}(i),v=Array.isArray(u)?s(h(u)):u,y=new URLSearchParams({baseUrl:e,id:g,type:c,path:v});p&&y.set("workspace",p),d&&y.set("tool",d),l&&y.set("projectId",l),f&&y.set("dataset",f),i.startsWith(b)&&y.set("isDraft","");var m=["/"===e?"":e];p&&m.push(p);var k=["mode=presentation","id=".concat(g),"type=".concat(c),"path=".concat(encodeURIComponent(v))];return d&&k.push("tool=".concat(d)),m.push("intent","edit","".concat(k.join(";"),"?").concat(y)),m.join("/")}var w=function(t){var e,r=t.sourcePath,n=t.resultPath,o=t.value;if(/^\d{4}-\d{2}-\d{2}/.test(e=o)&&Date.parse(e)||function(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch(e){return!1}return!0}(o))return!1;var a=r.at(-1);return!("slug"===r.at(-2)&&"current"===a||"string"==typeof a&&a.startsWith("_")||"number"==typeof a&&"marks"===r.at(-2)||"href"===a&&"number"==typeof r.at(-2)&&"markDefs"===r.at(-3)||"style"===a||"listItem"===a||r.some((function(t){return"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t}))||A(r)||A(n)||"string"==typeof a&&_.has(a))},_=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","unit","url","username","variant","website"]);function A(t){return t.some((function(t){return"string"==typeof t&&null!==t.match(/type/i)}))}var U=20;function E(t,e,r){var i,c=r.filter,s=r.logger;if(!r.enabled){var f,p="config.enabled must be true, don't call this function otherwise";throw null!==s&&void 0!==s&&null!==(f=s.error)&&void 0!==f&&f.call(s,"[@sanity/client]: ".concat(p),{result:t,resultSourceMap:e,config:r}),new TypeError(p)}if(!e)return null!==s&&void 0!==s&&null!==(i=s.error)&&void 0!==i&&i.call(s,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:r}),t;if(!r.studioUrl){var d,h="config.studioUrl must be defined";throw null!==s&&void 0!==s&&null!==(d=s.error)&&void 0!==d&&d.call(s,"[@sanity/client]: ".concat(h),{result:t,resultSourceMap:e,config:r}),new TypeError(h)}var g={encoded:[],skipped:[]},v=m(t,e,(function(t){var e=t.sourcePath,n=t.sourceDocument,o=t.resultPath,i=t.value;if(!1===("function"==typeof c?c({sourcePath:e,resultPath:o,filterDefault:w,sourceDocument:n,value:i}):w({sourcePath:e,resultPath:o,filterDefault:w,sourceDocument:n,value:i})))return s&&g.skipped.push({path:P(e),value:"".concat(i.slice(0,U)).concat(i.length>U?"...":""),length:i.length}),i;s&&g.encoded.push({path:P(e),value:"".concat(i.slice(0,U)).concat(i.length>U?"...":""),length:i.length});var l=function(t){var e="string"==typeof t?t:t.baseUrl;return"/"!==e&&(e=e.replace(/\/$/,"")),"string"==typeof t?{baseUrl:e}:(0,a.A)((0,a.A)({},t),{},{baseUrl:e})}("function"==typeof r.studioUrl?r.studioUrl(n):r.studioUrl),f=l.baseUrl,p=l.workspace,d=l.tool;if(!f)return i;var h=n._id,v=n._type,y=n._projectId,m=n._dataset;return(0,u.C)(i,{origin:"sanity.io",href:k((0,a.A)({baseUrl:f,workspace:p,tool:d,id:h,type:v,path:e},!r.omitCrossDatasetReferenceData&&{dataset:m,projectId:y}))},!1)}));if(s){var y,b,_,A,E,S=g.skipped.length,j=g.encoded.length;if((S||j)&&(null!==(y=(null===s||void 0===s?void 0:s.groupCollapsed)||s.log)&&void 0!==y&&y("[@sanity/client]: Encoding source map into result"),null!==(b=s.log)&&void 0!==b&&b.call(s,"[@sanity/client]: Paths encoded: ".concat(g.encoded.length,", skipped: ").concat(g.skipped.length))),g.encoded.length>0&&(null!==s&&void 0!==s&&null!==(_=s.log)&&void 0!==_&&_.call(s,"[@sanity/client]: Table of encoded paths"),null!==(A=(null===s||void 0===s?void 0:s.table)||s.log)&&void 0!==A&&A(g.encoded)),g.skipped.length>0){var x,D,I=new Set,M=(0,o.A)(g.skipped);try{for(M.s();!(D=M.n()).done;){var C=D.value.path;I.add(C.replace(l,"0").replace(/\[\d+\]/g,"[]"))}}catch(O){M.e(O)}finally{M.f()}null===s||void 0===s||null===(x=s.log)||void 0===x||x.call(s,"[@sanity/client]: List of skipped paths",(0,n.A)(I.values()))}(S||j)&&(null===s||void 0===s||null===(E=s.groupEnd)||void 0===E||E.call(s))}return v}function P(t){return s(h(t))}var S=Object.freeze({__proto__:null,stegaEncodeSourceMap:E})}}]);
//# sourceMappingURL=572.ff5e3c6e.chunk.js.map