(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1317:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=(a(651),a(4)),r=a(46),o=(a(617),a(641),a(12)),c=a(33),s=a(51),m=a(24),d=a(655),u=a(258),p=a.n(u);t.default=function(e){var t=e.onScrollToSectionLocal;return l.a.createElement("div",{className:"LearnD3Animation"},l.a.createElement("p",null,'While data visualizations have been displayed on static mediums for hundreds of years, we now have an amazing opportunity when we visualize data in a web browser. There is something really compelling about "replaying" events, as we\'ve seen with the mass popularity of bar chart races this past year.'),l.a.createElement("p",null,"But even if we're comvinced that we ",l.a.createElement("i",null,"want")," our data visualization to animate, it can be technically difficult. Let's talk about the various d3 modules that can help out."),l.a.createElement("h3",null,"d3-interpolate"),l.a.createElement("p",null,"To animate a property from ",l.a.createElement("b",null,"point A")," to ",l.a.createElement("b",null,"point B"),", we need to create a series of states, smoothly interpolating between them. For example, to smoothly animate a blue circle changing into a green circle, we need to show the circle as blue, then blue-green, then green."),l.a.createElement(h,null),l.a.createElement("p",null,"To create these in-between steps, we can use ",l.a.createElement(d.DocsLink,{repo:"interpolate",id:"interpolate"}),", which takes two parameters: ",l.a.createElement("b",null,"point A")," and ",l.a.createElement("b",null,"point B"),"."),l.a.createElement("p",null,l.a.createElement(d.DocsLink,{repo:"interpolate",id:"interpolate"})," uses different methods (which are also surfaced), depending on the type of value of ",l.a.createElement("b",null,"point B"),". For example, if ",l.a.createElement("b",null,"point B")," is a number, it will use ",l.a.createElement(d.DocsLink,{repo:"interpolate",id:"interpolateNumber"})," and if ",l.a.createElement("b",null,"point B")," is a date, it will use ",l.a.createElement(d.DocsLink,{repo:"interpolate",id:"interpolateDate"}),"."),l.a.createElement(r.a,null,"Learn more about handling date times in the ",l.a.createElement(o.a,{to:"#",onClick:t("dealing-with-datetimes")},"datetimes section"),"."),l.a.createElement(m.a,null,"const interpolator = d3.interpolate(0, 100)\ninterpolator(0  ) // 0\ninterpolator(0.5) // 50\ninterpolator(1  ) // 100"),l.a.createElement("p",null,"If we wanted to list out a number of steps, we could pass our interpolator to ",l.a.createElement(d.DocsLink,{repo:"interpolate",id:"quantize"}),", along with the number of steps that we wanted:"),l.a.createElement(m.a,{doWrap:!1},"const interpolator = d3.interpolate(0, 100)\nconst steps = d3.quantize(interpolator, 11)\n// steps = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]"),l.a.createElement("p",null,"For animating colors, we can even specify the color space we want to work in with:"),E.map(function(e,t){return l.a.createElement("div",{key:e,style:{margin:"1em 0 2em",textAlign:"center"}},l.a.createElement(d.DocsLink,{repo:"time",id:e},e),l.a.createElement(f,{from:"interpolateHue"==e?248:void 0,to:"interpolateHue"==e?51:void 0,interpolation:e}))}),l.a.createElement("p",null,"We can add ",l.a.createElement("b",null,"Long")," to most of these methods to specify for our interpolator to take the ",l.a.createElement("i",null,"longer route"),", eg ",l.a.createElement(d.DocsLink,{repo:"time",id:"interpolateHclLong"})),["interpolateHcl","interpolateHclLong"].map(function(e,t){return l.a.createElement("div",{key:e,style:{margin:"1em 0 2em",textAlign:"center"}},l.a.createElement(d.DocsLink,{repo:"time",id:e},e),l.a.createElement(f,{from:"interpolateHue"==e?248:void 0,to:"interpolateHue"==e?51:void 0,interpolation:e}))}),l.a.createElement(r.a,null,"Learn more about handling colors in the ",l.a.createElement(o.a,{to:"#",onClick:t("dealing-with-colors")},"colors section"),"."),l.a.createElement("p",null,"We can even get fancier with ",l.a.createElement(d.DocsLink,{repo:"interpolate",id:"splines"},"spline")," and ",l.a.createElement(d.DocsLink,{repo:"interpolate",id:"piecewise"},"piecewise")," interpolators."),l.a.createElement(d.ReadMore,{id:"interpolate"}),l.a.createElement("p",null,"We don't even need to use ",l.a.createElement(d.DocsLink,{repo:"interpolate"})," directly -- we can use ",l.a.createElement(d.DocsLink,{repo:"transition"})," to create our animations."),l.a.createElement("h3",null,"d3-transition"),l.a.createElement("p",null,"We can create a ",l.a.createElement("b",null,"d3 transition")," in two ways:"),l.a.createElement(s.a,{items:[l.a.createElement(l.a.Fragment,null,"on the document's ",l.a.createElement("b",null,"root element")," using ",l.a.createElement(d.DocsLink,{repo:"transition",id:"transition"}),", or"),l.a.createElement(l.a.Fragment,null,"on a ",l.a.createElement("b",null,"d3 selection")," using a ",l.a.createElement("b",null,"d3 selection"),"'s ",l.a.createElement(d.DocsLink,{repo:"transition",id:"selection_transition"},".transition()")," method",l.a.createElement(r.a,null,"Read about ",l.a.createElement("b",null,"d3 selection"),"s in the ",l.a.createElement(o.a,{to:"#",onClick:t("manipulating-the-dom")},"manipulating the DOM section")))]}),l.a.createElement("p",null,"If we create the transition on a ",l.a.createElement("b",null,"d3 selection"),", we can use the transition's ",l.a.createElement(d.DocsLink,{repo:"transition",id:"transition_attr"},".attr()")," (to change a HTML attribute) or ",l.a.createElement(d.DocsLink,{repo:"transition",id:"transition_style"},".style()")," method (to change a CSS style) to animate a value."),l.a.createElement("p",null,"For example, we can animate a ",l.a.createElement(d.P,null,"<circle>"),"'s position like so:"),l.a.createElement(r.a,null,"Run the animation by pressing the ",l.a.createElement(c.a,{name:"play",size:"xs"})," icon."),l.a.createElement("svg",{viewBox:"0 0 550 100",width:"550",height:"100"},l.a.createElement("circle",{id:"circle",cx:"50",cy:"50",r:"40",fill:"cornflowerblue"})),l.a.createElement(m.a,{fileName:"transition.js",canEval:!0},'d3.select("#circle")\n    .attr("cx", 50)\n  .transition()\n    .attr("cx", 500)'),l.a.createElement("p",null,"We can tweak the timing of our ",l.a.createElement(d.P,null,"<circle>"),"'s transition using its ",l.a.createElement(d.DocsLink,{repo:"transition",id:"transition_delay"},".delay()")," and ",l.a.createElement(d.DocsLink,{repo:"transition",id:"transition_duration"},".duration()")," methods."),l.a.createElement("svg",{viewBox:"0 0 550 100",width:"550",height:"100"},l.a.createElement("circle",{id:"circle2",cx:"50",cy:"50",r:"40",fill:"cornflowerblue"})),l.a.createElement(m.a,{fileName:"transition.js",canEval:!0},'d3.select("#circle2")\n    .attr("cx", 50)\n  .transition()\n    .delay(500)\n    .duration(2000)\n    .attr("cx", 500)'),l.a.createElement("p",null,"We can animate multiple properties of our ",l.a.createElement(d.P,null,"<circle>")," with the same transition:"),l.a.createElement("svg",{viewBox:"0 0 550 100",width:"550",height:"100"},l.a.createElement("circle",{id:"circle3",cx:"50",cy:"50",r:"40",fill:"cornflowerblue"})),l.a.createElement(m.a,{fileName:"transition.js",canEval:!0},'d3.select("#circle3")\n    .attr("cx", 50)\n    .style("fill", "cornflowerblue")\n  .transition()\n    .delay(500)\n    .duration(2000)\n    .attr("cx", 500)\n    .style("fill", "lavender")'),l.a.createElement("p",null,"We can even easily start another transition once our first transition is finished:"),l.a.createElement("svg",{viewBox:"0 0 550 100",width:"550",height:"100"},l.a.createElement("circle",{id:"circle4",cx:"50",cy:"50",r:"40",fill:"cornflowerblue"})),l.a.createElement(m.a,{fileName:"transition.js",canEval:!0},'d3.select("#circle4")\n    .attr("cx", 50)\n    .style("fill", "cornflowerblue")\n  .transition()\n    .delay(500)\n    .duration(2000)\n    .attr("cx", 500)\n  .transition()\n    .duration(1000)\n    .style("fill", "lavender")\n  .transition()\n    .duration(1000)\n    .attr("cx", 50)\n    .style("fill", "cornflowerblue")'),l.a.createElement("h3",null,"d3-ease"),l.a.createElement("p",null,"Our transitions don't have to interpolate linearly from ",l.a.createElement("b",null,"point A")," to ",l.a.createElement("b",null,"point B"),". ",l.a.createElement(d.DocsLink,{repo:"ease"})," is an entire d3 module that suppies different easing functions, which can be used to give your animations more personality."),l.a.createElement("p",null,"To use these easing functions, we can pass them to our transition's ",l.a.createElement(d.DocsLink,{repo:"transition",id:"transition_ease"},".ease()")," method."),l.a.createElement("svg",{viewBox:"0 0 550 100",width:"550",height:"100"},l.a.createElement("circle",{id:"circle5",cx:"50",cy:"50",r:"40",fill:"cornflowerblue"})),l.a.createElement(m.a,{fileName:"transition.js",canEval:!0},'d3.select("#circle5")\n    .attr("cx", 50)\n    .style("fill", "cornflowerblue")\n  .transition()\n    .delay(500)\n    .duration(2000)\n    .ease(d3.easeBounce)\n    .attr("cx", 500)\n  .transition()\n    .duration(1000)\n    .ease(d3.easeElasticInOut)\n    .style("fill", "lavender")\n  .transition()\n    .duration(1000)\n    .ease(d3.easeBounceOut)\n    .attr("cx", 50)\n    .style("fill", "cornflowerblue")'),l.a.createElement(d.ReadMore,{id:"ease"}),l.a.createElement("p",null,"This is really the tip of the iceberg for animating data visualizations. ",l.a.createElement(d.DocsLink,{repo:"transition"})," might not even be what you use -- for example, I'll often use ",l.a.createElement(o.a,{to:"https://www.react-spring.io"},"react-spring")," if I'm creating a data visualization using a javascript framework like ",l.a.createElement(o.a,{to:"http://reactjs.org"},"React.js"),"."),l.a.createElement(r.a,{className:"LearnD3__promo"},l.a.createElement("img",{src:p.a,alt:"book",className:"LearnD3__promo__img"}),l.a.createElement("div",{className:"LearnD3__promo__text"},l.a.createElement("p",null,"There are many ways to animate elements in the web browser."),"Learn about the different methods and do a deeper dive into ",l.a.createElement("b",null,"d3 transitions")," in the ",l.a.createElement(o.a,{href:"http://fullstack.io/fullstack-d3"},l.a.createElement("b",null,"Fullstack D3 and Data Visualization"))," book.")),l.a.createElement(d.ReadMore,{id:"transition"}),l.a.createElement("h3",null,"d3-timer"),l.a.createElement("p",null,"Great! Now we know how to create animated transitions between two states, but how do we create a constantly running animation?"),l.a.createElement("p",null,l.a.createElement(d.DocsLink,{repo:"timer",id:"timer"})," will call a callback function continuously, passing it the milliseconds that have elapsed since initialization."),l.a.createElement("p",null,"For example, it has been ",l.a.createElement(d.P,null,l.a.createElement("span",{id:"elapsed"},"-"))," millseconds have passed since you last pressed ",l.a.createElement(c.a,{name:"play",size:"s",style:{color:"#bdbdcf"}}),"."),l.a.createElement(m.a,{fileName:"timer.js",canEval:!0},'const timer = d3.timer(elapsed => {\n  d3.select("#elapsed")\n    .html(Math.round(elapsed))\n  if (elapsed > 10000) timer.stop()\n})'),l.a.createElement("p",null,"Note that we can use ",l.a.createElement(d.DocsLink,{repo:"timer",id:"stop"})," to stop our timer after a certain amount of time."),l.a.createElement("p",null,"We can also execute a callback once, after a certain amount of time using ",l.a.createElement(d.DocsLink,{repo:"timer",id:"timeout"}),", and on an interval using ",l.a.createElement(d.DocsLink,{repo:"timer",id:"interval"}),"."),l.a.createElement("p",null,"While there are native javascript methods for creating intervals, timeouts, and timers, ",l.a.createElement(d.DocsLink,{repo:"timer"})," has some performance enhancements (using ",l.a.createElement(o.a,{to:"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame"},l.a.createElement(d.P,null,"requestAnimationFrame")),") and won't run when the user's tab isn't open."),l.a.createElement(d.ReadMore,{id:"timer"}),l.a.createElement("video",{autoplay:"",loop:!0,muted:!0},l.a.createElement("source",{src:"https://video.twimg.com/tweet_video/D6nGU_gWwAAGek8.mp4",type:"video/mp4"})),l.a.createElement(r.a,{className:"LearnD3__promo"},l.a.createElement("img",{src:p.a,alt:"book",className:"LearnD3__promo__img"}),l.a.createElement("div",{className:"LearnD3__promo__text"},"The Advanced version of ",l.a.createElement(o.a,{href:"http://fullstack.io/fullstack-d3"},l.a.createElement("b",null,"Fullstack D3 and Data Visualization"))," does a comprehensive walk-through of the animated simulation above.")))};var E=["interpolateRgb","interpolateHsl","interpolateLab","interpolateHcl","interpolateCubehelix","interpolateHue"],h=function(){return l.a.createElement("div",{className:"CircleExample"})},f=function(e){var t=e.from,a=void 0===t?"slateblue":t,n=e.to,r=void 0===n?"gold":n,o=e.interpolation,c=i[o](a,r),s=i.quantize(c,10);return l.a.createElement("div",{className:"ColorShift"},s.map(function(e,t){return l.a.createElement("div",{key:t,className:"ColorShift__circle",style:{background:Number.isFinite(e)?"hsl(".concat(e,", 100%, 50%)"):e}})}))}},617:function(e,t,a){"use strict";var n=a(6),l=a(34),i=a(0),r=a.n(i),o=a(33),c=a(147);a(129),a(619);t.a=function(e){var t=e.trigger,a=e.triggerExpandText,s=(e.doHideIfCollapsed,e.className),m=e.children,d=Object(l.a)(e,["trigger","triggerExpandText","doHideIfCollapsed","className","children"]),u=Object(i.useState)(!1),p=Object(n.a)(u,2),E=p[0],h=p[1],f=Object(i.useRef)();return r.a.createElement("details",Object.assign({className:"Expandy Expandy--is-".concat(E?"expanded":"collapsed"," ").concat(s)},d,{ref:f,onToggle:function(e){var t=e.target.open;h(t)}}),r.a.createElement("summary",null,r.a.createElement("div",{className:"Expandy__trigger button-no-appearance"},r.a.createElement("div",{className:"Expandy__trigger__text"},r.a.createElement("b",null,t),r.a.createElement("div",{className:"Expandy__trigger__info"},a||"tap me ".concat(E?"to hide":"for more"," details"))),r.a.createElement("div",{className:"Expandy__trigger__mark"},"\u1f30")),r.a.createElement(c.a,{className:"Expandy__toggle",contents:r.a.createElement("button",{className:"button-no-appearance"},E?"Collapse me":"Expand me")},r.a.createElement("div",{className:"Expandy__toggle__arrow Expandy__toggle__arrow--up"},r.a.createElement(o.a,{name:"arrow",direction:"n",size:"s"})),r.a.createElement("div",{className:"Expandy__toggle__arrow Expandy__toggle__arrow--down"},r.a.createElement(o.a,{name:"arrow",direction:"s",size:"s"})))),r.a.createElement("div",{className:"Expandy__contents"},m))}},619:function(e,t,a){},641:function(e,t,a){"use strict";var n=a(6),l=a(34),i=a(0),r=a.n(i);a(33),a(642);t.a=function(e){var t=e.description,a=e.className,o=e.children,c=Object(l.a)(e,["description","className","children"]),s=Object(i.useState)(!1),m=Object(n.a)(s,2),d=m[0],u=m[1];return r.a.createElement("div",Object.assign({className:"InlineExpandy InlineExpandy--is-".concat(d?"expanded":"collapsed"," ").concat(a)},c),r.a.createElement("div",{className:"InlineExpandy__trigger",onClick:function(){u(!d)}},d?"Hide":"Show"," ",t,"..."),d&&r.a.createElement("div",{className:"InlineExpandy__contents"},o))}},642:function(e,t,a){}}]);
//# sourceMappingURL=62.1da97117.chunk.js.map