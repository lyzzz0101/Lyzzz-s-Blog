{"version":3,"sources":["components/News/News.jsx","components/_ui/Button/ButtonGroup/ButtonGroup.jsx","../node_modules/sentiment/languages sync /^/.//.*//index$"],"names":["parser","rssParser","sentiment","Sentiment","CORS_PROXY","require","sites","label","url","today","Date","defaultSiteOptions","_","map","site","isActive","defaultActiveSites","filter","defaultSentimentRange","localStorageActiveSitesKey","localStorageSentimentRangeKey","localStorageLastLoadKey","localStorageTitleFiltersKey","parseTime","d3","formatTime","fetchInterval","News","props","_this","Object","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","this","_super","call","isFirstLoad","getUrlArgs","args","window","location","search","slice","split","fromPairs","str","d","i","JSON","parse","decodeURIComponent","setUrlArg","key","value","urlArgs","newUrlArgs","omit","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__","activeSites","state","length","history","replaceState","isEmpty","pathname","val","concat","stringify","join","getFromStorage","setInStorage","setDefaults","isArray","sentimentRange","siteOptions","includes","titleFilters","isObject","setState","parseArticles","articles","siteLabel","article","parseArticle","startsWith","title","pubDate","hasBeenViewed","parsedLastLoad","analyze","contentSnippet","getNews","_ref","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","feed","lastLoad","wrap","_context","prev","next","getFeed","sent","items","prevState","parsedArticles","uniqBy","orderBy","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","link","articlesBySentiment","countBy","score","articlesBySite","every","currentTime","isLoading","stop","_x","apply","arguments","timeout","clearTimeout","setTimeout","_ref2","_callee2","_context2","parseURL","abrupt","t0","_x2","onSiteChange","toggledSite","isSelectingOne","isSelectingAll","onSentimentRangeChange","newRange","sortBy","onIsDimmingSeenToggle","e","stopPropagation","preventDefault","isDimmingSeen","onIsShowingAboutToggle","isShowingAbout","onTitleFilterChange","newFilters","articleTokens","bind","_Users_linying_codespace_Lyzzz_s_Blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","classNames","_this$state","filteredArticles","lowerCase","groupedArticles","groupBy","seenArticles","true","unseenArticles","false","maxSentimentCount","max","values","titleFilterObjects","react__WEBPACK_IMPORTED_MODULE_10___default","createElement","className","getClassName","components_ui_Button_ButtonGroup_ButtonGroup__WEBPACK_IMPORTED_MODULE_19__","buttons","children","onChange","range","style","height","rc_slider__WEBPACK_IMPORTED_MODULE_16__","min","count","pushable","allowCross","react_select_creatable__WEBPACK_IMPORTED_MODULE_18__","classNamePrefix","isMulti","isClearable","NewsArticle","guid","components_ui_Button_Button__WEBPACK_IMPORTED_MODULE_20__","onClick","Component","_ref3","href","target","dangerouslySetInnerHTML","__html","date","daysAgo","Math","round","hoursAgo","minutesAgo","formatDate","ButtonGroup","button","Button--active","Button--inactive","_this2","react__WEBPACK_IMPORTED_MODULE_4___default","idx","_Button__WEBPACK_IMPORTED_MODULE_6__","type","getButtonClassName","disabled","isDisabled","./en/index","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","keys","resolve","module","exports"],"mappings":"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","file":"static/js/52.aeda7c2f.chunk.js","sourcesContent":["import React, {Component} from \"react\"\nimport {Route} from 'react-router-dom'\nimport classNames from \"classnames\"\nimport rssParser from \"rss-parser\";\nimport _ from \"lodash\";\nimport * as d3 from \"d3\";\nimport Sentiment from \"sentiment\"\nimport { Range } from 'rc-slider';\nimport 'rc-slider/assets/index.css';\nimport ReactSelect from 'react-select';\nimport Creatable from 'react-select/creatable';\n\nimport ButtonGroup from 'components/_ui/Button/ButtonGroup/ButtonGroup';\nimport Button from 'components/_ui/Button/Button';\n\nimport { getFromStorage, setInStorage } from 'utils/utils';\n\nconst parser = new rssParser({\n  // headers: {\n  //   \"Accept\": \"text/html,application/xhtml+xml,application/xml\"\n  // }\n})\nconst sentiment = new Sentiment();\n\nconst CORS_PROXY = \"https://cors-anywhere.herokuapp.com/\"\n\nrequire('./News.scss')\n\nconst sites = [\n  {label: \"The Atlantic\", url: \"https://www.theatlantic.com/feed/all/\"},\n  {label: \"ABC\", url: \"http://feeds.abcnews.com/abcnews/topstories\"},\n  {label: \"CBS\", url: \"https://www.cbsnews.com/latest/rss/main\"},\n  {label: \"NBC\", url: \"https://www.nbcnewyork.com/news/top-stories/?rss=y\"},\n  {label: \"BBC\", url: \"http://feeds.bbci.co.uk/news/rss.xml\"},\n  // {label: \"NPR\", url: \"https://www.npr.org/sections/news/\"},\n  // {label: \"NPR\", url: \"http://feeds.feedburner.com/blogspot/lQlzL\"},\n  {label: \"Reuters\", url: \"http://feeds.reuters.com/reuters/topNews/?format=xml\"},\n  {label: \"Al Jazeera\", url: \"https://www.aljazeera.com/xml/rss/all.xml\"},\n  // {label: \"The Hill\", url: \"https://thehill.com/rss/syndicator/19109\"},\n  // {label: \"The Hill International\", url: \"https://thehill.com/taxonomy/term/43/feed\"},\n  {label: \"PBS Now\", url: \"http://www.pbs.org/now/rss.xml\"},\n  {label: \"PBS Nova\", url: \"http://www.pbs.org/wgbh/nova/rss/nova.xml\"},\n]\n\nconst today = new Date()\nconst formatDate = date => {\n  const daysAgo = Math.round((today - date) / (1000 * 60 * 60 * 24));\n  const hoursAgo = Math.round((today - date) / (1000 * 60 * 60));\n  const minutesAgo = Math.round((today - date) / (1000 * 60));\n  return minutesAgo < 10  ? \"\"                   :\n         hoursAgo   <  1  ? `${minutesAgo}m`     :\n         hoursAgo   < 24  ? `${hoursAgo}h`       :\n         daysAgo    <  1  ? `${hoursAgo}h`       :\n        //  daysAgo <  2  ? `${daysAgo} day ago` :\n         daysAgo    < 30  ? `${daysAgo}d`        :\n                           d3.timeFormat(\"%-m/%-d/%Y\")(date)\n}\nconst defaultSiteOptions = _.map(sites, site => ({\n  label: site.label,\n  isActive: true,\n}))\nconst defaultActiveSites = _.map(_.filter(defaultSiteOptions, \"isActive\"), \"label\")\nconst defaultSentimentRange = [-100, 100]\nconst localStorageActiveSitesKey = \"active-sites\"\nconst localStorageSentimentRangeKey = \"sentiment-range\"\nconst localStorageLastLoadKey = \"last-load\"\nconst localStorageTitleFiltersKey = \"title-filters\"\nconst storageTimeFormat = \"%H:%M %m/%d/%Y\"\nconst parseTime = d3.timeParse(storageTimeFormat)\nconst formatTime = d3.timeFormat(storageTimeFormat)\nconst fetchInterval = 1000 * 60 * 5\nclass News extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      articles: [],\n      titleFilters: [],\n      articleTokens: [],\n      siteOptions: defaultSiteOptions,\n      activeSites: defaultActiveSites,\n      sentimentRange: defaultSentimentRange,\n      articlesBySentiment: {},\n      articlesBySite: {},\n      isDimmingSeen: true,\n      isLoading: true,\n      isShowingAbout: false,\n    }\n    this.getNews = this.getNews.bind(this)\n  }\n  isFirstLoad = true\n\n  componentDidMount() {\n    this.setDefaults();\n    this.getNews();\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) clearTimeout(this.timeout)\n  }\n\n  getClassName() {\n    return classNames(\"News\")\n\n  }\n  getUrlArgs = () => {\n    const args = window.location.search.slice(1).split(\"&\")\n    return _.fromPairs(args.map(str => str.split(\"=\").map((d,i) => i == 1 ?\n      JSON.parse(window.decodeURIComponent(d)) :\n      window.decodeURIComponent(d)\n    )))\n  }\n\n  setUrlArg = (key, value) => {\n    const urlArgs = this.getUrlArgs()\n    let newUrlArgs = _.omit({...urlArgs, [key]: value}, \"\")\n\n    const { activeSites } = this.state\n    if (newUrlArgs && activeSites.length == sites.length) newUrlArgs = _.omit(newUrlArgs, localStorageActiveSitesKey)\n\n    window.history.replaceState( {} , '', !_.isEmpty(newUrlArgs) ?\n      \"?\" + _.map(newUrlArgs, (val, key) => `${key}=${JSON.stringify(val)}`).join(\"&\") :\n      window.location.pathname\n    );\n  }\n\n  getFromStorage = (key) => getFromStorage(`news--${key}`)\n  setInStorage = (key, value) => setInStorage(`news--${key}`, value)\n\n  setDefaults = () => {\n    const urlArgs = this.getUrlArgs()\n    let activeSites = urlArgs[localStorageActiveSitesKey] || this.getFromStorage(localStorageActiveSitesKey) || defaultActiveSites\n    if (!_.isArray(activeSites)) activeSites = defaultActiveSites\n    if (urlArgs[localStorageActiveSitesKey]) this.setInStorage(localStorageActiveSitesKey, activeSites)\n\n    let sentimentRange = urlArgs[localStorageSentimentRangeKey] || this.getFromStorage(localStorageSentimentRangeKey) || defaultSentimentRange\n    if (!_.isArray(sentimentRange)) sentimentRange = defaultSentimentRange\n    if (urlArgs[localStorageSentimentRangeKey]) this.setInStorage(localStorageSentimentRangeKey, sentimentRange)\n\n    const siteOptions = _.map(sites, site => ({\n      label: site.label,\n      isActive: _.includes(activeSites, site.label),\n    }))\n    let titleFilters = urlArgs[localStorageTitleFiltersKey] || this.getFromStorage(localStorageTitleFiltersKey) || []\n    if (!_.isArray(titleFilters)) titleFilters = []\n    if (titleFilters.length && _.isObject(titleFilters[0])) titleFilters = []\n    if (urlArgs[localStorageTitleFiltersKey]) this.setInStorage(localStorageTitleFiltersKey, titleFilters)\n\n    this.setState({ activeSites, siteOptions, sentimentRange, titleFilters })\n  }\n\n  parseArticles = (articles, siteLabel) => _.filter(\n    _.map(articles, article => this.parseArticle(article, siteLabel)),\n    article => !!article && !_.startsWith(article.title, \"WATCH: \")\n  )\n\n  parseArticle = (article, siteLabel) => ({\n    ...article,\n    site: siteLabel,\n    pubDate: new Date(article.pubDate),\n    hasBeenViewed: this.parsedLastLoad ? new Date(article.pubDate) < this.parsedLastLoad : false,\n    sentiment: sentiment.analyze([article.title, article.contentSnippet].join(\". \")),\n  })\n\n  getNews = () => {\n    sites.map(async site => {\n      const feed = await this.getFeed(site.url)\n      const lastLoad = this.getFromStorage(localStorageLastLoadKey)\n      // const lastLoad = \"17:25 09/30/2018\"\n      this.parsedLastLoad = lastLoad ? parseTime(lastLoad) : null\n\n      const articles = this.parseArticles(feed.items || [], site.label)\n\n      this.setState(prevState => {\n        const parsedArticles = _.uniqBy(\n          _.orderBy([...articles, ...prevState.articles], \"pubDate\", \"desc\"),\n          d => d.link\n        )\n        const articlesBySentiment = _.countBy(parsedArticles, d => d.sentiment.score);\n        const articlesBySite = _.countBy(parsedArticles, \"site\");\n        // const articleTokens = _.map(\n        //   _.flatMap(parsedArticles, d => d.sentiment.tokens),\n        //   d => ({\n        //     value: d,\n        //     label: d,\n        //   })\n        // );\n        if (this.isFirstLoad && _.every(_.map(sites, site => !!articlesBySite[site.label]))) {\n          const currentTime = formatTime(new Date())\n          this.setInStorage(localStorageLastLoadKey, currentTime)\n          this.isFirstLoad = false;\n        }\n\n\n        return {\n          articles: parsedArticles,\n          isLoading: false,\n          articlesBySentiment,\n          articlesBySite,\n          // articleTokens,\n        }\n      })\n    })\n\n    if (this.timeout) clearTimeout(this.timeout)\n    this.timeout = setTimeout(this.getNews, fetchInterval)\n\n  }\n\n  getFeed = async site => {\n    try {\n      return await parser.parseURL(`${CORS_PROXY}${site}`)\n    } catch(e) {\n      return []\n    }\n  }\n\n  onSiteChange = toggledSite => {\n    const isSelectingOne = this.state.activeSites.length == sites.length;\n    const isSelectingAll = this.state.activeSites.length == 1 && _.includes(this.state.activeSites, toggledSite.label);\n    const siteOptions = _.map(this.state.siteOptions, site => ({\n      ...site,\n      isActive: isSelectingAll ? true :\n        isSelectingOne ?\n          site.label == toggledSite.label ? true : false :\n          site.label == toggledSite.label ? !site.isActive : site.isActive,\n    }))\n    const activeSites = _.map(_.filter(siteOptions, \"isActive\"), \"label\")\n    this.setInStorage(localStorageActiveSitesKey, activeSites)\n    this.setUrlArg(localStorageActiveSitesKey, activeSites)\n    this.setState({ siteOptions, activeSites })\n  }\n\n  onSentimentRangeChange = newRange => {\n    const sentimentRange = _.sortBy(newRange)\n    this.setState({ sentimentRange })\n    this.setInStorage(localStorageSentimentRangeKey, sentimentRange)\n    this.setUrlArg(localStorageSentimentRangeKey, sentimentRange)\n  }\n  onIsDimmingSeenToggle = e => {\n    e.stopPropagation();\n    e.preventDefault();\n    const isDimmingSeen = !this.state.isDimmingSeen\n    this.setState({ isDimmingSeen })\n    // this.setInStorage(localStorageIsDimmingSeenKey, isDimmingSeen)\n  }\n\n  onIsShowingAboutToggle = () => {\n    const isShowingAbout = !this.state.isShowingAbout\n    this.setState({ isShowingAbout })\n    // this.setInStorage(localStorageIsDimmingSeenKey, isDimmingSeen)\n  }\n\n  onTitleFilterChange = newFilters => {\n    const titleFilters = _.map(newFilters, \"label\")\n    this.setState({ titleFilters })\n    this.setInStorage(localStorageTitleFiltersKey, titleFilters)\n    this.setUrlArg(localStorageTitleFiltersKey, titleFilters)\n  }\n\n  render() {\n    const { articles, siteOptions, activeSites, sentimentRange, articlesBySentiment, articlesBySite, articleTokens, titleFilters, isDimmingSeen, isLoading, isShowingAbout } = this.state\n    const filteredArticles = _.filter(articles, article => (\n      _.includes(activeSites, article.site) &&\n      _.every(_.map(titleFilters, filter => !_.includes(_.lowerCase(article.title), filter))) &&\n      (!article.sentiment || article.sentiment.score > sentimentRange[0]) &&\n      (!article.sentiment || article.sentiment.score < sentimentRange[1])\n    ))\n    const groupedArticles = _.groupBy(filteredArticles, \"hasBeenViewed\")\n    const seenArticles = groupedArticles.true || []\n    const unseenArticles = groupedArticles.false || []\n    const maxSentimentCount = _.max(Object.values(articlesBySentiment))\n    const titleFilterObjects = _.map(titleFilters, filter => ({\n      label: filter,\n      value: filter,\n    }))\n\n    return (\n      <div className={this.getClassName()}>\n        {/* {isShowingAbout && (\n          <p>\n            stuffs\n          </p>\n        )} */}\n        <div className=\"News__controls\">\n          <ButtonGroup\n            className=\"News__toggle\"\n            buttons={_.map(siteOptions, site => ({\n              ...site,\n              children: articlesBySite[site.label] ? (\n                <div className=\"News__toggle__notification\">\n                  { articlesBySite[site.label] || 0 }\n                </div>\n              ) : (\n                <div className=\"News__toggle__loader\" />\n              ),\n            }))}\n            onChange={this.onSiteChange}\n          />\n          {/* <div className=\"News__controls__about-toggle\" onClick={this.onIsShowingAboutToggle}>\n            About\n          </div> */}\n          <div className=\"News__slider\">\n            <div className=\"News__histogram\">\n              {_.map(_.range(200), i => (\n                <div className={`News__histogram__bar News__histogram__bar--is-${i - 100 > sentimentRange[0] && i - 100 < sentimentRange[1] ? \"showing\" : \"not-showing\"}`} key={i} style={{\n                  height: `${articlesBySentiment[i - 100] ? _.max([articlesBySentiment[i - 100], 4]) * 100 / maxSentimentCount : 0}%`\n                }}>\n                </div>\n              ))}\n            </div>\n            <div className=\"News__slider__values\">\n              <div className=\"News__slider__value\">\n                Sentiment:\n              </div>\n              <div className=\"News__slider__value\">\n                {sentimentRange.join(\" to \")}\n              </div>\n            </div>\n            <Range\n              value={sentimentRange}\n              min={-100}\n              max={100}\n              count={2}\n              onChange={this.onSentimentRangeChange}\n              pushable\n              allowCross={false}\n            />\n          </div>\n        </div>\n\n        <div className=\"News__title-filter\">\n          <div className=\"News__title-filter__title\">\n            Filter out articles containing strings:\n          </div>\n          <Creatable\n            className=\"News__title-filter__input\"\n            classNamePrefix=\"News__title-filter__input\"\n            value={titleFilterObjects}\n            onChange={this.onTitleFilterChange}\n            isMulti\n            isClearable\n          />\n        </div>\n        <div className=\"News__note\">\n          Showing { filteredArticles.length } of { articles.length } articles\n        </div>\n\n        <div className={`News__articles News__articles--is-${isDimmingSeen ? \"dimming-seen\" : \"not-dimming-seen\"}`}>\n          {isLoading && (\n            <div className=\"News__note\">Loading...</div>\n          )}\n          {unseenArticles.map(article => <NewsArticle key={article.guid} article={article} />)}\n          {!!seenArticles.length && (\n            <div className=\"News__articles-separator\">\n              <div className=\"News__articles-separator__text\">\n                Already seen\n              </div>\n              <div className=\"News__articles-separator__line\" />\n\n              <Button className=\"News__articles-separator__toggle\" onClick={this.onIsDimmingSeenToggle}>\n                { isDimmingSeen ? \"Don't\" : \"Do\" } dim\n              </Button>\n            </div>\n          )}\n          {seenArticles.map(article => <NewsArticle key={article.guid} article={article} />)}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default News\n\nconst NewsArticle = ({ article }) => (\n  <a className={[\n    \"NewsArticle\",\n    `NewsArticle--is-${article.hasBeenViewed ? \"not-new\" : \"new\"}`,\n  ].join(\" \")} href={article.link} target=\"_blank\">\n    <div className=\"NewsArticle__title\">\n      <div className=\"NewsArticle__title__label\" dangerouslySetInnerHTML={{__html:  article.title }} />\n      <div className=\"NewsArticle__site\">\n        { article.site }\n      </div>\n      <div className=\"NewsArticle__date\">\n        { formatDate(article.pubDate) }\n      </div>\n    </div>\n    <div className=\"NewsArticle__snippet\">\n      { article.contentSnippet.slice(0, 200) }\n    </div>\n    <div className=\"NewsArticle__sentiment\">\n      Sentiment: { article.sentiment && article.sentiment.score }\n    </div>\n  </a>\n)","import React, {Component} from \"react\"\nimport PropTypes from \"prop-types\"\nimport classNames from \"classnames\"\nimport Button from \"./../Button\"\n\nrequire('./ButtonGroup.scss')\n\nclass ButtonGroup extends Component {\n  static propTypes = {\n    buttons: PropTypes.array,\n    onChange: PropTypes.func\n  }\n\n  getClassName() {\n    return classNames(\n      \"ButtonGroup\", this.props.className\n    )\n  }\n\n  getButtonClassName(button) {\n    return classNames(button.className, {\n      \"Button--active\": button.isActive,\n      \"Button--inactive\": !button.isActive,\n    })\n  }\n\n  onChange = button => e => {\n    this.props.onChange(button, e)\n  }\n\n  render() {\n    let {buttons} = this.props\n\n    return (\n      <div className={this.getClassName()}>\n        {buttons.map((button, idx) =>\n          <Button type=\"button\"\n                  key={idx}\n                  className={this.getButtonClassName(button)}\n                  disabled={button.isDisabled}\n                  onClick={this.onChange(button)}>\n            {button.label || button}\n            {button.children}\n          </Button>\n        )}\n      </div>\n      )\n  }\n}\n\nexport default ButtonGroup\n","var map = {\n\t\"./en/index\": 814\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 979;"],"sourceRoot":""}